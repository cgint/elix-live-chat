<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Directory structure - Phoenix v1.7.21</title>
    <meta name="generator" content="ExDoc v0.37.3" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">
Directory structure
    </h1>
<blockquote><p><strong>Requirement</strong>: This guide expects that you have gone through the <a href="installation.html">introductory guides</a> and got a Phoenix application <a href="up_and_running.html">up and running</a>.</p></blockquote><p>When we use <a href="https://hexdocs.pm/phx_new/1.8.0-rc.3/Mix.Tasks.Phx.New.html"><code class="inline">mix phx.new</code></a> to generate a new Phoenix application, it builds a top-level directory structure like this:</p><pre><code class="makeup console" translate="no"><span class="">├── _build
</span><span class="">├── assets
</span><span class="">├── config
</span><span class="">├── deps
</span><span class="">├── lib
</span><span class="">│   ├── hello
</span><span class="">│   ├── hello.ex
</span><span class="">│   ├── hello_web
</span><span class="">│   └── hello_web.ex
</span><span class="">├── priv
</span><span class="">└── test
</span></code></pre><p>We will go over those directories one by one:</p><ul><li><p><code class="inline">_build</code> - a directory created by the <code class="inline">mix</code> command line tool that ships as part of Elixir that holds all compilation artifacts. As we have seen in &quot;<a href="up_and_running.html">Up and Running</a>&quot;, <code class="inline">mix</code> is the main interface to your application. We use Mix to compile our code, create databases, run our server, and more. This directory must not be checked into version control and it can be removed at any time. Removing it will force Mix to rebuild your application from scratch.</p></li><li><p><code class="inline">assets</code> - a directory that keeps source code for your front-end assets, typically JavaScript and CSS. These sources are automatically bundled by the <code class="inline">esbuild</code> tool. Static files like images and fonts go in <code class="inline">priv/static</code>.</p></li><li><p><code class="inline">config</code> - a directory that holds your project configuration. The <code class="inline">config/config.exs</code> file is the entry point for your configuration. At the end of the <code class="inline">config/config.exs</code>, it imports environment specific configuration, which can be found in <code class="inline">config/dev.exs</code>, <code class="inline">config/test.exs</code>, and <code class="inline">config/prod.exs</code>. Finally, <code class="inline">config/runtime.exs</code> is executed and it is the best place to read secrets and other dynamic configuration.</p></li><li><p><code class="inline">deps</code> - a directory with all of our Mix dependencies. You can find all dependencies listed in the <code class="inline">mix.exs</code> file, inside the <code class="inline">defp deps do</code> function definition. This directory must not be checked into version control and it can be removed at any time. Removing it will force Mix to download all deps from scratch.</p></li><li><p><code class="inline">lib</code> - a directory that holds your application source code. This directory is broken into two subdirectories, <code class="inline">lib/hello</code> and <code class="inline">lib/hello_web</code>. The <code class="inline">lib/hello</code> directory will be responsible to host all of your business logic and business domain. It typically interacts directly with the database - it is the &quot;Model&quot; in Model-View-Controller (MVC) architecture. <code class="inline">lib/hello_web</code> is responsible for exposing your business domain to the world, in this case, through a web application. It holds both the View and Controller from MVC. We will discuss the contents of these directories with more detail in the next sections.</p></li><li><p><code class="inline">priv</code> - a directory that keeps all resources that are necessary in production but are not directly part of your source code. You typically keep database scripts, translation files, images, and more in here. Generated assets, created from files in the <code class="inline">assets</code> directory, are placed in <code class="inline">priv/static/assets</code> by default.</p></li><li><p><code class="inline">test</code> - a directory with all of our application tests. It often mirrors the same structure found in <code class="inline">lib</code>.</p></li></ul><h2 id="the-lib-hello-directory" class="section-heading">
  <a href="#the-lib-hello-directory" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">The lib/hello directory</span>
</h2>
<p>The <code class="inline">lib/hello</code> directory hosts all of your business domain. Since our project does not have any business logic yet, the directory is mostly empty. You will only find three files:</p><pre><code class="makeup console" translate="no"><span class="">lib/hello
</span><span class="">├── application.ex
</span><span class="">├── mailer.ex
</span><span class="">└── repo.ex
</span></code></pre><p>The <code class="inline">lib/hello/application.ex</code> file defines an Elixir application named <code class="inline">Hello.Application</code>. That's because at the end of the day Phoenix applications are simply Elixir applications. The <code class="inline">Hello.Application</code> module defines which services are part of our application:</p><pre><code class="makeup elixir" translate="no"><span class="n">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3009742395-1">[</span><span class="w">
  </span><span class="nc">HelloWeb.Telemetry</span><span class="p">,</span><span class="w">
  </span><span class="nc">Hello.Repo</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="3009742395-2">{</span><span class="nc">Phoenix.PubSub</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Hello.PubSub</span><span class="p" data-group-id="3009742395-2">}</span><span class="p">,</span><span class="w">
  </span><span class="nc">HelloWeb.Endpoint</span><span class="w">
</span><span class="p" data-group-id="3009742395-1">]</span></code></pre><p>If it is your first time with Phoenix, you don't need to worry about the details right now. For now, suffice it to say our application starts a database repository, a PubSub system for sharing messages across processes and nodes, and the application endpoint, which effectively serves HTTP requests. These services are started in the order they are defined and, whenever shutting down your application, they are stopped in the reverse order.</p><p>You can learn more about applications in <a href="https://hexdocs.pm/elixir/Application.html">Elixir's official docs for Application</a>.</p><p>The <code class="inline">lib/hello/mailer.ex</code> file holds the <code class="inline">Hello.Mailer</code> module, which defines the main interface to deliver e-mails:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hello.Mailer</span><span class="w"> </span><span class="k" data-group-id="7350588866-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Swoosh.Mailer</span><span class="p">,</span><span class="w"> </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:hello</span><span class="w">
</span><span class="k" data-group-id="7350588866-1">end</span></code></pre><p>In the same <code class="inline">lib/hello</code> directory, we will find a <code class="inline">lib/hello/repo.ex</code>. It defines a <code class="inline">Hello.Repo</code> module which is our main interface to the database. If you are using Postgres (the default database), you will see something like this:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hello.Repo</span><span class="w"> </span><span class="k" data-group-id="4480042448-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ecto.Repo</span><span class="p">,</span><span class="w">
    </span><span class="ss">otp_app</span><span class="p">:</span><span class="w"> </span><span class="ss">:hello</span><span class="p">,</span><span class="w">
    </span><span class="ss">adapter</span><span class="p">:</span><span class="w"> </span><span class="nc">Ecto.Adapters.Postgres</span><span class="w">
</span><span class="k" data-group-id="4480042448-1">end</span></code></pre><p>And that's it for now. As you work on your project, we will add files and modules to this directory.</p><h2 id="the-lib-hello_web-directory" class="section-heading">
  <a href="#the-lib-hello_web-directory" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">The lib/hello_web directory</span>
</h2>
<p>The <code class="inline">lib/hello_web</code> directory holds the web-related parts of our application. It looks like this when expanded:</p><pre><code class="makeup console" translate="no"><span class="">lib/hello_web
</span><span class="">├── controllers
</span><span class="">│   ├── page_controller.ex
</span><span class="">│   ├── page_html.ex
</span><span class="">│   ├── error_html.ex
</span><span class="">│   ├── error_json.ex
</span><span class="">│   └── page_html
</span><span class="">│       └── home.html.heex
</span><span class="">├── components
</span><span class="">│   ├── core_components.ex
</span><span class="">│   ├── layouts.ex
</span><span class="">│   └── layouts
</span><span class="">│       ├── app.html.heex
</span><span class="">│       └── root.html.heex
</span><span class="">├── endpoint.ex
</span><span class="">├── gettext.ex
</span><span class="">├── router.ex
</span><span class="">└── telemetry.ex
</span></code></pre><p>All of the files which are currently in the <code class="inline">controllers</code> and <code class="inline">components</code> directories are there to create the &quot;Welcome to Phoenix!&quot; page we saw in the &quot;<a href="up_and_running.html">Up and running</a>&quot; guide.</p><p>By looking at <code class="inline">controller</code> and <code class="inline">components</code> directories, we can see Phoenix provides features for handling layouts and HTML and error pages out of the box.</p><p>Besides the directories mentioned, <code class="inline">lib/hello_web</code> has four files at its root. <code class="inline">lib/hello_web/endpoint.ex</code> is the entry-point for HTTP requests. Once the browser accesses <a href="http://localhost:4000">http://localhost:4000</a>, the endpoint starts processing the data, eventually leading to the router, which is defined in <code class="inline">lib/hello_web/router.ex</code>. The router defines the rules to dispatch requests to &quot;controllers&quot;, which calls a view module to render HTML pages back to clients. We explore these layers in length in other guides, starting with the &quot;<a href="request_lifecycle.html">Request life-cycle</a>&quot; guide coming next.</p><p>Through <em>Telemetry</em>, Phoenix is able to collect metrics and send monitoring events of your application. The <code class="inline">lib/hello_web/telemetry.ex</code> file defines the supervisor responsible for managing the telemetry processes. You can find more information on this topic in the <a href="telemetry.html">Telemetry guide</a>.</p><p>Finally, there is a <code class="inline">lib/hello_web/gettext.ex</code> file which provides internationalization through <a href="https://hexdocs.pm/gettext/Gettext.html">Gettext</a>. If you are not worried about internationalization, you can safely skip this file and its contents.</p><h2 id="the-assets-directory" class="section-heading">
  <a href="#the-assets-directory" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">The assets directory</span>
</h2>
<p>The <code class="inline">assets</code> directory contains source files related to front-end assets, such as JavaScript and CSS. Since Phoenix v1.6, we use <a href="https://github.com/evanw/esbuild/"><code class="inline">esbuild</code></a> to compile assets, which is managed by the <a href="https://github.com/phoenixframework/esbuild"><code class="inline">esbuild</code></a> Elixir package. The integration with <code class="inline">esbuild</code> is baked into your app. The relevant config can be found in your <code class="inline">config/config.exs</code> file.</p><p>Your other static assets are placed in the <code class="inline">priv/static</code> folder, where <code class="inline">priv/static/assets</code> is kept for generated assets. Everything in <code class="inline">priv/static</code> is served by the <a href="https://hexdocs.pm/plug/1.15.3/Plug.Static.html"><code class="inline">Plug.Static</code></a> plug configured in <code class="inline">lib/hello_web/endpoint.ex</code>.  When running in dev mode (<code class="inline">MIX_ENV=dev</code>), Phoenix watches for any changes you make in the <code class="inline">assets</code> directory, and then takes care of updating your front end application in your browser as you work.</p><p>Note that when you first create your Phoenix app using <a href="https://hexdocs.pm/phx_new/1.8.0-rc.3/Mix.Tasks.Phx.New.html"><code class="inline">mix phx.new</code></a> it is possible to specify options that will affect the presence and layout of the <code class="inline">assets</code> directory.  In fact, Phoenix apps can bring their own front end tools or not have a front-end at all (handy if you're writing an API for example).  For more information you can run <a href="https://hexdocs.pm/phx_new/1.8.0-rc.3/Mix.Tasks.Phx.New.html"><code class="inline">mix help phx.new</code></a> or see the documentation in <a href="mix_tasks.html">Mix tasks</a>.</p><p>If the default esbuild integration does not cover your needs, for example because you want to use another build tool, you can switch to a <a href="asset_management.html#custom_builds">custom assets build</a>.</p><p>As for CSS, Phoenix ships with the <a href="https://tailwindcss.com/">Tailwind CSS Framework</a>, providing a base setup for projects. You may move to any CSS framework of your choice. Additional references can be found in the <a href="asset_management.xhtml#css">asset management</a> guide.</p>

  </body>
</html>
