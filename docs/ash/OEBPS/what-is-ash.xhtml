<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>What is Ash? - ash v3.5.33</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">What is Ash?</h1>
<p>Ash is an opinionated, declarative application framework that brings the batteries-included experience to Elixir. It shines when building web apps, APIs and services, but can be used for any kind of Elixir application. It integrates with the best that the Elixir ecoystem has to offer, often used with Phoenix and PostgreSQL, slotting directly into a standard Elixir codebase. Ash is built for velocity at day 1, but also for maintainability at year 5, a place where many frameworks and tools leave you high and dry.</p><blockquote><p>Through its declarative extensibility, Ash delivers more than you'd expect: Powerful APIs with filtering/sorting/pagination/calculations/aggregations, pub/sub, authorization, rich introspection, GraphQL... It's what empowers this solo developer to build an ambitious ERP!</p><p>— Frank Dugan III, System Specialist, SunnyCor Inc.</p></blockquote><p>At its heart, Ash is a framework for modeling your application's domain through <strong>Resources</strong> and their <strong>Actions</strong>. These are the fundamental abstractions that everything else builds upon.</p><h2 id="why-ash">Why Ash?</h2><p>If you've ever built software professionally, you've almost certainly experienced one or more of the following:</p><p><strong>The problem</strong>:</p><ul><li><strong>Repetitive work</strong> - The same business logic scattered across our application</li><li><strong>Inconsistencies</strong> - Different parts of your app handling the same data differently</li><li><strong>Maintenance burden</strong> - Changing one thing requires updating five different places</li><li><strong>Knowledge silos</strong> - Each developer builds everything slightly differently, leading to inconsistencies and inefficiencies.</li></ul><p><strong>Ash's solution</strong>: Model your application's <strong>behavior</strong> first, as data, and derive everything else automatically. Ash resources center around <strong>actions</strong> that represent domain logic. Instead of exposing raw data models, you define meaningful operations like <code class="inline">:publish_post</code>, <code class="inline">:approve_order</code>, or <code class="inline">:calculate_shipping_cost</code> that encapsulate your business logic, validation, and authorization rules. This is coupled with a rich suite of extensions to fill the most common needs of Elixir applications.</p><blockquote><p>Ash fills the gap that brings Phoenix up to feature parity with a batteries included framework like Django.
Ash Admin (Django admin), Ash Resource &amp; Domain (Django models &amp; ORM), AshJsonApi (Django REST Framework), Ash Authentication (Django Allauth), Ash Phoenix (Django Forms), Ash Policies (Django Permissions)</p><p>But you aren't required to use Phoenix with an Ash project. Ash will happily work as a standalone CLI, terminal app or some other Elixir web framework that comes out tomorrow.</p><p>Scott Woodall - Principal Software Engineer, Microsoft</p></blockquote><h2 id="built-for-flexibility">Built for Flexibility</h2><p>Ash was born out of the battle-scars from inflexible abstractions that eventually paint you into a corner. That's why Ash is designed with <strong>multi-tiered configurability</strong> and <strong>escape hatches all the way down</strong>. Instead of deciding that abstraction was bad, we decided that it just needed to be done better. Elixir &amp; the BEAM have our backs, providing a solid foundation upon which to build high quality applications.</p><p><strong>You're never locked out of custom behavior</strong>. Need to customize how an action works? Use preparations, changes, and validations. Need to override how data is fetched? Implement a manual action. Need to completely bypass Ash for a specific operation? Drop down to Ecto or raw SQL. Need to extend Ash itself? Use the same extension toolkit that powers AshPostgres and AshGraphql.</p><p>This isn't accidental - it's core to Ash's design. We provide powerful defaults that work for 80% of cases, extensive configuration options for the next 15%, and escape hatches for the remaining 5%. Your Ash application is just an Elixir application, so when you need to do something completely custom, Ash won't get in your way.</p><p>The framework acts as a <strong>spinal cord</strong> for your application: providing structure and coordination while allowing complete customization at every level.</p><h2 id="essential-context">Essential Context</h2><!-- tabs-open --><h3 id="elixir-developers">Elixir Developers</h3><p><strong>Ash builds on the best of the Elixir ecosystem</strong> rather than replacing it. Ash leverages Ecto for database operations, Phoenix for web interfaces, Oban for background jobs, Absinthe for GraphQL, etc. Ash unifies all of this tooling and significantly simplifies and enhances they way you use them together.</p><p><strong>Compile-time guarantees</strong> come from Ash's declarative nature - many errors that would be runtime failures in other frameworks become compile-time checks in Ash.</p><p><strong>The ecosystem advantage</strong>: Instead of learning entirely new patterns, Ash enhances familiar Elixir concepts. Your existing knowledge of pattern matching, process supervision, and OTP principles all apply - Ash just provides structure and automation on top, acting as a spinal cord for your application.</p><h3 id="non-elixir-developers">Non-Elixir Developers</h3><p><strong>Elixir</strong> is a functional programming language built on the Erlang VM, known for fault-tolerance and concurrency. It's used by WhatsApp, Discord, and Pinterest for systems that need high availability. If you know Ruby or Python, think of Elixir as optimized specifically for distributed, concurrent systems.</p><p><strong>Functional vs Object-Oriented</strong>: Unlike OOP frameworks, Elixir (and Ash) focus on transforming data through functions rather than encapsulating data in objects. This leads to more predictable, testable code.</p><p><strong>Immutability</strong> means data doesn't change in-place - instead, you create new versions. This eliminates many common bugs around shared state and makes concurrent operations safer.</p><p><strong>Actor Model Concurrency</strong>: Instead of threads and locks, Elixir uses lightweight processes (actors) that communicate via messages. This makes Ash naturally suited for high-concurrency applications.</p><p><strong>Modules</strong> (<code class="inline">defmodule</code>) are Elixir's equivalent to classes/namespaces - they group related functions together. Unlike OOP classes, they don't hold state.</p><h3 id="new-programmers">New Programmers</h3><p><strong>Programming languages</strong> like Elixir are tools for writing instructions that computers can follow. Elixir is specifically designed for building web applications that can handle lots of users at once.</p><p><strong>Modules</strong> (the <code class="inline">defmodule</code> blocks you'll see) are containers that group related code together. Think of them like chapters in a book - each chapter covers a specific topic.</p><h3 id="business-leaders">Business Leaders</h3><p><strong>Ash reduces software development costs</strong> by eliminating repetitive code. When your development team defines a business process once, Ash automatically generates the database structure, API endpoints, and user interfaces - work that normally requires separate specialists.</p><p><strong>Faster time-to-market</strong> because features that typically take weeks can be built in days. Adding a new feature like &quot;customer reviews&quot; or &quot;order tracking&quot; requires defining the business rules once, rather than building separate systems for web, mobile, and internal tools.</p><p><strong>Lower maintenance costs</strong> because changes to business rules automatically update all related systems. When you change how orders work, your database, APIs, and documentation stay synchronized without manual updates.</p><p><strong>Reduced technical risk</strong> through built-in security, data validation, and error handling. Your team spends time building your competitive advantages instead of solving the same infrastructure problems every software company faces.</p><p><strong>Developer productivity</strong> increases because the framework handles the &quot;plumbing&quot; while your team focuses on what makes your business unique. This means you need fewer developers to build the same functionality.</p><p><strong>Eliminates technical debt</strong> through enforced consistency. When every part of your application follows the same patterns, there's no accumulation of &quot;quick fixes&quot; and inconsistent approaches that slow down future development and create maintenance headaches.</p><p><strong>Faster developer onboarding</strong> because new team members learn one set of patterns that apply everywhere. Instead of each developer building things differently, Ash provides a shared vocabulary and approach that new hires can quickly understand and contribute to. Ash is still niche, so developers may not know it right out of the gate, but if you think of Ash as a replacement for your internal framework, which are universally poorly documented and hard to train on, you can see the benefit of Ash being an open source, well documented project with a strong community.</p><!-- tabs-close --><h2 id="resources-and-actions-the-core-abstractions">Resources and Actions: The Core Abstractions</h2><p>The foremost abstraction in Ash is <strong>Actions</strong> - the things you can do in your domain like <code class="inline">:create_user</code>, <code class="inline">:publish_post</code>, <code class="inline">:approve_order</code>, or <code class="inline">:calculate_shipping</code>. These actions are organized into <strong>Resources</strong> that group related behaviors around domain concepts like <code class="inline">User</code>, <code class="inline">Post</code>, <code class="inline">Order</code>, or <code class="inline">Invoice</code>. Using resources, you can easily model actions, alongside the state that they operate on, or just actions in isolation.</p><p>These actions are <strong>introspectable</strong> and <strong>fully typed</strong>. This means the rest of your application (and <strong>extensions</strong> - add-on packages that enhance Ash) can automatically understand and build functionality around them. When you define a <code class="inline">create</code> action that accepts a <code class="inline">:title</code> string and <code class="inline">:content</code> text, extensions like AshGraphql can automatically generate GraphQL mutations, AshJsonApi can create REST endpoints, and AshPostgres can handle database persistence - all without additional configuration.</p><p>This <strong>declarative approach</strong> means your resources become the single source of truth for your entire application. Database schemas, API endpoints, authorization rules, state machines, background jobs, and more all stem directly from your resource definitions.</p><h2 id="beyond-simple-crud">Beyond Simple CRUD</h2><p>Ash is not a web framework, like Phoenix or Rails. It is a framework for building your application layer, independent of how it is exposed or consumed. It is not an <strong>alternative</strong> to frameworks like Phoenix, rather a <strong>complement</strong> to them.</p><blockquote><p>Ash Framework enabled us to build a robust platform for delivering financial services using bitcoin. Ash proved itself to our team by handling innovative use cases with ease and it continues to evolve ahead of our growing list of needs.</p><p>— Yousef Janajri, CTO &amp; Co-Founder, Coinbits</p></blockquote><p>The intent behind Ash is <em>not</em> to have you building simple CRUD-style applications, although we do provide conveniences for these cases. The real power comes from defining rich, domain-specific actions with meaningful names like <code class="inline">:publish_post</code>, <code class="inline">:approve_order</code>, or <code class="inline">:calculate_shipping</code>. These actions encapsulate your business logic and can be composed, validated, authorized, and extended in powerful ways.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Model your domain, derive the rest</h4><p>Ash derives significant portions of your application directly from your resources, with little to no effort required. This allows you to focus on what matters most: your business logic.
We leverage the best of the Elixir ecosystem under the hood, providing a single unified tool-chain for our users.</p></section><h2 id="community">Community</h2><p>Ash has a vibrant community of developers who contribute to the project, provide support, and share knowledge. Join us on <a href="https://discord.gg/w3AXeARR2p">Discord</a>, <a href="https://elixirforum.com/ash">ElixirForum</a> and <a href="https://github.com/ash-project/ash">GitHub</a> to contribute, ask questions, and stay updated on the latest developments.</p><p>Our community is one of the best features of Ash and <strong>you should use it</strong>. Lots of folks using Ash in production, with a shared mission of making better software.</p><blockquote><p>I'm constantly blown away with the quality of work and support the Ash community has put into this project. It's gotten to the point that I can't imagine starting a new Elixir project that doesn't use Ash.</p><p>— Brett Kolodny, Full stack engineer, MEW</p></blockquote><h2 id="an-example-from-simple-to-sophisticated">An Example: From Simple to Sophisticated</h2><!-- tabs-open --><h3 id="introduction">Introduction</h3><p>If you're the &quot;just show me the code&quot; type, click through these tabs to see an example of evolving a blog post resource over time with Ash &amp; its extensions to get a sense for how it works.</p><section role="note" class="admonition info"><h4 class="admonition-title info">Don't worry about understanding all the code</h4><p>You're not expected to understand every detail of the syntax - focus on the concepts and how it changes over time. If you want a gentler introduction, head over to the <a href="get-started.xhtml">getting started</a> guide.</p></section><h3 id="actions">Actions</h3><pre><code class="makeup elixir" translate="no"><span class="c1"># lib/my_blog/blog.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="w"> </span><span class="k" data-group-id="2538543877-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Domain</span><span class="w">

  </span><span class="n">resources</span><span class="w"> </span><span class="k" data-group-id="2538543877-2">do</span><span class="w">
    </span><span class="n">resource</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="2538543877-3">do</span><span class="w">
      </span><span class="c1"># Defines the `analyze_text/1` function which calls</span><span class="w">
      </span><span class="c1"># the action of the same name on the Post resource.</span><span class="w">
      </span><span class="n">define</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2538543877-4">[</span><span class="ss">:text</span><span class="p" data-group-id="2538543877-4">]</span><span class="w">
    </span><span class="k" data-group-id="2538543877-3">end</span><span class="w">
  </span><span class="k" data-group-id="2538543877-2">end</span><span class="w">
</span><span class="k" data-group-id="2538543877-1">end</span><span class="w">

</span><span class="c1"># lib/my_blog/blog/post.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="2538543877-5">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="2538543877-6">do</span><span class="w">
    </span><span class="c1"># Start with pure behavior - a simple action that processes text</span><span class="w">
    </span><span class="n">action</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="p">,</span><span class="w"> </span><span class="ss">:map</span><span class="w"> </span><span class="k" data-group-id="2538543877-7">do</span><span class="w">
      </span><span class="n">argument</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

      </span><span class="n">run</span><span class="w"> </span><span class="k" data-group-id="2538543877-8">fn</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="c">_context</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">text</span><span class="w">
        </span><span class="n">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">split</span><span class="p" data-group-id="2538543877-9">(</span><span class="n">text</span><span class="p" data-group-id="2538543877-9">)</span><span class="w">

        </span><span class="n">analysis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2538543877-10">%{</span><span class="w">
          </span><span class="ss">word_count</span><span class="p">:</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="2538543877-11">(</span><span class="n">words</span><span class="p" data-group-id="2538543877-11">)</span><span class="p">,</span><span class="w">
          </span><span class="ss">character_count</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="2538543877-12">(</span><span class="n">text</span><span class="p" data-group-id="2538543877-12">)</span><span class="p">,</span><span class="w">
          </span><span class="ss">estimated_reading_time</span><span class="p">:</span><span class="w"> </span><span class="n">div</span><span class="p" data-group-id="2538543877-13">(</span><span class="n">length</span><span class="p" data-group-id="2538543877-14">(</span><span class="n">words</span><span class="p" data-group-id="2538543877-14">)</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p" data-group-id="2538543877-13">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p" data-group-id="2538543877-10">}</span><span class="w">

        </span><span class="p" data-group-id="2538543877-15">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">analysis</span><span class="p" data-group-id="2538543877-15">}</span><span class="w">
      </span><span class="k" data-group-id="2538543877-8">end</span><span class="w">
    </span><span class="k" data-group-id="2538543877-7">end</span><span class="w">
  </span><span class="k" data-group-id="2538543877-6">end</span><span class="w">
</span><span class="k" data-group-id="2538543877-5">end</span></code></pre><p>Notice how we have not defined any &quot;state&quot; here. A common misconception is that the purpose of Ash is to abstract state. Ash provides tons of useful features around state, but those are features <em>on top of</em> the core concept, which centers around typed actions.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="7960756947-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">analysis</span><span class="p" data-group-id="7960756947-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="o">.</span><span class="n">analyze_text</span><span class="p" data-group-id="7960756947-2">(</span><span class="s">&quot;This is some sample blog content to analyze.&quot;</span><span class="p" data-group-id="7960756947-2">)</span><span class="w">
</span><span class="c1"># =&gt; {:ok, %{word_count: 9, character_count: 49, estimated_reading_time: 1}}</span></code></pre><p><strong>Why not just write a regular function?</strong> You could write <code class="inline">def analyze_text(text)</code> and get the same result. But here's what the Ash action gives you that a function doesn't:</p><ul><li><strong>Type safety</strong> - Arguments are automatically validated (try passing a number instead of string)</li><li><strong>Introspection</strong> - Other tools can discover this action exists and what it does</li><li><strong>Extensibility</strong> - You can add authorization, logging, or other behaviors later without changing callers</li><li><strong>API generation</strong> - Extensions can automatically expose this as a REST endpoint or GraphQL query</li><li><strong>Consistent interface</strong> - All actions work the same way, making your codebase predictable</li></ul><p>The action is <strong>typed</strong> (it knows it takes a string and returns a map) and <strong>introspectable</strong> (your application can examine it at runtime). This means extensions can automatically understand and build on top of it.</p><section role="note" class="admonition info"><h3 id="you-could-stop-here" class="admonition-title info">You could stop here</h3><p>You could stop at this step and still derive significant value from Ash. You wouldn't be
using it wrong. You can build your own custom state system under the hood, use Phoenix contexts,
call directly into Ecto, totally up to you.</p></section><h3 id="persistence">Persistence</h3><p>Now let's add state to support persistent storage, while keeping our existing behavior:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># lib/my_blog/blog.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="w"> </span><span class="k" data-group-id="3697965502-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Domain</span><span class="w">

  </span><span class="n">resources</span><span class="w"> </span><span class="k" data-group-id="3697965502-2">do</span><span class="w">
    </span><span class="n">resource</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="3697965502-3">do</span><span class="w">
      </span><span class="n">define</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-4">[</span><span class="ss">:text</span><span class="p" data-group-id="3697965502-4">]</span><span class="w">
      </span><span class="n">define</span><span class="w"> </span><span class="ss">:create_post</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:create</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-5">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:content</span><span class="p" data-group-id="3697965502-5">]</span><span class="w">
    </span><span class="k" data-group-id="3697965502-3">end</span><span class="w">
  </span><span class="k" data-group-id="3697965502-2">end</span><span class="w">
</span><span class="k" data-group-id="3697965502-1">end</span><span class="w">

</span><span class="c1"># lib/my_blog/blog/post.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="3697965502-6">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPostgres.DataLayer</span><span class="w"> </span><span class="c1"># data_layer tells Ash where to store data</span><span class="w">

  </span><span class="n">postgres</span><span class="w"> </span><span class="k" data-group-id="3697965502-7">do</span><span class="w">
    </span><span class="n">table</span><span class="w"> </span><span class="s">&quot;posts&quot;</span><span class="w">
    </span><span class="n">repo</span><span class="w"> </span><span class="nc">MyBlog.Repo</span><span class="w">
  </span><span class="k" data-group-id="3697965502-7">end</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="3697965502-8">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="w"> </span><span class="ss">:id</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:content</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:status</span><span class="p">,</span><span class="w"> </span><span class="ss">:atom</span><span class="p">,</span><span class="w"> </span><span class="ss">constraints</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-9">[</span><span class="ss">one_of</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-10">[</span><span class="ss">:draft</span><span class="p">,</span><span class="w"> </span><span class="ss">:published</span><span class="p" data-group-id="3697965502-10">]</span><span class="p" data-group-id="3697965502-9">]</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p">:</span><span class="w"> </span><span class="ss">:draft</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">

    </span><span class="n">create_timestamp</span><span class="w"> </span><span class="ss">:created_at</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">update_timestamp</span><span class="w"> </span><span class="ss">:updated_at</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="3697965502-8">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="3697965502-11">do</span><span class="w">
    </span><span class="n">action</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="p">,</span><span class="w"> </span><span class="ss">:map</span><span class="w"> </span><span class="k" data-group-id="3697965502-12">do</span><span class="w">
      </span><span class="n">argument</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

      </span><span class="n">run</span><span class="w"> </span><span class="k" data-group-id="3697965502-13">fn</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="c">_context</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">text</span><span class="w">
        </span><span class="n">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">split</span><span class="p" data-group-id="3697965502-14">(</span><span class="n">text</span><span class="p" data-group-id="3697965502-14">)</span><span class="w">

        </span><span class="n">analysis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3697965502-15">%{</span><span class="w">
          </span><span class="ss">word_count</span><span class="p">:</span><span class="w"> </span><span class="n">length</span><span class="p" data-group-id="3697965502-16">(</span><span class="n">words</span><span class="p" data-group-id="3697965502-16">)</span><span class="p">,</span><span class="w">
          </span><span class="ss">character_count</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="3697965502-17">(</span><span class="n">text</span><span class="p" data-group-id="3697965502-17">)</span><span class="p">,</span><span class="w">
          </span><span class="ss">estimated_reading_time</span><span class="p">:</span><span class="w"> </span><span class="n">div</span><span class="p" data-group-id="3697965502-18">(</span><span class="n">length</span><span class="p" data-group-id="3697965502-19">(</span><span class="n">words</span><span class="p" data-group-id="3697965502-19">)</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p" data-group-id="3697965502-18">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p" data-group-id="3697965502-15">}</span><span class="w">

        </span><span class="p" data-group-id="3697965502-20">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">analysis</span><span class="p" data-group-id="3697965502-20">}</span><span class="w">
      </span><span class="k" data-group-id="3697965502-13">end</span><span class="w">
    </span><span class="k" data-group-id="3697965502-12">end</span><span class="w">

    </span><span class="n">defaults</span><span class="w"> </span><span class="p" data-group-id="3697965502-21">[</span><span class="ss">:read</span><span class="p">,</span><span class="w"> </span><span class="ss">:destroy</span><span class="p">,</span><span class="w"> </span><span class="ss">create</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-22">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:content</span><span class="p" data-group-id="3697965502-22">]</span><span class="p">,</span><span class="w"> </span><span class="ss">update</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3697965502-23">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:content</span><span class="p">,</span><span class="w"> </span><span class="ss">:status</span><span class="p" data-group-id="3697965502-23">]</span><span class="p" data-group-id="3697965502-21">]</span><span class="w">
  </span><span class="k" data-group-id="3697965502-11">end</span><span class="w">
</span><span class="k" data-group-id="3697965502-6">end</span></code></pre><p>Now your resource combines behavior and state. The original <code class="inline">analyze_text</code> action still works, plus you can create and persist posts:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Behavior still works exactly the same</span><span class="w">
</span><span class="p" data-group-id="4117849489-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">analysis</span><span class="p" data-group-id="4117849489-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="o">.</span><span class="n">analyze_text</span><span class="p" data-group-id="4117849489-2">(</span><span class="s">&quot;Some text to analyze&quot;</span><span class="p" data-group-id="4117849489-2">)</span><span class="w">

</span><span class="c1"># Now we can also persist state</span><span class="w">
</span><span class="p" data-group-id="4117849489-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="p" data-group-id="4117849489-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="o">.</span><span class="n">create_post</span><span class="p" data-group-id="4117849489-4">(</span><span class="s">&quot;My First Post&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This is some content&quot;</span><span class="p" data-group-id="4117849489-4">)</span></code></pre><h3 id="graphql">GraphQL</h3><p>This is just one example of an API extension. We also have <a href="https://hexdocs.pm/ash_json_api">ash_json_api</a> with more on the way.
Ash also comes with all the tools you need to build <em>your own</em> API extension.</p><pre><code class="makeup elixir" translate="no"><span class="c1"># Add to your domain</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="w"> </span><span class="k" data-group-id="4066442914-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">extensions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4066442914-2">[</span><span class="nc">AshGraphql.Domain</span><span class="p" data-group-id="4066442914-2">]</span><span class="w">

  </span><span class="n">graphql</span><span class="w"> </span><span class="k" data-group-id="4066442914-3">do</span><span class="w">
    </span><span class="n">queries</span><span class="w"> </span><span class="k" data-group-id="4066442914-4">do</span><span class="w">
      </span><span class="n">action</span><span class="w"> </span><span class="nc">MyApp.Blog.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="p">,</span><span class="w"> </span><span class="ss">:analyze_text</span><span class="w">
    </span><span class="k" data-group-id="4066442914-4">end</span><span class="w">

    </span><span class="n">mutations</span><span class="w"> </span><span class="k" data-group-id="4066442914-5">do</span><span class="w">
      </span><span class="n">create</span><span class="w"> </span><span class="nc">MyApp.Blog.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">:create_post</span><span class="p">,</span><span class="w"> </span><span class="ss">:create</span><span class="w">
    </span><span class="k" data-group-id="4066442914-5">end</span><span class="w">
  </span><span class="k" data-group-id="4066442914-3">end</span><span class="w">

  </span><span class="c1"># ... resources</span><span class="w">
</span><span class="k" data-group-id="4066442914-1">end</span><span class="w">

</span><span class="c1"># Add to your resource</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="4066442914-6">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPostgres.DataLayer</span><span class="p">,</span><span class="w">
    </span><span class="ss">extensions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4066442914-7">[</span><span class="nc">AshGraphql.Resource</span><span class="p" data-group-id="4066442914-7">]</span><span class="w">

  </span><span class="n">graphql</span><span class="w"> </span><span class="k" data-group-id="4066442914-8">do</span><span class="w">
    </span><span class="c1"># you just tell us the name of the type</span><span class="w">
    </span><span class="c1"># we can take care of the rest</span><span class="w">
    </span><span class="c1"># there is deep configuration with plenty of escape hatches</span><span class="w">
    </span><span class="c1"># for when you need something bespoke</span><span class="w">
    </span><span class="n">type</span><span class="w"> </span><span class="ss">:post</span><span class="w">
  </span><span class="k" data-group-id="4066442914-8">end</span><span class="w">

  </span><span class="c1"># ... rest of resource definition</span><span class="w">
</span><span class="k" data-group-id="4066442914-6">end</span></code></pre><p>Now you have a full GraphQL API with queries, mutations, and custom actions automatically generated from your resource definition.
That is actually all of the code you need to do it.</p><blockquote><p>The ease of defining our domain model and configuring Ash to generate a powerful GraphQL API has been a game-changer. What used to be complex and time-consuming has become simplicity itself.</p><p>— Alan Heywood, CTO, HereTask</p></blockquote><h3 id="encryption">Encryption</h3><p><a href="https://hexdocs.pm/cloak">Cloak</a> is a powerful library for encrypting data at rest and in transit. Ash provides a first class extension that integrates with it directly.</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="2934187632-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPostgres.DataLayer</span><span class="p">,</span><span class="w">
    </span><span class="ss">extensions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2934187632-2">[</span><span class="nc">AshGraphql.Resource</span><span class="p">,</span><span class="w"> </span><span class="nc">AshCloak.Resource</span><span class="p" data-group-id="2934187632-2">]</span><span class="w">

  </span><span class="n">cloak</span><span class="w"> </span><span class="k" data-group-id="2934187632-3">do</span><span class="w">
    </span><span class="n">vault</span><span class="w"> </span><span class="nc">MyBlog.Vault</span><span class="w">
    </span><span class="n">attributes</span><span class="w"> </span><span class="p" data-group-id="2934187632-4">[</span><span class="ss">:content</span><span class="p" data-group-id="2934187632-4">]</span><span class="w">  </span><span class="c1"># Encrypt the content attribute</span><span class="w">
  </span><span class="k" data-group-id="2934187632-3">end</span><span class="w">

  </span><span class="c1"># ... rest of resource definition</span><span class="w">
</span><span class="k" data-group-id="2934187632-1">end</span></code></pre><p>Your post content is now automatically encrypted at rest and decrypted when read, with no changes to your existing API or business logic.</p><h3 id="state-machines">State Machines</h3><p>A state machine is a way to model the valid states for some piece of data. It allows you to define the states a record can be in, and the transitions between those states.</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyBlog.Blog.Post</span><span class="w"> </span><span class="k" data-group-id="0635700247-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">MyBlog.Blog</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPostgres.DataLayer</span><span class="p">,</span><span class="w">
    </span><span class="ss">extensions</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0635700247-2">[</span><span class="nc">AshGraphql.Resource</span><span class="p">,</span><span class="w"> </span><span class="nc">AshCloak.Resource</span><span class="p">,</span><span class="w"> </span><span class="nc">AshStateMachine</span><span class="p" data-group-id="0635700247-2">]</span><span class="w">

  </span><span class="n">state_machine</span><span class="w"> </span><span class="k" data-group-id="0635700247-3">do</span><span class="w">
    </span><span class="n">initial_states</span><span class="w"> </span><span class="p" data-group-id="0635700247-4">[</span><span class="ss">:draft</span><span class="p" data-group-id="0635700247-4">]</span><span class="w">
    </span><span class="n">default_initial_state</span><span class="w"> </span><span class="ss">:draft</span><span class="w">

    </span><span class="n">transitions</span><span class="w"> </span><span class="k" data-group-id="0635700247-5">do</span><span class="w">
      </span><span class="n">transition</span><span class="w"> </span><span class="ss">:publish</span><span class="p">,</span><span class="w"> </span><span class="ss">from</span><span class="p">:</span><span class="w"> </span><span class="ss">:draft</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="ss">:published</span><span class="w">
      </span><span class="n">transition</span><span class="w"> </span><span class="ss">:unpublish</span><span class="p">,</span><span class="w"> </span><span class="ss">from</span><span class="p">:</span><span class="w"> </span><span class="ss">:published</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="ss">:draft</span><span class="w">
    </span><span class="k" data-group-id="0635700247-5">end</span><span class="w">
  </span><span class="k" data-group-id="0635700247-3">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="0635700247-6">do</span><span class="w">
    </span><span class="c1"># ... same actions as before</span><span class="w">
    </span><span class="n">update</span><span class="w"> </span><span class="ss">:publish</span><span class="w"> </span><span class="k" data-group-id="0635700247-7">do</span><span class="w">
      </span><span class="n">change</span><span class="w"> </span><span class="n">transition_state</span><span class="p" data-group-id="0635700247-8">(</span><span class="ss">:published</span><span class="p" data-group-id="0635700247-8">)</span><span class="w">
      </span><span class="c1"># ... additional custom logic on publish</span><span class="w">
    </span><span class="k" data-group-id="0635700247-7">end</span><span class="w">

    </span><span class="n">update</span><span class="w"> </span><span class="ss">:unpublish</span><span class="w"> </span><span class="k" data-group-id="0635700247-9">do</span><span class="w">
      </span><span class="n">change</span><span class="w"> </span><span class="n">transition_state</span><span class="p" data-group-id="0635700247-10">(</span><span class="ss">:draft</span><span class="p" data-group-id="0635700247-10">)</span><span class="w">
      </span><span class="c1"># ... additional custom logic on publish</span><span class="w">
    </span><span class="k" data-group-id="0635700247-9">end</span><span class="w">
  </span><span class="k" data-group-id="0635700247-6">end</span><span class="w">

  </span><span class="c1"># ... rest of resource definition</span><span class="w">
</span><span class="k" data-group-id="0635700247-1">end</span></code></pre><p>Now your posts have a proper state machine with transition actions, state validation, and automatic GraphQL mutations for state changes.</p><!-- tabs-close --><h2 id="the-ash-advantage">The Ash Advantage</h2><p>This example demonstrates Ash's core philosophy: <strong>Model your domain, derive the rest</strong>. Notice how:</p><ul><li>The resource definition remained largely unchanged as we added each extension</li><li>Each extension automatically understood and enhanced the existing actions</li><li>Complex functionality (encryption, state machines, APIs) required minimal configuration</li><li>Everything remains introspectable and type-safe</li><li>Your business logic stays focused on the domain, not infrastructure concerns</li><li>These extensions are built with the same suite of tools we provide <em>to the user</em> for extending Ash.
Those using Ash will often end up crafting their own extensions, making the framework truly their own.</li></ul><p>Extensions work together seamlessly because they all operate on the same well-defined resource and action abstractions. In the example above, we went from a single action to a full-featured system with database persistence, GraphQL API, encryption, and state management - by adding configuration, not writing code.</p><p><strong>The productivity gain is measurable</strong>: What normally requires separate database migration files, API endpoint definitions, validation logic, GraphQL schema files, and state management code becomes a single, cohesive resource definition that stays automatically synchronized.</p>

  </body>
</html>
