<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Pagination - ash v3.5.33</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">Pagination</h1>
<pre><code class="makeup elixir" translate="no"><span class="nc">Mix</span><span class="o">.</span><span class="n">install</span><span class="p" data-group-id="2679620593-1">(</span><span class="p" data-group-id="2679620593-2">[</span><span class="p" data-group-id="2679620593-3">{</span><span class="ss">:ash</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 3.0&quot;</span><span class="p" data-group-id="2679620593-3">}</span><span class="p" data-group-id="2679620593-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">consolidate_protocols</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="2679620593-1">)</span><span class="w">
</span><span class="nc">Logger</span><span class="o">.</span><span class="n">configure</span><span class="p" data-group-id="2679620593-4">(</span><span class="ss">level</span><span class="p">:</span><span class="w"> </span><span class="ss">:warning</span><span class="p" data-group-id="2679620593-4">)</span></code></pre><h2 id="pagination-in-ash">Pagination in Ash</h2><p>Ash has built-in support for two kinds of pagination: <code class="inline">offset</code> and <code class="inline">keyset</code>. You can perform pagination by passing the <code class="inline">:page</code> option to read actions, or using <a href="Ash.Query.xhtml#page/2"><code class="inline">Ash.Query.page/2</code></a> on the query. The page options vary depending on which kind of pagination you want to perform.</p><p>Pagination support is configured on a per-action basis. A single action can support both kinds of pagination if desired, but typically you would use one or the other. Read actions generated with <code class="inline">defaults [:read]</code> support both offset and keyset pagination, for other <code class="inline">read</code> actions you have to configure the <a href="https://hexdocs.pm/ash/dsl-ash-resource.html#actions-read-pagination"><code class="inline">pagination</code> section</a>.</p><blockquote><h3 id="default-pagination-type">Default Pagination Type</h3><p>When an action supports both pagination types, the behavior depends on your application configuration. See the <a href="#default-pagination-behavior-when-both-types-are-supported">&quot;Default Pagination Behavior&quot;</a> section below for details on how Ash determines which type to use.</p></blockquote><blockquote><h3 id="check-the-updated-query-return-type">Check the updated query return type!</h3><p>Pagination will modify the return type of calling the query action.</p><p>Without pagination, Ash will return a list of records.</p><p>But <em>with</em> pagination, Ash will return an <a href="Ash.Page.Offset.xhtml"><code class="inline">Ash.Page.Offset</code></a> struct (for offset pagination) or <a href="Ash.Page.Keyset.xhtml"><code class="inline">Ash.Page.Keyset</code></a> struct (for keyset pagination). Both structs contain the list of records in the <code class="inline">results</code> key of the struct.</p></blockquote><h2 id="offset-pagination">Offset Pagination</h2><p>Offset pagination is done via providing a <code class="inline">limit</code> and an <code class="inline">offset</code> when making queries.</p><ul><li>The <code class="inline">limit</code> determines how many records should be returned in the query.</li><li>The <code class="inline">offset</code> describes how many records from the beginning should be skipped.</li></ul><h3 id="pros-of-offset-pagination">Pros of offset pagination</h3><ul><li>Simple to think about</li><li>Possible to skip to a page by number. E.g the 5th page of 10 records is <code class="inline">offset: 40</code></li><li>Easy to reason about what page you are currently on (if the total number of records is requested)</li><li>Can go to the last page (though data may have changed between calculating the last page details, and requesting it)</li></ul><h3 id="cons-of-offset-pagination">Cons of offset pagination</h3><ul><li>Does not perform well on large datasets (if you have to ask if your dataset is &quot;large&quot;, it probably isn't)</li><li>When moving between pages, if data was created or deleted, individual records may be missing or appear on multiple pages</li></ul><h2 id="keyset-pagination">Keyset Pagination</h2><p>Keyset pagination, also known as cursor pagination, is done via providing an <code class="inline">after</code> or <code class="inline">before</code> option, as well as a <code class="inline">limit</code>.</p><ul><li>The <code class="inline">limit</code> determines how many records should be returned in the query.</li><li>The <code class="inline">after</code> or <code class="inline">before</code> value should be a <code class="inline">keyset</code> value that has been returned from a previous request. Keyset values are returned whenever there is any read action on a resource that supports keyset pagination, and they are stored in the <code class="inline">__metadata__</code> key of each record.</li></ul><blockquote><h3 id="keysets-are-directly-tied-to-the-sorting-applied-to-the-query">Keysets are directly tied to the sorting applied to the query</h3><p>You can't change the sort applied to a request being paginated, and use the same keyset. If you want to change the sort, but <em>keep</em> the record who's keyset you are using in the <code class="inline">before</code> or <code class="inline">after</code> option, you must first request the individual record, with the new sort applied. Then, you can use the new keyset.</p></blockquote><h3 id="pros-of-keyset-pagination">Pros of keyset pagination</h3><ul><li>Performs very well on large datasets (assuming indices exist on the columns being sorted on)</li><li>Behaves well as data changes. The record specified will always be the first or last item in the page</li></ul><h3 id="cons-of-keyset-paginations">Cons of keyset paginations</h3><ul><li>A bit more complex to use</li><li>Can't go to a specific page number</li></ul><h2 id="counting-records">Counting records</h2><p>When calling an action that uses pagination, the full count of records can be requested by adding the option <code class="inline">count: true</code> to the page options.
Note that this will perform a second query to fetch the count, which can be expensive on large data sets.</p><h2 id="relationship-pagination">Relationship pagination</h2><p>In addition to paginating root data, Ash is also capable of paginating relationships when you load them. To do this, pass a custom query in the load and call <a href="Ash.Query.xhtml#page/2"><code class="inline">Ash.Query.page/2</code></a> on it.</p><p>This can be leveraged by extensions to provide arbitrarily nested pagination, or it can be used directly in code to split data processing when dealing with relationship with a high cardinality.</p><blockquote><h2 id="pagination-defaults-for-custom-read-actions">Pagination Defaults for Custom Read Actions</h2><p>When you define a custom <code class="inline">read</code> action (instead of using the default generated by <code class="inline">defaults [:read]</code>), <strong>pagination is not enabled by default</strong>. This means features like streaming, offset, or keyset pagination will not work unless you explicitly configure them.</p><p>To enable both offset and keyset pagination (matching the default behavior), add:</p><pre><code class="makeup elixir" translate="no"><span class="n">read</span><span class="w"> </span><span class="ss">:read</span><span class="w"> </span><span class="k" data-group-id="4566515951-1">do</span><span class="w">
  </span><span class="n">primary?</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="n">pagination</span><span class="w"> </span><span class="n">required?</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="n">offset?</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="n">keyset?</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="k" data-group-id="4566515951-1">end</span></code></pre><p>If you omit this, you may see errors like:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Invalid</span><span class="w"> </span><span class="nc">Error</span><span class="w">
</span><span class="o">*</span><span class="w"> </span><span class="n">...</span><span class="n">read</span><span class="w"> </span><span class="n">had</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">bulk</span><span class="w"> </span><span class="n">strategy</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="o">.</span><span class="w">
</span><span class="nc">Requested</span><span class="w"> </span><span class="ss">strategies</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7680845451-1">[</span><span class="ss">:stream</span><span class="p" data-group-id="7680845451-1">]</span><span class="w">
</span><span class="n">...</span><span class="w">
</span><span class="nc">Action</span><span class="w"> </span><span class="n">...</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">streaming</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p" data-group-id="7680845451-2">[</span><span class="ss">:keyset</span><span class="p" data-group-id="7680845451-2">]</span><span class="o">.</span></code></pre><p>See the <a href="pagination.xhtml">pagination guide</a> for more details.</p></blockquote><h2 id="pagination-example">Pagination example</h2><p>Modify the setup block and configure the log level to <code class="inline">:debug</code> to see logs from the ETS data layer.</p><!-- livebook:{"force_markdown":true} --><pre><code class="makeup elixir" translate="no"><span class="nc">Logger</span><span class="o">.</span><span class="n">configure</span><span class="p" data-group-id="9386991501-1">(</span><span class="ss">level</span><span class="p">:</span><span class="w"> </span><span class="ss">:debug</span><span class="p" data-group-id="9386991501-1">)</span></code></pre><h3 id="define-some-resources-for-our-purpose">Define some resources for our purpose</h3><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Post</span><span class="w"> </span><span class="k" data-group-id="1396309578-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.DataLayer.Ets</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="1396309578-2">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="p" data-group-id="1396309578-3">(</span><span class="ss">:id</span><span class="p" data-group-id="1396309578-3">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="1396309578-4">(</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1396309578-4">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="1396309578-5">(</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1396309578-5">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-2">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="1396309578-6">do</span><span class="w">
    </span><span class="n">defaults</span><span class="p" data-group-id="1396309578-7">(</span><span class="ss">create</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-8">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1396309578-8">]</span><span class="p" data-group-id="1396309578-7">)</span><span class="w">

    </span><span class="n">read</span><span class="w"> </span><span class="ss">:read</span><span class="w"> </span><span class="k" data-group-id="1396309578-9">do</span><span class="w">
      </span><span class="n">primary?</span><span class="p" data-group-id="1396309578-10">(</span><span class="no">true</span><span class="p" data-group-id="1396309578-10">)</span><span class="w">
      </span><span class="n">prepare</span><span class="p" data-group-id="1396309578-11">(</span><span class="n">build</span><span class="p" data-group-id="1396309578-12">(</span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="ss">:title</span><span class="p" data-group-id="1396309578-12">)</span><span class="p" data-group-id="1396309578-11">)</span><span class="w">

      </span><span class="n">pagination</span><span class="w"> </span><span class="k" data-group-id="1396309578-13">do</span><span class="w">
        </span><span class="n">required?</span><span class="p" data-group-id="1396309578-14">(</span><span class="no">false</span><span class="p" data-group-id="1396309578-14">)</span><span class="w">
        </span><span class="n">offset?</span><span class="p" data-group-id="1396309578-15">(</span><span class="no">true</span><span class="p" data-group-id="1396309578-15">)</span><span class="w">
        </span><span class="n">keyset?</span><span class="p" data-group-id="1396309578-16">(</span><span class="no">true</span><span class="p" data-group-id="1396309578-16">)</span><span class="w">
        </span><span class="n">countable</span><span class="p" data-group-id="1396309578-17">(</span><span class="no">true</span><span class="p" data-group-id="1396309578-17">)</span><span class="w">
      </span><span class="k" data-group-id="1396309578-13">end</span><span class="w">
    </span><span class="k" data-group-id="1396309578-9">end</span><span class="w">

    </span><span class="n">read</span><span class="w"> </span><span class="ss">:keyset</span><span class="w"> </span><span class="k" data-group-id="1396309578-18">do</span><span class="w">
      </span><span class="n">prepare</span><span class="p" data-group-id="1396309578-19">(</span><span class="n">build</span><span class="p" data-group-id="1396309578-20">(</span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="ss">:title</span><span class="p" data-group-id="1396309578-20">)</span><span class="p" data-group-id="1396309578-19">)</span><span class="w">
      </span><span class="n">pagination</span><span class="p" data-group-id="1396309578-21">(</span><span class="ss">keyset?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="1396309578-21">)</span><span class="w">
    </span><span class="k" data-group-id="1396309578-18">end</span><span class="w">

    </span><span class="n">update</span><span class="w"> </span><span class="ss">:add_comment</span><span class="w"> </span><span class="k" data-group-id="1396309578-22">do</span><span class="w">
      </span><span class="n">require_atomic?</span><span class="p" data-group-id="1396309578-23">(</span><span class="no">false</span><span class="p" data-group-id="1396309578-23">)</span><span class="w">
      </span><span class="n">argument</span><span class="p" data-group-id="1396309578-24">(</span><span class="ss">:comment</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1396309578-24">)</span><span class="w">
      </span><span class="n">change</span><span class="p" data-group-id="1396309578-25">(</span><span class="n">manage_relationship</span><span class="p" data-group-id="1396309578-26">(</span><span class="ss">:comment</span><span class="p">,</span><span class="w"> </span><span class="ss">:comments</span><span class="p">,</span><span class="w"> </span><span class="ss">value_is_key</span><span class="p">:</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:create</span><span class="p" data-group-id="1396309578-26">)</span><span class="p" data-group-id="1396309578-25">)</span><span class="w">
    </span><span class="k" data-group-id="1396309578-22">end</span><span class="w">
  </span><span class="k" data-group-id="1396309578-6">end</span><span class="w">

  </span><span class="n">relationships</span><span class="w"> </span><span class="k" data-group-id="1396309578-27">do</span><span class="w">
    </span><span class="n">has_many</span><span class="p" data-group-id="1396309578-28">(</span><span class="ss">:comments</span><span class="p">,</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-29">[</span><span class="ss">:created_at</span><span class="p" data-group-id="1396309578-29">]</span><span class="p" data-group-id="1396309578-28">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-27">end</span><span class="w">
</span><span class="k" data-group-id="1396309578-1">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Comment</span><span class="w"> </span><span class="k" data-group-id="1396309578-30">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.DataLayer.Ets</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="1396309578-31">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="p" data-group-id="1396309578-32">(</span><span class="ss">:id</span><span class="p" data-group-id="1396309578-32">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="1396309578-33">(</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1396309578-33">)</span><span class="w">
    </span><span class="n">create_timestamp</span><span class="p" data-group-id="1396309578-34">(</span><span class="ss">:created_at</span><span class="p" data-group-id="1396309578-34">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-31">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="1396309578-35">do</span><span class="w">
    </span><span class="n">defaults</span><span class="p" data-group-id="1396309578-36">(</span><span class="p" data-group-id="1396309578-37">[</span><span class="ss">:read</span><span class="p">,</span><span class="w"> </span><span class="ss">create</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-38">[</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="1396309578-38">]</span><span class="p">,</span><span class="w"> </span><span class="ss">update</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-39">[</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="1396309578-39">]</span><span class="p" data-group-id="1396309578-37">]</span><span class="p" data-group-id="1396309578-36">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-35">end</span><span class="w">

  </span><span class="n">relationships</span><span class="w"> </span><span class="k" data-group-id="1396309578-40">do</span><span class="w">
    </span><span class="n">belongs_to</span><span class="p" data-group-id="1396309578-41">(</span><span class="ss">:post</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-42">[</span><span class="ss">:created_at</span><span class="p" data-group-id="1396309578-42">]</span><span class="p" data-group-id="1396309578-41">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-40">end</span><span class="w">
</span><span class="k" data-group-id="1396309578-30">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Domain</span><span class="w"> </span><span class="k" data-group-id="1396309578-43">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">validate_config_inclusion?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

  </span><span class="n">resources</span><span class="w"> </span><span class="k" data-group-id="1396309578-44">do</span><span class="w">
    </span><span class="n">resource</span><span class="w"> </span><span class="nc">Post</span><span class="w"> </span><span class="k" data-group-id="1396309578-45">do</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="1396309578-46">(</span><span class="ss">:list_posts</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:read</span><span class="p" data-group-id="1396309578-46">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="1396309578-47">(</span><span class="ss">:list_posts_with_keyset</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:keyset</span><span class="p" data-group-id="1396309578-47">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="1396309578-48">(</span><span class="ss">:create_post</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:create</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-49">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1396309578-49">]</span><span class="p" data-group-id="1396309578-48">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="1396309578-50">(</span><span class="ss">:add_comment_to_post</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:add_comment</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1396309578-51">[</span><span class="ss">:comment</span><span class="p" data-group-id="1396309578-51">]</span><span class="p" data-group-id="1396309578-50">)</span><span class="w">
    </span><span class="k" data-group-id="1396309578-45">end</span><span class="w">

    </span><span class="n">resource</span><span class="p" data-group-id="1396309578-52">(</span><span class="nc">Comment</span><span class="p" data-group-id="1396309578-52">)</span><span class="w">
  </span><span class="k" data-group-id="1396309578-44">end</span><span class="w">
</span><span class="k" data-group-id="1396309578-43">end</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="8314359310-1">{</span><span class="ss">:module</span><span class="p">,</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8314359310-2">&lt;&lt;</span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">79</span><span class="p">,</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="8314359310-2">&gt;&gt;</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="8314359310-3">[</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Resource</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Options</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl</span><span class="p">,</span><span class="w">
   </span><span class="p" data-group-id="8314359310-4">%{</span><span class="ss">opts</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8314359310-5">[</span><span class="p" data-group-id="8314359310-5">]</span><span class="p">,</span><span class="w"> </span><span class="ss">entities</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8314359310-6">[</span><span class="n">...</span><span class="p" data-group-id="8314359310-6">]</span><span class="p" data-group-id="8314359310-4">}</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Options</span><span class="p">,</span><span class="w">
   </span><span class="n">...</span><span class="w">
 </span><span class="p" data-group-id="8314359310-3">]</span><span class="p" data-group-id="8314359310-1">}</span></code></pre><h3 id="create-5-posts-with-5-comments-each">Create 5 posts with 5 comments each</h3><pre><code class="makeup elixir" translate="no"><span class="k">for</span><span class="w"> </span><span class="n">post_idx</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="w"> </span><span class="k" data-group-id="2381449229-1">do</span><span class="w">
  </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">create_post!</span><span class="p" data-group-id="2381449229-2">(</span><span class="s">&quot;post </span><span class="si" data-group-id="2381449229-3">#{</span><span class="n">post_idx</span><span class="si" data-group-id="2381449229-3">}</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text </span><span class="si" data-group-id="2381449229-4">#{</span><span class="n">post_idx</span><span class="si" data-group-id="2381449229-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="2381449229-2">)</span><span class="w">

  </span><span class="k">for</span><span class="w"> </span><span class="n">comment_idx</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="w"> </span><span class="k" data-group-id="2381449229-5">do</span><span class="w">
    </span><span class="nc">Domain</span><span class="o">.</span><span class="n">add_comment_to_post!</span><span class="p" data-group-id="2381449229-6">(</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;comment </span><span class="si" data-group-id="2381449229-7">#{</span><span class="n">comment_idx</span><span class="si" data-group-id="2381449229-7">}</span><span class="s">&quot;</span><span class="p" data-group-id="2381449229-6">)</span><span class="w">
  </span><span class="k" data-group-id="2381449229-5">end</span><span class="w">
</span><span class="k" data-group-id="2381449229-1">end</span><span class="w">

</span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="2381449229-8">(</span><span class="ss">load</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="2381449229-8">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="5211522425-1">[</span><span class="w">
  </span><span class="p" data-group-id="5211522425-2">#</span><span class="nc" data-group-id="5211522425-2">Post</span><span class="p" data-group-id="5211522425-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-3">[</span><span class="w">
      </span><span class="p" data-group-id="5211522425-4">#</span><span class="nc" data-group-id="5211522425-4">Comment</span><span class="p" data-group-id="5211522425-4">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-5">#</span><span class="nc" data-group-id="5211522425-5">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-5">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-5">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-6">#</span><span class="nc" data-group-id="5211522425-6">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-6">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-6">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6cdea87b-cb69-4dc5-9ff3-54fb46bd70b0&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.013913Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-7">%{</span><span class="p" data-group-id="5211522425-7">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-8">%{</span><span class="p" data-group-id="5211522425-8">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-9">#</span><span class="nc" data-group-id="5211522425-9">Comment</span><span class="p" data-group-id="5211522425-9">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-10">#</span><span class="nc" data-group-id="5211522425-10">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-10">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-10">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-11">#</span><span class="nc" data-group-id="5211522425-11">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-11">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-11">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c653e92c-fe2f-4011-84c8-ace28ebbb207&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.021204Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-12">%{</span><span class="p" data-group-id="5211522425-12">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-13">%{</span><span class="p" data-group-id="5211522425-13">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-14">#</span><span class="nc" data-group-id="5211522425-14">Comment</span><span class="p" data-group-id="5211522425-14">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-15">#</span><span class="nc" data-group-id="5211522425-15">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-15">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-15">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-16">#</span><span class="nc" data-group-id="5211522425-16">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-16">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-16">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aa207735-0a02-4b51-b5f6-69564a2a6365&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.022890Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-17">%{</span><span class="p" data-group-id="5211522425-17">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-18">%{</span><span class="p" data-group-id="5211522425-18">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-14">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-19">#</span><span class="nc" data-group-id="5211522425-19">Comment</span><span class="p" data-group-id="5211522425-19">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-20">#</span><span class="nc" data-group-id="5211522425-20">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-20">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-20">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-21">#</span><span class="nc" data-group-id="5211522425-21">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-21">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-21">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;09f9cdfe-5a88-4f6a-a8d9-2f8aa312efb8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.024526Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-22">%{</span><span class="p" data-group-id="5211522425-22">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-23">%{</span><span class="p" data-group-id="5211522425-23">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-19">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-24">#</span><span class="nc" data-group-id="5211522425-24">Comment</span><span class="p" data-group-id="5211522425-24">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-25">#</span><span class="nc" data-group-id="5211522425-25">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-25">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-25">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-26">#</span><span class="nc" data-group-id="5211522425-26">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-26">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-26">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9b92edf4-e79e-4870-9dd0-9130863a9715&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.026132Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-27">%{</span><span class="p" data-group-id="5211522425-27">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-28">%{</span><span class="p" data-group-id="5211522425-28">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-24">&gt;</span><span class="w">
    </span><span class="p" data-group-id="5211522425-3">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-29">#</span><span class="nc" data-group-id="5211522425-29">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-29">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-29">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-30">%{</span><span class="p" data-group-id="5211522425-30">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-31">%{</span><span class="p" data-group-id="5211522425-31">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="5211522425-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5211522425-32">#</span><span class="nc" data-group-id="5211522425-32">Post</span><span class="p" data-group-id="5211522425-32">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-33">[</span><span class="w">
      </span><span class="p" data-group-id="5211522425-34">#</span><span class="nc" data-group-id="5211522425-34">Comment</span><span class="p" data-group-id="5211522425-34">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-35">#</span><span class="nc" data-group-id="5211522425-35">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-35">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-35">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-36">#</span><span class="nc" data-group-id="5211522425-36">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-36">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-36">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9a87a3a0-6930-4920-9345-8227b861c2ed&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.028515Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-37">%{</span><span class="p" data-group-id="5211522425-37">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-38">%{</span><span class="p" data-group-id="5211522425-38">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-34">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-39">#</span><span class="nc" data-group-id="5211522425-39">Comment</span><span class="p" data-group-id="5211522425-39">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-40">#</span><span class="nc" data-group-id="5211522425-40">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-40">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-40">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-41">#</span><span class="nc" data-group-id="5211522425-41">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-41">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-41">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a5107151-5519-4925-ab73-aef75274cd4a&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.030176Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-42">%{</span><span class="p" data-group-id="5211522425-42">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-43">%{</span><span class="p" data-group-id="5211522425-43">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-39">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-44">#</span><span class="nc" data-group-id="5211522425-44">Comment</span><span class="p" data-group-id="5211522425-44">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-45">#</span><span class="nc" data-group-id="5211522425-45">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-45">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-45">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-46">#</span><span class="nc" data-group-id="5211522425-46">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-46">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-46">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0d7e9835-25a0-4df9-bb41-06aa964dc677&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.031780Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-47">%{</span><span class="p" data-group-id="5211522425-47">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-48">%{</span><span class="p" data-group-id="5211522425-48">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-44">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-49">#</span><span class="nc" data-group-id="5211522425-49">Comment</span><span class="p" data-group-id="5211522425-49">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-50">#</span><span class="nc" data-group-id="5211522425-50">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-50">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-50">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-51">#</span><span class="nc" data-group-id="5211522425-51">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-51">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-51">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7c6663a8-6a36-4c9a-a947-a70436add8be&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.033389Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-52">%{</span><span class="p" data-group-id="5211522425-52">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-53">%{</span><span class="p" data-group-id="5211522425-53">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-49">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-54">#</span><span class="nc" data-group-id="5211522425-54">Comment</span><span class="p" data-group-id="5211522425-54">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-55">#</span><span class="nc" data-group-id="5211522425-55">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-55">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-55">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-56">#</span><span class="nc" data-group-id="5211522425-56">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-56">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-56">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4a54ee7f-18fe-401b-9a86-7c768bc52a1d&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.034976Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-57">%{</span><span class="p" data-group-id="5211522425-57">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-58">%{</span><span class="p" data-group-id="5211522425-58">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-54">&gt;</span><span class="w">
    </span><span class="p" data-group-id="5211522425-33">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-59">#</span><span class="nc" data-group-id="5211522425-59">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-59">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-59">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-60">%{</span><span class="p" data-group-id="5211522425-60">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-61">%{</span><span class="p" data-group-id="5211522425-61">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="5211522425-32">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5211522425-62">#</span><span class="nc" data-group-id="5211522425-62">Post</span><span class="p" data-group-id="5211522425-62">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-63">[</span><span class="w">
      </span><span class="p" data-group-id="5211522425-64">#</span><span class="nc" data-group-id="5211522425-64">Comment</span><span class="p" data-group-id="5211522425-64">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-65">#</span><span class="nc" data-group-id="5211522425-65">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-65">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-65">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-66">#</span><span class="nc" data-group-id="5211522425-66">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-66">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-66">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9d01f179-4220-4796-bb7d-63527385e36b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.037470Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-67">%{</span><span class="p" data-group-id="5211522425-67">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-68">%{</span><span class="p" data-group-id="5211522425-68">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-64">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-69">#</span><span class="nc" data-group-id="5211522425-69">Comment</span><span class="p" data-group-id="5211522425-69">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-70">#</span><span class="nc" data-group-id="5211522425-70">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-70">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-70">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-71">#</span><span class="nc" data-group-id="5211522425-71">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-71">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-71">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;49b7a671-bc6f-4772-b8f8-73b2a4c75b34&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.039117Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-72">%{</span><span class="p" data-group-id="5211522425-72">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-73">%{</span><span class="p" data-group-id="5211522425-73">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-69">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-74">#</span><span class="nc" data-group-id="5211522425-74">Comment</span><span class="p" data-group-id="5211522425-74">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-75">#</span><span class="nc" data-group-id="5211522425-75">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-75">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-75">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-76">#</span><span class="nc" data-group-id="5211522425-76">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-76">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-76">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7d2ee81c-696f-4190-8d1a-45702bfaaef2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.040795Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-77">%{</span><span class="p" data-group-id="5211522425-77">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-78">%{</span><span class="p" data-group-id="5211522425-78">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-74">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-79">#</span><span class="nc" data-group-id="5211522425-79">Comment</span><span class="p" data-group-id="5211522425-79">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-80">#</span><span class="nc" data-group-id="5211522425-80">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-80">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-80">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-81">#</span><span class="nc" data-group-id="5211522425-81">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-81">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-81">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;98d80b57-b911-44f5-9a63-5db90c1a0d57&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.042457Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-82">%{</span><span class="p" data-group-id="5211522425-82">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-83">%{</span><span class="p" data-group-id="5211522425-83">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-79">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-84">#</span><span class="nc" data-group-id="5211522425-84">Comment</span><span class="p" data-group-id="5211522425-84">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-85">#</span><span class="nc" data-group-id="5211522425-85">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-85">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-85">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-86">#</span><span class="nc" data-group-id="5211522425-86">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-86">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-86">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a0f08863-ec7f-4eba-b9f5-f9d7764dc934&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.044061Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-87">%{</span><span class="p" data-group-id="5211522425-87">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-88">%{</span><span class="p" data-group-id="5211522425-88">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-84">&gt;</span><span class="w">
    </span><span class="p" data-group-id="5211522425-63">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-89">#</span><span class="nc" data-group-id="5211522425-89">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-89">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-89">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-90">%{</span><span class="p" data-group-id="5211522425-90">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-91">%{</span><span class="p" data-group-id="5211522425-91">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="5211522425-62">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5211522425-92">#</span><span class="nc" data-group-id="5211522425-92">Post</span><span class="p" data-group-id="5211522425-92">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-93">[</span><span class="w">
      </span><span class="p" data-group-id="5211522425-94">#</span><span class="nc" data-group-id="5211522425-94">Comment</span><span class="p" data-group-id="5211522425-94">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-95">#</span><span class="nc" data-group-id="5211522425-95">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-95">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-95">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-96">#</span><span class="nc" data-group-id="5211522425-96">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-96">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-96">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2a57aa5f-0431-4d7b-a054-3bf0fc6cb2e8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.046395Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-97">%{</span><span class="p" data-group-id="5211522425-97">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-98">%{</span><span class="p" data-group-id="5211522425-98">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-94">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-99">#</span><span class="nc" data-group-id="5211522425-99">Comment</span><span class="p" data-group-id="5211522425-99">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-100">#</span><span class="nc" data-group-id="5211522425-100">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-100">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-100">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-101">#</span><span class="nc" data-group-id="5211522425-101">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-101">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-101">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1604094f-864e-4df3-9365-a16a77ace0ba&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.048111Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-102">%{</span><span class="p" data-group-id="5211522425-102">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-103">%{</span><span class="p" data-group-id="5211522425-103">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-99">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-104">#</span><span class="nc" data-group-id="5211522425-104">Comment</span><span class="p" data-group-id="5211522425-104">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-105">#</span><span class="nc" data-group-id="5211522425-105">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-105">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-105">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-106">#</span><span class="nc" data-group-id="5211522425-106">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-106">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-106">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6153ecb4-4668-4afb-94c8-b1e57ed1a187&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.049749Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-107">%{</span><span class="p" data-group-id="5211522425-107">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-108">%{</span><span class="p" data-group-id="5211522425-108">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-104">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-109">#</span><span class="nc" data-group-id="5211522425-109">Comment</span><span class="p" data-group-id="5211522425-109">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-110">#</span><span class="nc" data-group-id="5211522425-110">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-110">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-110">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-111">#</span><span class="nc" data-group-id="5211522425-111">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-111">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-111">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0844db43-39f7-41c3-aa74-41238b0882c9&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.051385Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-112">%{</span><span class="p" data-group-id="5211522425-112">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-113">%{</span><span class="p" data-group-id="5211522425-113">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-109">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-114">#</span><span class="nc" data-group-id="5211522425-114">Comment</span><span class="p" data-group-id="5211522425-114">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-115">#</span><span class="nc" data-group-id="5211522425-115">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-115">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-115">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-116">#</span><span class="nc" data-group-id="5211522425-116">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-116">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-116">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b22db803-cad0-4d90-ada1-944f0abdd304&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.053563Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-117">%{</span><span class="p" data-group-id="5211522425-117">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-118">%{</span><span class="p" data-group-id="5211522425-118">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-114">&gt;</span><span class="w">
    </span><span class="p" data-group-id="5211522425-93">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-119">#</span><span class="nc" data-group-id="5211522425-119">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-119">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-119">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-120">%{</span><span class="p" data-group-id="5211522425-120">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-121">%{</span><span class="p" data-group-id="5211522425-121">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="5211522425-92">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5211522425-122">#</span><span class="nc" data-group-id="5211522425-122">Post</span><span class="p" data-group-id="5211522425-122">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-123">[</span><span class="w">
      </span><span class="p" data-group-id="5211522425-124">#</span><span class="nc" data-group-id="5211522425-124">Comment</span><span class="p" data-group-id="5211522425-124">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-125">#</span><span class="nc" data-group-id="5211522425-125">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-125">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-125">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-126">#</span><span class="nc" data-group-id="5211522425-126">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-126">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-126">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7b5fc51b-8e68-441e-bcd0-e52a0158e779&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.056055Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-127">%{</span><span class="p" data-group-id="5211522425-127">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-128">%{</span><span class="p" data-group-id="5211522425-128">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-124">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-129">#</span><span class="nc" data-group-id="5211522425-129">Comment</span><span class="p" data-group-id="5211522425-129">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-130">#</span><span class="nc" data-group-id="5211522425-130">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-130">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-130">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-131">#</span><span class="nc" data-group-id="5211522425-131">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-131">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-131">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;e3f01413-c79c-44ef-abd9-6cb27a3b31fc&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.057708Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-132">%{</span><span class="p" data-group-id="5211522425-132">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-133">%{</span><span class="p" data-group-id="5211522425-133">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-129">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-134">#</span><span class="nc" data-group-id="5211522425-134">Comment</span><span class="p" data-group-id="5211522425-134">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-135">#</span><span class="nc" data-group-id="5211522425-135">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-135">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-135">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-136">#</span><span class="nc" data-group-id="5211522425-136">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-136">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-136">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a461c559-5036-4113-93be-3f531af4d2f3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.059418Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-137">%{</span><span class="p" data-group-id="5211522425-137">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-138">%{</span><span class="p" data-group-id="5211522425-138">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-134">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-139">#</span><span class="nc" data-group-id="5211522425-139">Comment</span><span class="p" data-group-id="5211522425-139">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-140">#</span><span class="nc" data-group-id="5211522425-140">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-140">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-140">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-141">#</span><span class="nc" data-group-id="5211522425-141">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-141">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-141">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a704a781-3ff2-479c-b428-d8a414223f00&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.061034Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-142">%{</span><span class="p" data-group-id="5211522425-142">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-143">%{</span><span class="p" data-group-id="5211522425-143">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-139">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="5211522425-144">#</span><span class="nc" data-group-id="5211522425-144">Comment</span><span class="p" data-group-id="5211522425-144">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-145">#</span><span class="nc" data-group-id="5211522425-145">Ash.NotLoaded</span><span class="p" data-group-id="5211522425-145">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="5211522425-145">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-146">#</span><span class="nc" data-group-id="5211522425-146">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-146">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-146">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2d9e9279-ef21-4dd4-bdc6-adc3597fefb2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.062631Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-147">%{</span><span class="p" data-group-id="5211522425-147">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-148">%{</span><span class="p" data-group-id="5211522425-148">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="5211522425-144">&gt;</span><span class="w">
    </span><span class="p" data-group-id="5211522425-123">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-149">#</span><span class="nc" data-group-id="5211522425-149">Ecto.Schema.Metadata</span><span class="p" data-group-id="5211522425-149">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5211522425-149">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 5&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 5&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-150">%{</span><span class="p" data-group-id="5211522425-150">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5211522425-151">%{</span><span class="p" data-group-id="5211522425-151">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="5211522425-122">&gt;</span><span class="w">
</span><span class="p" data-group-id="5211522425-1">]</span></code></pre><h2 id="offset-pagination-1">Offset pagination</h2><p>When using offset pagination, a <code class="inline">%Ash.Page.Offset{}</code> struct is returned from read actions.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="2091621295-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2091621295-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="2091621295-2">]</span><span class="p" data-group-id="2091621295-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="8896032454-1">%</span><span class="nc" data-group-id="8896032454-1">Ash.Page.Offset</span><span class="p" data-group-id="8896032454-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-2">[</span><span class="w">
    </span><span class="p" data-group-id="8896032454-3">#</span><span class="nc" data-group-id="8896032454-3">Post</span><span class="p" data-group-id="8896032454-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-4">#</span><span class="nc" data-group-id="8896032454-4">Ash.NotLoaded</span><span class="p" data-group-id="8896032454-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="8896032454-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-5">#</span><span class="nc" data-group-id="8896032454-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="8896032454-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="8896032454-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-6">%{</span><span class="p" data-group-id="8896032454-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-7">%{</span><span class="p" data-group-id="8896032454-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="8896032454-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="8896032454-8">#</span><span class="nc" data-group-id="8896032454-8">Post</span><span class="p" data-group-id="8896032454-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-9">#</span><span class="nc" data-group-id="8896032454-9">Ash.NotLoaded</span><span class="p" data-group-id="8896032454-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="8896032454-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-10">#</span><span class="nc" data-group-id="8896032454-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="8896032454-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="8896032454-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-11">%{</span><span class="p" data-group-id="8896032454-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-12">%{</span><span class="p" data-group-id="8896032454-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="8896032454-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="8896032454-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-13">{</span><span class="p" data-group-id="8896032454-14">#</span><span class="nc" data-group-id="8896032454-14">Ash.Query</span><span class="p" data-group-id="8896032454-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="8896032454-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="8896032454-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8896032454-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8896032454-17">]</span><span class="w">
   </span><span class="p" data-group-id="8896032454-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8896032454-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="8896032454-18">]</span><span class="p" data-group-id="8896032454-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="8896032454-1">}</span></code></pre><p>You can find the results in the <code class="inline">results</code> field of the page</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">results</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="9293173252-1">[</span><span class="w">
  </span><span class="p" data-group-id="9293173252-2">#</span><span class="nc" data-group-id="9293173252-2">Post</span><span class="p" data-group-id="9293173252-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-3">#</span><span class="nc" data-group-id="9293173252-3">Ash.NotLoaded</span><span class="p" data-group-id="9293173252-3">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="9293173252-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-4">#</span><span class="nc" data-group-id="9293173252-4">Ecto.Schema.Metadata</span><span class="p" data-group-id="9293173252-4">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="9293173252-4">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-5">%{</span><span class="p" data-group-id="9293173252-5">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-6">%{</span><span class="p" data-group-id="9293173252-6">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="9293173252-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="9293173252-7">#</span><span class="nc" data-group-id="9293173252-7">Post</span><span class="p" data-group-id="9293173252-7">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-8">#</span><span class="nc" data-group-id="9293173252-8">Ash.NotLoaded</span><span class="p" data-group-id="9293173252-8">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="9293173252-8">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-9">#</span><span class="nc" data-group-id="9293173252-9">Ecto.Schema.Metadata</span><span class="p" data-group-id="9293173252-9">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="9293173252-9">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-10">%{</span><span class="p" data-group-id="9293173252-10">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9293173252-11">%{</span><span class="p" data-group-id="9293173252-11">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="9293173252-7">&gt;</span><span class="w">
</span><span class="p" data-group-id="9293173252-1">]</span></code></pre><p>The <code class="inline">more?</code> field contains a boolean indicating if there are more pages available</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">true</span></code></pre><h3 id="retrieving-the-next-page">Retrieving the next page</h3><p>You can calculate the next offset with the information available in the page and pass it in the page options to retrieve the following page</p><pre><code class="makeup elixir" translate="no"><span class="n">next_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="n">offset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="n">limit</span><span class="w">
</span><span class="n">second_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="9977182811-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9977182811-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="n">next_offset</span><span class="p" data-group-id="9977182811-2">]</span><span class="p" data-group-id="9977182811-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1464804196-1">%</span><span class="nc" data-group-id="1464804196-1">Ash.Page.Offset</span><span class="p" data-group-id="1464804196-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-2">[</span><span class="w">
    </span><span class="p" data-group-id="1464804196-3">#</span><span class="nc" data-group-id="1464804196-3">Post</span><span class="p" data-group-id="1464804196-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-4">#</span><span class="nc" data-group-id="1464804196-4">Ash.NotLoaded</span><span class="p" data-group-id="1464804196-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1464804196-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-5">#</span><span class="nc" data-group-id="1464804196-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="1464804196-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1464804196-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-6">%{</span><span class="p" data-group-id="1464804196-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-7">%{</span><span class="p" data-group-id="1464804196-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1464804196-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="1464804196-8">#</span><span class="nc" data-group-id="1464804196-8">Post</span><span class="p" data-group-id="1464804196-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-9">#</span><span class="nc" data-group-id="1464804196-9">Ash.NotLoaded</span><span class="p" data-group-id="1464804196-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1464804196-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-10">#</span><span class="nc" data-group-id="1464804196-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="1464804196-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1464804196-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-11">%{</span><span class="p" data-group-id="1464804196-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-12">%{</span><span class="p" data-group-id="1464804196-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1464804196-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="1464804196-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-13">{</span><span class="p" data-group-id="1464804196-14">#</span><span class="nc" data-group-id="1464804196-14">Ash.Query</span><span class="p" data-group-id="1464804196-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1464804196-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1464804196-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1464804196-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1464804196-17">]</span><span class="w">
   </span><span class="p" data-group-id="1464804196-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1464804196-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1464804196-18">]</span><span class="p" data-group-id="1464804196-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="1464804196-1">}</span></code></pre><p>If you have the current page in memory, you can also use <a href="Ash.xhtml#page!/2"><code class="inline">Ash.page!/2</code></a> to navigate between pages.</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="6606057060-1">(</span><span class="n">second_page</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="6606057060-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="3689507307-1">%</span><span class="nc" data-group-id="3689507307-1">Ash.Page.Offset</span><span class="p" data-group-id="3689507307-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-2">[</span><span class="w">
    </span><span class="p" data-group-id="3689507307-3">#</span><span class="nc" data-group-id="3689507307-3">Post</span><span class="p" data-group-id="3689507307-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-4">#</span><span class="nc" data-group-id="3689507307-4">Ash.NotLoaded</span><span class="p" data-group-id="3689507307-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="3689507307-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-5">#</span><span class="nc" data-group-id="3689507307-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="3689507307-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="3689507307-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 5&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 5&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-6">%{</span><span class="p" data-group-id="3689507307-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-7">%{</span><span class="p" data-group-id="3689507307-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="3689507307-3">&gt;</span><span class="w">
  </span><span class="p" data-group-id="3689507307-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-8">{</span><span class="p" data-group-id="3689507307-9">#</span><span class="nc" data-group-id="3689507307-9">Ash.Query</span><span class="p" data-group-id="3689507307-9">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-10">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="3689507307-10">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-11">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="3689507307-11">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3689507307-12">[</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3689507307-12">]</span><span class="w">
   </span><span class="p" data-group-id="3689507307-9">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3689507307-13">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3689507307-13">]</span><span class="p" data-group-id="3689507307-8">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="p" data-group-id="3689507307-1">}</span></code></pre><p>And since we had 5 posts, this should be the last page:</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">false</span></code></pre><h3 id="keyset-pagination-1">Keyset pagination</h3><p>When using keyset pagination, a <code class="inline">%Ash.Page.Keyset{}</code> struct is returned from read actions.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts_with_keyset!</span><span class="p" data-group-id="6920914128-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6920914128-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6920914128-2">]</span><span class="p" data-group-id="6920914128-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4447288425-1">%</span><span class="nc" data-group-id="4447288425-1">Ash.Page.Keyset</span><span class="p" data-group-id="4447288425-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-2">[</span><span class="w">
    </span><span class="p" data-group-id="4447288425-3">#</span><span class="nc" data-group-id="4447288425-3">Post</span><span class="p" data-group-id="4447288425-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-4">#</span><span class="nc" data-group-id="4447288425-4">Ash.NotLoaded</span><span class="p" data-group-id="4447288425-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4447288425-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-5">#</span><span class="nc" data-group-id="4447288425-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="4447288425-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4447288425-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-6">%{</span><span class="p" data-group-id="4447288425-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-7">%{</span><span class="p" data-group-id="4447288425-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="4447288425-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4447288425-8">#</span><span class="nc" data-group-id="4447288425-8">Post</span><span class="p" data-group-id="4447288425-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-9">#</span><span class="nc" data-group-id="4447288425-9">Ash.NotLoaded</span><span class="p" data-group-id="4447288425-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4447288425-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-10">#</span><span class="nc" data-group-id="4447288425-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="4447288425-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4447288425-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-11">%{</span><span class="p" data-group-id="4447288425-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-12">%{</span><span class="p" data-group-id="4447288425-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="4447288425-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="4447288425-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-13">{</span><span class="p" data-group-id="4447288425-14">#</span><span class="nc" data-group-id="4447288425-14">Ash.Query</span><span class="p" data-group-id="4447288425-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4447288425-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="4447288425-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4447288425-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4447288425-17">]</span><span class="w">
   </span><span class="p" data-group-id="4447288425-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4447288425-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4447288425-18">]</span><span class="p" data-group-id="4447288425-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="4447288425-1">}</span></code></pre><p><code class="inline">results</code> and <code class="inline">more?</code> work in the same way as offset pagination</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">results</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4978455145-1">[</span><span class="w">
  </span><span class="p" data-group-id="4978455145-2">#</span><span class="nc" data-group-id="4978455145-2">Post</span><span class="p" data-group-id="4978455145-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-3">#</span><span class="nc" data-group-id="4978455145-3">Ash.NotLoaded</span><span class="p" data-group-id="4978455145-3">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4978455145-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-4">#</span><span class="nc" data-group-id="4978455145-4">Ecto.Schema.Metadata</span><span class="p" data-group-id="4978455145-4">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4978455145-4">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-5">%{</span><span class="p" data-group-id="4978455145-5">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-6">%{</span><span class="p" data-group-id="4978455145-6">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4978455145-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4978455145-7">#</span><span class="nc" data-group-id="4978455145-7">Post</span><span class="p" data-group-id="4978455145-7">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-8">#</span><span class="nc" data-group-id="4978455145-8">Ash.NotLoaded</span><span class="p" data-group-id="4978455145-8">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4978455145-8">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-9">#</span><span class="nc" data-group-id="4978455145-9">Ecto.Schema.Metadata</span><span class="p" data-group-id="4978455145-9">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4978455145-9">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-10">%{</span><span class="p" data-group-id="4978455145-10">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4978455145-11">%{</span><span class="p" data-group-id="4978455145-11">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4978455145-7">&gt;</span><span class="w">
</span><span class="p" data-group-id="4978455145-1">]</span></code></pre><h3 id="retrieving-the-next-page-1">Retrieving the next page</h3><p>To retrieve the next page, you have to pass the keyset of the last record in the current page. The keyset is stored in <code class="inline">record.__metadata__.keyset</code>.</p><pre><code class="makeup elixir" translate="no"><span class="n">last_keyset</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="n">page</span><span class="o">.</span><span class="n">results</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">last</span><span class="p" data-group-id="0151521608-1">(</span><span class="p" data-group-id="0151521608-1">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="0151521608-2">(</span><span class="ss">:__metadata__</span><span class="p" data-group-id="0151521608-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="0151521608-3">(</span><span class="ss">:keyset</span><span class="p" data-group-id="0151521608-3">)</span><span class="w">

</span><span class="n">second_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts_with_keyset!</span><span class="p" data-group-id="0151521608-4">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0151521608-5">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="n">last_keyset</span><span class="p" data-group-id="0151521608-5">]</span><span class="p" data-group-id="0151521608-4">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1863263972-1">%</span><span class="nc" data-group-id="1863263972-1">Ash.Page.Keyset</span><span class="p" data-group-id="1863263972-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-2">[</span><span class="w">
    </span><span class="p" data-group-id="1863263972-3">#</span><span class="nc" data-group-id="1863263972-3">Post</span><span class="p" data-group-id="1863263972-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-4">#</span><span class="nc" data-group-id="1863263972-4">Ash.NotLoaded</span><span class="p" data-group-id="1863263972-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1863263972-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-5">#</span><span class="nc" data-group-id="1863263972-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="1863263972-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1863263972-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-6">%{</span><span class="p" data-group-id="1863263972-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-7">%{</span><span class="p" data-group-id="1863263972-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1863263972-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="1863263972-8">#</span><span class="nc" data-group-id="1863263972-8">Post</span><span class="p" data-group-id="1863263972-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-9">#</span><span class="nc" data-group-id="1863263972-9">Ash.NotLoaded</span><span class="p" data-group-id="1863263972-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1863263972-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-10">#</span><span class="nc" data-group-id="1863263972-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="1863263972-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1863263972-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-11">%{</span><span class="p" data-group-id="1863263972-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-12">%{</span><span class="p" data-group-id="1863263972-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1863263972-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="1863263972-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-13">{</span><span class="p" data-group-id="1863263972-14">#</span><span class="nc" data-group-id="1863263972-14">Ash.Query</span><span class="p" data-group-id="1863263972-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1863263972-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1863263972-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1863263972-17">[</span><span class="w">
       </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="w">
     </span><span class="p" data-group-id="1863263972-17">]</span><span class="w">
   </span><span class="p" data-group-id="1863263972-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1863263972-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1863263972-18">]</span><span class="p" data-group-id="1863263972-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="1863263972-1">}</span></code></pre><p><a href="Ash.xhtml#page!/2"><code class="inline">Ash.page!/2</code></a> works with keyset pagination too</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="4030180239-1">(</span><span class="n">second_page</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="4030180239-1">)</span><span class="w">

</span><span class="n">last_page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">false</span></code></pre><h3 id="default-pagination-behavior-when-both-types-are-supported">Default Pagination Behavior When Both Types Are Supported</h3><p>When an action supports both <code class="inline">offset</code> and <code class="inline">keyset</code> pagination (such as default read actions), Ash uses the following logic to determine which pagination type to use:</p><p><strong>1. Explicit pagination parameters take precedence:</strong></p><ul><li>If <code class="inline">after</code> or <code class="inline">before</code> is provided  keyset pagination</li><li>If <code class="inline">offset</code> is provided  offset pagination</li></ul><p><strong>2. Configuration-based default for ambiguous cases:</strong>
Ash is configured to use keyset-pagination by default when installed with <code class="inline">mix igniter.install ash</code>, or the homepage installer.</p><h4>Practical Examples</h4><p>Regardless of configuration, the records will have keyset metadata, so you can always transition between pagination types:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># By default, this uses keyset pagination</span><span class="w">
</span><span class="p" data-group-id="8199012524-1">%{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8199012524-2">[</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p" data-group-id="8199012524-2">]</span><span class="p" data-group-id="8199012524-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="8199012524-3">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8199012524-4">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8199012524-4">]</span><span class="p" data-group-id="8199012524-3">)</span><span class="w">

</span><span class="c1"># Explicitly use keyset pagination for the next page</span><span class="w">
</span><span class="nc">Ash</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="8199012524-5">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8199012524-6">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="n">last</span><span class="o">.</span><span class="c">__metadata__</span><span class="o">.</span><span class="n">keyset</span><span class="p" data-group-id="8199012524-6">]</span><span class="p" data-group-id="8199012524-5">)</span><span class="w">

</span><span class="c1"># Explicitly use offset pagination</span><span class="w">
</span><span class="nc">Ash</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="8199012524-7">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8199012524-8">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8199012524-8">]</span><span class="p" data-group-id="8199012524-7">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="6956827490-1">%</span><span class="nc" data-group-id="6956827490-1">Ash.Page.Offset</span><span class="p" data-group-id="6956827490-1">{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6956827490-2">[</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p" data-group-id="6956827490-2">]</span><span class="p" data-group-id="6956827490-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="6956827490-3">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6956827490-4">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6956827490-4">]</span><span class="p" data-group-id="6956827490-3">)</span><span class="w">

</span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="6956827490-5">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6956827490-6">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="n">last</span><span class="o">.</span><span class="c">__metadata__</span><span class="o">.</span><span class="n">keyset</span><span class="p" data-group-id="6956827490-6">]</span><span class="p" data-group-id="6956827490-5">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="2740217611-1">%</span><span class="nc" data-group-id="2740217611-1">Ash.Page.Keyset</span><span class="p" data-group-id="2740217611-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-2">[</span><span class="w">
    </span><span class="p" data-group-id="2740217611-3">#</span><span class="nc" data-group-id="2740217611-3">Post</span><span class="p" data-group-id="2740217611-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-4">#</span><span class="nc" data-group-id="2740217611-4">Ash.NotLoaded</span><span class="p" data-group-id="2740217611-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="2740217611-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-5">#</span><span class="nc" data-group-id="2740217611-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="2740217611-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="2740217611-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-6">%{</span><span class="p" data-group-id="2740217611-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-7">%{</span><span class="p" data-group-id="2740217611-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="2740217611-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2740217611-8">#</span><span class="nc" data-group-id="2740217611-8">Post</span><span class="p" data-group-id="2740217611-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-9">#</span><span class="nc" data-group-id="2740217611-9">Ash.NotLoaded</span><span class="p" data-group-id="2740217611-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="2740217611-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-10">#</span><span class="nc" data-group-id="2740217611-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="2740217611-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="2740217611-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-11">%{</span><span class="p" data-group-id="2740217611-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-12">%{</span><span class="p" data-group-id="2740217611-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="2740217611-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="2740217611-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-13">{</span><span class="p" data-group-id="2740217611-14">#</span><span class="nc" data-group-id="2740217611-14">Ash.Query</span><span class="p" data-group-id="2740217611-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="2740217611-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="2740217611-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2740217611-17">[</span><span class="w">
       </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="w">
     </span><span class="p" data-group-id="2740217611-17">]</span><span class="w">
   </span><span class="p" data-group-id="2740217611-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2740217611-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="2740217611-18">]</span><span class="p" data-group-id="2740217611-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="2740217611-1">}</span></code></pre><h3 id="retrieving-count">Retrieving count</h3><p>Both <code class="inline">%Ash.Page.Offset{}</code> and <code class="inline">%Ash.Page.Keyset{}</code> have a <code class="inline">count</code> field that contains the total count of the items that are being paginated when <code class="inline">count: true</code> is passed in the page options.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="8991340789-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8991340789-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8991340789-2">]</span><span class="p" data-group-id="8991340789-1">)</span><span class="w">

</span><span class="n">page</span><span class="o">.</span><span class="n">count</span></code></pre><pre><code class="makeup output" translate="no"><span class="mi">5</span></code></pre><h3 id="relationship-pagination-1">Relationship pagination</h3><p>To paginate a relationship, pass a query customized with the page options to the load statement. This works both on paginated and unpaginated root data, and relationships can load arbitrarily nested paginated relationships.</p><pre><code class="makeup elixir" translate="no"><span class="n">paginated_comments</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">Comment</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">page</span><span class="p" data-group-id="8705922712-1">(</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8705922712-1">)</span><span class="w">

</span><span class="n">first_post</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="8705922712-2">(</span><span class="ss">load</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8705922712-3">[</span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="n">paginated_comments</span><span class="p" data-group-id="8705922712-3">]</span><span class="p" data-group-id="8705922712-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">first</span><span class="p" data-group-id="8705922712-4">(</span><span class="p" data-group-id="8705922712-4">)</span><span class="w">

</span><span class="n">first_post</span><span class="o">.</span><span class="n">comments</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1761488898-1">%</span><span class="nc" data-group-id="1761488898-1">Ash.Page.Offset</span><span class="p" data-group-id="1761488898-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-2">[</span><span class="w">
    </span><span class="p" data-group-id="1761488898-3">#</span><span class="nc" data-group-id="1761488898-3">Comment</span><span class="p" data-group-id="1761488898-3">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-4">#</span><span class="nc" data-group-id="1761488898-4">Ash.NotLoaded</span><span class="p" data-group-id="1761488898-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="1761488898-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-5">#</span><span class="nc" data-group-id="1761488898-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="1761488898-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1761488898-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6cdea87b-cb69-4dc5-9ff3-54fb46bd70b0&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.013913Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-6">%{</span><span class="p" data-group-id="1761488898-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-7">%{</span><span class="p" data-group-id="1761488898-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1761488898-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="1761488898-8">#</span><span class="nc" data-group-id="1761488898-8">Comment</span><span class="p" data-group-id="1761488898-8">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-9">#</span><span class="nc" data-group-id="1761488898-9">Ash.NotLoaded</span><span class="p" data-group-id="1761488898-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="1761488898-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-10">#</span><span class="nc" data-group-id="1761488898-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="1761488898-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1761488898-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c653e92c-fe2f-4011-84c8-ace28ebbb207&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.021204Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-11">%{</span><span class="p" data-group-id="1761488898-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-12">%{</span><span class="p" data-group-id="1761488898-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1761488898-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="1761488898-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-13">{</span><span class="p" data-group-id="1761488898-14">#</span><span class="nc" data-group-id="1761488898-14">Ash.Query</span><span class="p" data-group-id="1761488898-14">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-15">[</span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1761488898-15">]</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-16">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1761488898-16">]</span><span class="p" data-group-id="1761488898-14">&gt;</span><span class="p">,</span><span class="w">
   </span><span class="p" data-group-id="1761488898-17">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">actor</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">tracer</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1761488898-18">[</span><span class="p" data-group-id="1761488898-18">]</span><span class="p" data-group-id="1761488898-17">]</span><span class="p" data-group-id="1761488898-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="1761488898-1">}</span></code></pre><p>You can use all the methods describe above to navigate relationship pages and retrieve their count</p><pre><code class="makeup elixir" translate="no"><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="9176386346-1">(</span><span class="n">first_post</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="9176386346-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="6868923304-1">%</span><span class="nc" data-group-id="6868923304-1">Ash.Page.Offset</span><span class="p" data-group-id="6868923304-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-2">[</span><span class="w">
    </span><span class="p" data-group-id="6868923304-3">#</span><span class="nc" data-group-id="6868923304-3">Comment</span><span class="p" data-group-id="6868923304-3">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-4">#</span><span class="nc" data-group-id="6868923304-4">Ash.NotLoaded</span><span class="p" data-group-id="6868923304-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="6868923304-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-5">#</span><span class="nc" data-group-id="6868923304-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="6868923304-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="6868923304-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aa207735-0a02-4b51-b5f6-69564a2a6365&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.022890Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-6">%{</span><span class="p" data-group-id="6868923304-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-7">%{</span><span class="p" data-group-id="6868923304-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="6868923304-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="6868923304-8">#</span><span class="nc" data-group-id="6868923304-8">Comment</span><span class="p" data-group-id="6868923304-8">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-9">#</span><span class="nc" data-group-id="6868923304-9">Ash.NotLoaded</span><span class="p" data-group-id="6868923304-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="6868923304-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-10">#</span><span class="nc" data-group-id="6868923304-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="6868923304-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="6868923304-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;09f9cdfe-5a88-4f6a-a8d9-2f8aa312efb8&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.024526Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-11">%{</span><span class="p" data-group-id="6868923304-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-12">%{</span><span class="p" data-group-id="6868923304-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="6868923304-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="6868923304-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-13">{</span><span class="p" data-group-id="6868923304-14">#</span><span class="nc" data-group-id="6868923304-14">Ash.Query</span><span class="p" data-group-id="6868923304-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-15">[</span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6868923304-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:created_at</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="6868923304-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-17">[</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6868923304-17">]</span><span class="w">
   </span><span class="p" data-group-id="6868923304-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6868923304-18">[</span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">actor</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">tracer</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6868923304-19">[</span><span class="p" data-group-id="6868923304-19">]</span><span class="p" data-group-id="6868923304-18">]</span><span class="p" data-group-id="6868923304-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="6868923304-1">}</span></code></pre>

  </body>
</html>
