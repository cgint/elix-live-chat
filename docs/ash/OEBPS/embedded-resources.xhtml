<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Embedded Resources - ash v3.5.33</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">Embedded Resources</h1>
<p>Embedded resources are stored as maps in attributes of other resources. They are great for storing structured data, and support a whole range of useful features that resources support. For example, you can have calculations, validations, policies and even relationships on embedded resources.</p><h2 id="consider-simpler-alternatives">Consider Simpler Alternatives</h2><p>Before creating a full embedded resource, consider if one of these simpler options might meet your needs:</p><h3 id="ash-typedstruct">Ash.TypedStruct</h3><p>For simple structured data with type validation but without the need for calculations, validations, or policies:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Address</span><span class="w"> </span><span class="k" data-group-id="6496651769-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.TypedStruct</span><span class="w">

  </span><span class="n">typed_struct</span><span class="w"> </span><span class="k" data-group-id="6496651769-2">do</span><span class="w">
    </span><span class="n">field</span><span class="w"> </span><span class="ss">:street</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
    </span><span class="n">field</span><span class="w"> </span><span class="ss">:city</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
    </span><span class="n">field</span><span class="w"> </span><span class="ss">:state</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">constraints</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6496651769-3">[</span><span class="ss">max_length</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6496651769-3">]</span><span class="w">
    </span><span class="n">field</span><span class="w"> </span><span class="ss">:zip</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">constraints</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6496651769-4">[</span><span class="ss">match</span><span class="p">:</span><span class="w"> </span><span class="sr">~r/^</span><span class="se">\d</span><span class="sr">{5}$/</span><span class="p" data-group-id="6496651769-4">]</span><span class="w">
  </span><span class="k" data-group-id="6496651769-2">end</span><span class="w">
</span><span class="k" data-group-id="6496651769-1">end</span></code></pre><h3 id="ash-type-struct">Ash.Type.Struct</h3><p>For when you need a generic struct type with field specifications:</p><pre><code class="makeup elixir" translate="no"><span class="n">attribute</span><span class="w"> </span><span class="ss">:address</span><span class="p">,</span><span class="w"> </span><span class="ss">:struct</span><span class="w"> </span><span class="k" data-group-id="1113848756-1">do</span><span class="w">
  </span><span class="n">constraints</span><span class="w"> </span><span class="ss">fields</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-2">[</span><span class="w">
    </span><span class="ss">street</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-3">[</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1113848756-3">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">city</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-4">[</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1113848756-4">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-5">[</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">constraints</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-6">[</span><span class="ss">max_length</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1113848756-6">]</span><span class="p" data-group-id="1113848756-5">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">zip</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-7">[</span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">constraints</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1113848756-8">[</span><span class="ss">match</span><span class="p">:</span><span class="w"> </span><span class="sr">~r/^</span><span class="se">\d</span><span class="sr">{5}$/</span><span class="p" data-group-id="1113848756-8">]</span><span class="p" data-group-id="1113848756-7">]</span><span class="w">
  </span><span class="p" data-group-id="1113848756-2">]</span><span class="w">
</span><span class="k" data-group-id="1113848756-1">end</span></code></pre><p>Use embedded resources when you need the full power of Ash resources, including actions, calculations, validations, and policies.</p><h2 id="example-embedded-resource">Example Embedded Resource</h2><p>Here is an example of a simple embedded resource:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="w"> </span><span class="k" data-group-id="5240690645-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="ss">:embedded</span><span class="w"> </span><span class="c1"># Use the atom `:embedded` as the data layer.</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="5240690645-2">do</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:last_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="5240690645-2">end</span><span class="w">
</span><span class="k" data-group-id="5240690645-1">end</span></code></pre><section role="note" class="admonition info"><h3 id="embedded-resources-can-t-do-everything" class="admonition-title info">Embedded resources can't do everything</h3><p>Embedded resources cannot have aggregates, or expression calculations that rely on data-layer-specific capabilities.</p></section><h2 id="adding-embedded-resource-attributes">Adding embedded resource attributes</h2><p>Embedded resources define an <a href="Ash.Type.xhtml"><code class="inline">Ash.Type</code></a> under the hood, meaning you can use them anywhere you would use an Ash type.</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.User</span><span class="w"> </span><span class="k" data-group-id="0916039925-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="0916039925-2">do</span><span class="w">
    </span><span class="n">...</span><span class="w">

    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:profile</span><span class="p">,</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:profiles</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0916039925-3">{</span><span class="ss">:array</span><span class="p">,</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="p" data-group-id="0916039925-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="c1"># You can also have an array of embeds</span><span class="w">
  </span><span class="k" data-group-id="0916039925-2">end</span><span class="w">
</span><span class="k" data-group-id="0916039925-1">end</span></code></pre><h2 id="handling-nil-values">Handling nil values</h2><p>By default, all fields on an embedded resource will be included in the data layer, including keys with nil values. To prevent this, add the <code class="inline">embed_nil_values?</code> option to <code class="inline">use Ash.Resource</code>. For example:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">YourEmbed</span><span class="w"> </span><span class="k" data-group-id="4663757799-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="ss">:embedded</span><span class="p">,</span><span class="w">
    </span><span class="ss">embed_nil_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="k" data-group-id="4663757799-1">end</span></code></pre><h2 id="editing-embedded-attributes">Editing embedded attributes</h2><p>If you manually supply instances of the embedded structs, the structs you provide are used with no validation. For example:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Ash.Changeset</span><span class="o">.</span><span class="n">for_update</span><span class="p" data-group-id="7024200004-1">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="ss">:update</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7024200004-2">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7024200004-3">%</span><span class="nc" data-group-id="7024200004-3">MyApp.Profile</span><span class="p" data-group-id="7024200004-3">{</span><span class="ss">first_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;first_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">last_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;last_name&quot;</span><span class="p" data-group-id="7024200004-3">}</span><span class="p" data-group-id="7024200004-2">}</span><span class="p" data-group-id="7024200004-1">)</span></code></pre><p>However, you can also treat embedded resources like regular resources that can be &quot;created&quot;, &quot;updated&quot;, and &quot;destroyed&quot;.
To do this, provide maps as the input, instead of structs. In the example above, if you just wanted to change the <code class="inline">first_name</code>, you'd provide:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Ash.Changeset</span><span class="o">.</span><span class="n">for_update</span><span class="p" data-group-id="2113304873-1">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="ss">:update</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2113304873-2">%{</span><span class="ss">profile</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2113304873-3">%{</span><span class="ss">first_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;first_name&quot;</span><span class="p" data-group-id="2113304873-3">}</span><span class="p" data-group-id="2113304873-2">}</span><span class="p" data-group-id="2113304873-1">)</span></code></pre><p>This will call the primary <code class="inline">update</code> action on the resource. This allows you to define an action on the embed, and add validations to it. For example, you might have something like this:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="w"> </span><span class="k" data-group-id="7016669610-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="ss">:embedded</span><span class="w"> </span><span class="c1"># Use the atom `:embedded` as the data layer.</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="7016669610-2">do</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:last_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="7016669610-2">end</span><span class="w">

  </span><span class="n">validations</span><span class="w"> </span><span class="k" data-group-id="7016669610-3">do</span><span class="w">
    </span><span class="n">validate</span><span class="w"> </span><span class="n">present</span><span class="p" data-group-id="7016669610-4">(</span><span class="p" data-group-id="7016669610-5">[</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_name</span><span class="p" data-group-id="7016669610-5">]</span><span class="p">,</span><span class="w"> </span><span class="ss">at_least</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="7016669610-4">)</span><span class="w">
  </span><span class="k" data-group-id="7016669610-3">end</span><span class="w">
</span><span class="k" data-group-id="7016669610-1">end</span></code></pre><h2 id="calculations">Calculations</h2><p>Calculations can be added to embedded resources. When you use an embedded resource, you declare what calculations to load via a <code class="inline">constraint</code>.
For example:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="w"> </span><span class="k" data-group-id="9811439839-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="ss">:embedded</span><span class="w"> </span><span class="c1"># Use the atom `:embedded` as the data layer.</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="9811439839-2">do</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:last_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="9811439839-2">end</span><span class="w">

  </span><span class="n">calculations</span><span class="w"> </span><span class="k" data-group-id="9811439839-3">do</span><span class="w">
    </span><span class="n">calculate</span><span class="w"> </span><span class="ss">:full_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="n">concat</span><span class="p" data-group-id="9811439839-4">(</span><span class="p" data-group-id="9811439839-5">[</span><span class="ss">:first_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:last_name</span><span class="p" data-group-id="9811439839-5">]</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p" data-group-id="9811439839-4">)</span><span class="w">
  </span><span class="k" data-group-id="9811439839-3">end</span><span class="w">
</span><span class="k" data-group-id="9811439839-1">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.User</span><span class="w"> </span><span class="k" data-group-id="9811439839-6">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="9811439839-7">do</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:profile</span><span class="p">,</span><span class="w"> </span><span class="nc">MyApp.Profile</span><span class="w"> </span><span class="k" data-group-id="9811439839-8">do</span><span class="w">
      </span><span class="n">public?</span><span class="w"> </span><span class="no">true</span><span class="w">
      </span><span class="n">constraints</span><span class="w"> </span><span class="p" data-group-id="9811439839-9">[</span><span class="ss">load</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9811439839-10">[</span><span class="ss">:full_name</span><span class="p" data-group-id="9811439839-10">]</span><span class="p" data-group-id="9811439839-9">]</span><span class="w">
    </span><span class="k" data-group-id="9811439839-8">end</span><span class="w">
  </span><span class="k" data-group-id="9811439839-7">end</span><span class="w">
</span><span class="k" data-group-id="9811439839-6">end</span></code></pre><h2 id="determining-what-action-s-will-be-called">Determining what action(s) will be called:</h2><p>Remember: default actions are already implemented for a resource, with no need to add them. They are called <code class="inline">:create</code>, <code class="inline">:update</code>, <code class="inline">:destroy</code>, and <code class="inline">:read</code>. You can use those without defining them. You only need to define them if you wish to override their configuration.</p><h3 id="single-embeds">Single Embeds</h3><ul><li>If the current value is <code class="inline">nil</code> - a <code class="inline">create</code> with the provided values</li><li>If the current value is not <code class="inline">nil</code> - an <code class="inline">update</code> with the provided values</li><li>If the current value is not <code class="inline">nil</code> and the <em>new value</em> is <code class="inline">nil</code> - a <code class="inline">destroy</code> with the original value</li></ul><h3 id="array-embeds">Array Embeds</h3><p>All values in the original array are destroyed, and all maps in the new array are used to <code class="inline">create</code> new records.</p><h2 id="adding-a-primary-key">Adding a primary key</h2><p>Adding a primary key to your embedded resources is especially useful when managing lists of data. Specifically, it allows you to consider changes to elements with matching primary key values as <code class="inline">updates</code>.</p><p>For example:</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">MyApp.Tag</span><span class="w"> </span><span class="k" data-group-id="3008201837-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="ss">:embedded</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="3008201837-2">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="w"> </span><span class="ss">:id</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
    </span><span class="n">attribute</span><span class="w"> </span><span class="ss">:counter</span><span class="p">,</span><span class="w"> </span><span class="ss">:integer</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="3008201837-2">end</span><span class="w">

  </span><span class="n">validations</span><span class="w"> </span><span class="k" data-group-id="3008201837-3">do</span><span class="w">
    </span><span class="n">validate</span><span class="w"> </span><span class="p" data-group-id="3008201837-4">{</span><span class="nc">Increasing</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:counter</span><span class="p" data-group-id="3008201837-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">on</span><span class="p">:</span><span class="w"> </span><span class="ss">:update</span><span class="w">
  </span><span class="k" data-group-id="3008201837-3">end</span><span class="w">
</span><span class="k" data-group-id="3008201837-1">end</span></code></pre><p>Now, you can accept input meant to <code class="inline">update</code> individual list items. The entire list must still be provided, but any items with a matching id will be considered an <code class="inline">update</code> instead of a <code class="inline">destroy</code> + <code class="inline">create</code>.</p><h3 id="determining-what-action-s-will-be-called-with-a-primary-key">Determining what action(s) will be called with a primary key:</h3><h4>Single Embeds with primary keys</h4><ul><li>If you provide a struct, instead of a map, the value provided is used as the new relationship value directly.</li><li>If the current value is <code class="inline">nil</code> - a <code class="inline">create</code> with the provided values</li><li>If the current value is not <code class="inline">nil</code> and the primary keys match - an <code class="inline">update</code> with the provided values</li><li>If the current value is not <code class="inline">nil</code> and the primary keys <em>don't</em> match - a <code class="inline">destroy</code> of the original value and a <code class="inline">create</code> of the new value</li><li>If the current value is not <code class="inline">nil</code> and the <em>new value</em> is <code class="inline">nil</code> - a <code class="inline">destroy</code> with the original value</li></ul><h4>Array Embeds with primary keys</h4><ul><li>If you provide structs, instead of maps, the value provided is used as the new relationship value directly.</li><li>Any values in the original list with no primary key matching in the new list are <code class="inline">destroy</code>ed.</li><li>Any values in the new list with no primary key matching in the original list are <code class="inline">create</code>d.</li><li>Any values with a primary key match in the original list and the new list are <code class="inline">update</code>d</li></ul><h2 id="identities">Identities</h2><p>Identities can be added on an embedded resource, which will ensure that for any given list, they are unique on that identity. For example, if you had an embedded resource called <code class="inline">Tag</code>, you could add an identity on <code class="inline">name</code> to ensure that nothing has duplicate tag names.</p><h2 id="usage-in-extensions">Usage in Extensions</h2><p>The AshJsonApi extension exposes these attributes as maps. However, the AshGraphql extension allows you
to specify a type (but not queries/mutations) for an embedded resource. If you do, instead of being treated as a <code class="inline">:json</code> type it will get its own named input object type and field type.</p><h2 id="accessing-the-source-changeset">Accessing the source changeset</h2><p>When building changesets for embedded resources, the source changeset will be available in action changes under <code class="inline">changeset.context.__source__</code>.
This allows you to customize the action based on the details of the parent changeset.</p>

  </body>
</html>
