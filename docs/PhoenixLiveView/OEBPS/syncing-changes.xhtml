<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Syncing changes and optimistic UIs - Phoenix LiveView v1.1.2</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">Syncing changes and optimistic UIs</h1>
<p>When using LiveView, whenever you change the state in your LiveView process, changes are automatically sent and applied in the client.</p><p>However, in many occasions, the client may have its own state: inputs, buttons, focused UI elements, and more. In order to avoid server updates from destroying state on the client, LiveView provides several features and out-of-the-box conveniences.</p><p>Let's start by discussing which problems may arise from client-server integration, which may apply to any web application, and explore how LiveView solves it automatically. If you want to focus on the more practical aspects, you can jump to later sections or watch the video below:</p><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/fCdi7SEPrTs?si=ai_gcKZALmzc1Gy8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="allowfullscreen"></iframe><h2 id="the-problem-in-a-nutshell">The problem in a nutshell</h2><p>Imagine your web application has a form. The form has a single email input and a button. We have to validate that the email is unique in our database and render a tiny “✗” or “✓“ accordingly close to the input. Because we are using server-side rendering, we are debouncing/throttling form changes to the server. And, to avoid double-submissions, we want to disable the button as soon as it is clicked.</p><p>Here is what could happen. The user has typed “hello@example.” and debounce kicks in, causing the client to send an event to the server. Here is how the client looks like at this moment:</p><pre><code class="plain">[ hello@example.    ]

    ------------
       SUBMIT
    ------------</code></pre><p>While the server is processing this information, the user finishes typing the email and presses submit. The client sends the submit event to the server, then proceeds to disable the button, and change its value to “SUBMITTING”:</p><pre><code class="plain">[ hello@example.com ]

    ------------
     SUBMITTING
    ------------</code></pre><p>Immediately after pressing submit, the client receives an update from the server, but this is an update from the debounce event! If the client were to simply render this server update, the client would effectively roll back the form to the previous state shown below, which would be a disaster:</p><pre><code class="plain">[ hello@example.    ] ✓

    ------------
       SUBMIT
    ------------</code></pre><p>This is a simple example of how client and server state can evolve and differ for periods of times, due to the latency (distance) between them, in any web application, not only LiveView.</p><p>LiveView solves this in two ways:</p><ul><li><p>The JavaScript client is always the source of truth for current input values</p></li><li><p>LiveView tracks how many events are currently in flight in a given input/button/form. The changes to the form are applied behind the scenes as they arrive, but LiveView only shows them once all in-flight events have been resolved</p></li></ul><p>In other words, for the most common cases, <strong>LiveView will automatically sync client and server state for you</strong>. This is a huge benefit of LiveView, as many other stacks would require developers to tackle these problems themselves. For complete detail in how LiveView handles forms, see <a href="form-bindings.xhtml#javascript-client-specifics">the JavaScript client specifics in the Form Bindings page</a>.</p><h2 id="optimistic-uis-via-loading-classes">Optimistic UIs via loading classes</h2><p>Whenever an HTML element pushes an event to the server, LiveView will attach a <code class="inline">-loading</code> class to it. For example the following markup:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">clicked</span><span class="p">&quot;</span><span class="w"> </span><span class="na">phx-window-keydown</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">key</span><span class="p">&quot;</span><span class="p">&gt;</span><span class="n">...</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>On click, would receive the <code class="inline">phx-click-loading</code> class, and on keydown would receive the <code class="inline">phx-keydown-loading</code> class. The CSS loading classes are maintained until an acknowledgement is received on the client for the pushed event. If the element is triggered several times, the loading state is removed only when all events are resolved.</p><p>This means the most trivial optimistic UI enhancements can be done in LiveView by simply adding a CSS rule. For example, imagine you want to fade the text of an element when it is clicked, while it waits for a response:</p><pre><code class="makeup css" translate="no"><span class="na">.</span><span class="na">phx-click-loading</span><span class="na">.</span><span class="na">opaque-on-click</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">  </span><span class="nb">opacity</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="mi">%</span><span class="p">;</span><span class="w">
</span><span class="p">}</span></code></pre><p>Now, by adding the class <code class="inline">opaque-on-click</code> to any element, the elements give an immediate feedback on click.</p><p>The following events receive CSS loading classes:</p><ul><li><code class="inline">phx-click</code> - <code class="inline">phx-click-loading</code></li><li><code class="inline">phx-change</code> - <code class="inline">phx-change-loading</code></li><li><code class="inline">phx-submit</code> - <code class="inline">phx-submit-loading</code></li><li><code class="inline">phx-focus</code> - <code class="inline">phx-focus-loading</code></li><li><code class="inline">phx-blur</code> - <code class="inline">phx-blur-loading</code></li><li><code class="inline">phx-window-keydown</code> - <code class="inline">phx-keydown-loading</code></li><li><code class="inline">phx-window-keyup</code> - <code class="inline">phx-keyup-loading</code></li></ul><p>Events that happen inside a form have their state applied to both the element and the form. When an input changes, <code class="inline">phx-change-loading</code> applies to both input and form. On submit, both button and form get the <code class="inline">phx-submit-loading</code> classes. Buttons, in particular, also support a <code class="inline">phx-disabled-with</code> attribute, which allows you to customize the text of the button on click:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-disable-with</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">Submitting...</span><span class="p">&quot;</span><span class="p">&gt;</span><span class="n">Submit</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><h3 id="tailwind-integration">Tailwind integration</h3><p>If you are using Tailwind, you may want to use <a href="https://tailwindcss.com/docs/plugins#adding-variants">the <code class="inline">addVariant</code> plugin</a> to make it even easier to customize your elements loading state.</p><pre><code class="makeup javascript" translate="no"><span class="n">plugins</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
</span><span class="w">  </span><span class="nf">plugin</span><span class="p">(</span><span class="p">(</span><span class="p">{</span><span class="w"> </span><span class="nv">addVariant</span><span class="w"> </span><span class="p">}</span><span class="p">)</span><span class="w"> </span><span class="kt">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="nf">addVariant</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">phx-click-loading</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="p">&quot;</span><span class="s2">.phx-click-loading&amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">&quot;</span><span class="s2">.phx-click-loading &amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="p">]</span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="nf">addVariant</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">phx-submit-loading</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="p">&quot;</span><span class="s2">.phx-submit-loading&amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">&quot;</span><span class="s2">.phx-submit-loading &amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="p">]</span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="nf">addVariant</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">phx-change-loading</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="p">&quot;</span><span class="s2">.phx-change-loading&amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">&quot;</span><span class="s2">.phx-change-loading &amp;</span><span class="p">&quot;</span><span class="p">,</span><span class="p">]</span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">  </span><span class="p">}</span><span class="p">)</span><span class="p">,</span><span class="w">
</span><span class="p">]</span><span class="o">,</span></code></pre><p>Now to fade one element on click, you simply need to add:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">clicked</span><span class="p">&quot;</span><span class="w"> </span><span class="na">class</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">p</span><span class="s2">h</span><span class="s2">x</span><span class="s2">-</span><span class="s2">c</span><span class="s2">l</span><span class="s2">i</span><span class="s2">c</span><span class="s2">k</span><span class="s2">-</span><span class="s2">l</span><span class="s2">o</span><span class="s2">a</span><span class="s2">d</span><span class="s2">i</span><span class="s2">n</span><span class="s2">g</span><span class="s2">:</span><span class="s2">o</span><span class="s2">p</span><span class="s2">a</span><span class="s2">c</span><span class="s2">i</span><span class="s2">t</span><span class="s2">y</span><span class="s2">-</span><span class="s2">5</span><span class="s2">0</span><span class="p">&quot;</span><span class="p">&gt;</span><span class="n">...</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><h2 id="optimistic-uis-via-js-commands">Optimistic UIs via JS commands</h2><p>While loading classes are extremely handy, they only apply to the element currently clicked. Sometimes, you may to click a &quot;Delete&quot; button but mark the whole row that holds the button as loading (for example, to fade it out).</p><p>By using JS commands, you can tell LiveView which elements get the loading state:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="8789305820-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">push</span><span class="p" data-group-id="8789305820-ex-1">(</span><span class="s">&quot;delete&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">loading</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#post-row-13&quot;</span><span class="p" data-group-id="8789305820-ex-1">)</span><span class="p" data-group-id="8789305820-1">}</span><span class="p">&gt;</span><span class="n">Delete</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>Besides custom loading elements, you can use <a href="Phoenix.LiveView.JS.xhtml">JS commands</a> for a huge variety of operations, such as adding/removing classes, toggling attributes, hiding elements, transitions, and more.</p><p>For example, imagine that you want to immediately remove an element from the page on click, you can do this:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="1637146352-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">push</span><span class="p" data-group-id="1637146352-ex-1">(</span><span class="s">&quot;delete&quot;</span><span class="p" data-group-id="1637146352-ex-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">JS</span><span class="o">.</span><span class="n">hide</span><span class="p" data-group-id="1637146352-ex-2">(</span><span class="p" data-group-id="1637146352-ex-2">)</span><span class="p" data-group-id="1637146352-1">}</span><span class="p">&gt;</span><span class="n">Delete</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>If the element you want to delete is not the clicked button, but its parent (or other element), you can pass a selector to hide:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="0112040855-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">push</span><span class="p" data-group-id="0112040855-ex-1">(</span><span class="s">&quot;delete&quot;</span><span class="p" data-group-id="0112040855-ex-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">JS</span><span class="o">.</span><span class="n">hide</span><span class="p" data-group-id="0112040855-ex-2">(</span><span class="s">&quot;#post-row-13&quot;</span><span class="p" data-group-id="0112040855-ex-2">)</span><span class="p" data-group-id="0112040855-1">}</span><span class="p">&gt;</span><span class="n">Delete</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>Or if you'd rather add a class instead:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="8279727050-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">push</span><span class="p" data-group-id="8279727050-ex-1">(</span><span class="s">&quot;delete&quot;</span><span class="p" data-group-id="8279727050-ex-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">JS</span><span class="o">.</span><span class="n">add_class</span><span class="p" data-group-id="8279727050-ex-2">(</span><span class="s">&quot;opacity-50&quot;</span><span class="p" data-group-id="8279727050-ex-2">)</span><span class="p" data-group-id="8279727050-1">}</span><span class="p">&gt;</span><span class="n">Delete</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>One key property of JS commands, such as <code class="inline">hide</code> and <code class="inline">add_class</code>, is that they are DOM-patch aware, so operations applied by the JS APIs will stick to elements across patches from the server.</p><p>JS commands also include a <code class="inline">dispatch</code> function, which dispatches an event to the DOM element to trigger client-specific functionality. For example, to trigger copying to a clipboard, you may implement this event listener:</p><pre><code class="makeup javascript" translate="no"><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">app:clipcopy</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nv">event</span><span class="p">)</span><span class="w"> </span><span class="kt">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="p">&quot;</span><span class="s2">clipboard</span><span class="p">&quot;</span><span class="w"> </span><span class="o">in</span><span class="w"> </span><span class="nb">navigator</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">event</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">tagName</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="p">&quot;</span><span class="s2">INPUT</span><span class="p">&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">      </span><span class="nb">navigator</span><span class="p">.</span><span class="n">clipboard</span><span class="p">.</span><span class="nf">writeText</span><span class="p">(</span><span class="nv">event</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">value</span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">      </span><span class="nb">navigator</span><span class="p">.</span><span class="n">clipboard</span><span class="p">.</span><span class="nf">writeText</span><span class="p">(</span><span class="nv">event</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">textContent</span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">    </span><span class="p">}</span><span class="w">
</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="w">    </span><span class="nf">alert</span><span class="p">(</span><span class="w">
</span><span class="w">      </span><span class="p">&quot;</span><span class="s2">Sorry, your browser does not support clipboard copy.</span><span class="esc">\n</span><span class="s2">This generally requires a secure origin — either HTTPS or localhost.</span><span class="p">&quot;</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="p">)</span><span class="p">;</span><span class="w">
</span><span class="w">  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="p">)</span><span class="p">;</span></code></pre><p>And then trigger it as follows:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="6498568730-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">dispatch</span><span class="p" data-group-id="6498568730-ex-1">(</span><span class="s">&quot;app:clipcopy&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#printed-output&quot;</span><span class="p" data-group-id="6498568730-ex-1">)</span><span class="p" data-group-id="6498568730-1">}</span><span class="p">&gt;</span><span class="n">Copy</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>Transitions are also only a few characters away:</p><pre><code class="makeup heex" translate="no"><span class="p">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="na">id</span><span class="p">=</span><span class="p">&quot;</span><span class="s2">i</span><span class="s2">t</span><span class="s2">e</span><span class="s2">m</span><span class="p">&quot;</span><span class="p">&gt;</span><span class="n">My Item</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span><span class="w">
</span><span class="p">&lt;</span><span class="nt">button</span><span class="w"> </span><span class="na">phx-click</span><span class="p">=</span><span class="p" data-group-id="5079701776-1">{</span><span class="nc">JS</span><span class="o">.</span><span class="n">transition</span><span class="p" data-group-id="5079701776-ex-1">(</span><span class="s">&quot;shake&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#item&quot;</span><span class="p" data-group-id="5079701776-ex-1">)</span><span class="p" data-group-id="5079701776-1">}</span><span class="p">&gt;</span><span class="n">Shake!</span><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span></code></pre><p>See <a href="Phoenix.LiveView.JS.xhtml"><code class="inline">Phoenix.LiveView.JS</code></a> for more examples and documentation.</p><h2 id="optimistic-uis-via-js-hooks">Optimistic UIs via JS hooks</h2><p>On the most complex cases, you can assume control of a DOM element, and control exactly how and when server updates apply to the element on the page. See <a href="js-interop.xhtml#client-hooks-via-phx-hook">the Client hooks via <code class="inline">phx-hook</code> section in the JavaScript interoperability page</a> to learn more.</p><h2 id="live-navigation">Live navigation</h2><p>LiveView also provides mechanisms to customize and interact with navigation events.</p><h3 id="navigation-classes">Navigation classes</h3><p>The following classes are applied to the LiveView's parent container:</p><ul><li><code class="inline">&quot;phx-connected&quot;</code> - applied when the view has connected to the server</li><li><code class="inline">&quot;phx-loading&quot;</code> - applied when the view is not connected to the server</li><li><code class="inline">&quot;phx-error&quot;</code> - applied when an error occurs on the server. Note, this
class will be applied in conjunction with <code class="inline">&quot;phx-loading&quot;</code> if connection
to the server is lost.</li></ul><h3 id="navigation-events">Navigation events</h3><p>For live page navigation via <code class="inline">&lt;.link navigate={...}&gt;</code> and <code class="inline">&lt;.link patch={...}&gt;</code>, their server-side equivalents <code class="inline">push_navigate</code> and <code class="inline">push_patch</code>, as well as form submits via <code class="inline">phx-submit</code>, the JavaScript events <code class="inline">&quot;phx:page-loading-start&quot;</code> and <code class="inline">&quot;phx:page-loading-stop&quot;</code> are dispatched on window. This is useful for showing main page loading status, for example:</p><pre><code class="makeup javascript" translate="no"><span class="c1">//</span><span class="c1"> app.js
</span><span class="k">import</span><span class="w"> </span><span class="nv">topbar</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">&quot;</span><span class="s2">topbar</span><span class="p">&quot;</span><span class="w">
</span><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">phx:page-loading-start</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">info</span><span class="w"> </span><span class="kt">=&gt;</span><span class="w"> </span><span class="nv">topbar</span><span class="p">.</span><span class="nf">delayedShow</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span><span class="p">)</span><span class="w">
</span><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="p">&quot;</span><span class="s2">phx:page-loading-stop</span><span class="p">&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">info</span><span class="w"> </span><span class="kt">=&gt;</span><span class="w"> </span><span class="nv">topbar</span><span class="p">.</span><span class="nf">hide</span><span class="p">(</span><span class="p">)</span><span class="p">)</span></code></pre><p>Within the callback, <code class="inline">info.detail</code> will be an object that contains a <code class="inline">kind</code>
key, with a value that depends on the triggering event:</p><ul><li><code class="inline">&quot;redirect&quot;</code> - the event was triggered by a redirect</li><li><code class="inline">&quot;patch&quot;</code> - the event was triggered by a patch</li><li><code class="inline">&quot;initial&quot;</code> - the event was triggered by initial page load</li><li><code class="inline">&quot;element&quot;</code> - the event was triggered by a <code class="inline">phx-</code> bound element, such as <code class="inline">phx-click</code></li><li><code class="inline">&quot;error&quot;</code> - the event was triggered by an error, such as a view crash or socket disconnection</li></ul><p>Additionally, <a href="Phoenix.LiveView.JS.xhtml#push/3"><code class="inline">Phoenix.LiveView.JS.push/3</code></a> may dispatch page loading events by passing <code class="inline">page_loading: true</code> option.</p><p>For all kinds of page loading events, all but <code class="inline">&quot;element&quot;</code> will receive an additional <code class="inline">to</code> key in the info metadata pointing to the href associated with the page load. In the case of an <code class="inline">&quot;element&quot;</code> page loading event, the info will contain a <code class="inline">&quot;target&quot;</code> key containing the DOM element which triggered the page loading state.</p><p>A lower level <code class="inline">phx:navigate</code> event is also triggered any time the browser's URL bar is programmatically changed by Phoenix or the user navigation forward or back. The <code class="inline">info.detail</code> will contain the following information:</p><ul><li><code class="inline">&quot;href&quot;</code> - the location the URL bar was navigated to.</li><li><code class="inline">&quot;patch&quot;</code> - the boolean flag indicating this was a patch navigation.</li><li><code class="inline">&quot;pop&quot;</code> - the boolean flag indication this was a navigation via <code class="inline">popstate</code>
from a user navigation forward or back in history.</li></ul>

  </body>
</html>
