<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Macro.Env - Elixir v1.18.4</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">
Macro.Env 
    </h1>


      <section id="moduledoc" class="docstring">
<p>A struct that holds compile time environment information.</p><p>The current environment can be accessed at any time as
<a href="Kernel.SpecialForms.xhtml#__ENV__/0"><code class="inline">__ENV__/0</code></a>. Inside macros, the caller environment can be
accessed as <a href="Kernel.SpecialForms.xhtml#__CALLER__/0"><code class="inline">__CALLER__/0</code></a>.</p><p>The majority of the functions in this module are provided
for low-level tools, which need to integrate with the Elixir
compiler, such as language servers and embedded languages.
For regular usage in Elixir code and macros, you must use
the <a href="Macro.xhtml"><code class="inline">Macro</code></a> module instead. In particular, avoid modifying
the <a href="Macro.Env.xhtml"><code class="inline">Macro.Env</code></a> struct directly and prefer to use high-level
constructs, such as a <code class="inline">import</code>, <code class="inline">aliases</code>, and so forth to
build your own environment. For example, to build a custom
environment, you can define a function such as:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">make_custom_env</samp><samp class="w"> </samp><samp class="k" data-group-id="2836361514-1">do</samp><samp class="w">
  </samp><samp class="kn">import</samp><samp class="w"> </samp><samp class="nc">SomeModule</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">only</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="2836361514-2">[</samp><samp class="ss">some_function</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="2836361514-2">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">warn</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">false</samp><samp class="w">
  </samp><samp class="kn">alias</samp><samp class="w"> </samp><samp class="nc">A.B.C</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">warn</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">false</samp><samp class="w">
  </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="k" data-group-id="2836361514-1">end</samp></code></pre><h2 id="module-struct-fields">Struct fields</h2><p>The <a href="Macro.Env.xhtml"><code class="inline">Macro.Env</code></a> struct contains the following fields:</p><ul><li><code class="inline">context</code> - the context of the environment; it can be <code class="inline">nil</code>
(default context), <code class="inline">:guard</code> (inside a guard) or <code class="inline">:match</code> (inside a match)</li><li><code class="inline">context_modules</code> - a list of modules defined in the current context</li><li><code class="inline">file</code> - the current absolute file name as a binary</li><li><code class="inline">function</code> - a tuple as <code class="inline">{atom, integer}</code>, where the first
element is the function name and the second its arity; returns
<code class="inline">nil</code> if not inside a function</li><li><code class="inline">line</code> - the current line as an integer</li><li><code class="inline">module</code> - the current module name</li></ul><p>The following fields are private to Elixir's macro expansion mechanism and
must not be accessed directly:</p><ul><li><code class="inline">aliases</code></li><li><code class="inline">functions</code></li><li><code class="inline">macro_aliases</code></li><li><code class="inline">macros</code></li><li><code class="inline">lexical_tracker</code></li><li><code class="inline">requires</code></li><li><code class="inline">tracers</code></li><li><code class="inline">versioned_vars</code></li></ul>
      </section>


      <section id="summary" class="details-list">
        <h1 class="section-heading">Summary</h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:context/0" data-no-tooltip="" translate="no">context()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:context_modules/0" data-no-tooltip="" translate="no">context_modules()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:file/0" data-no-tooltip="" translate="no">file()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:line/0" data-no-tooltip="" translate="no">line()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:name_arity/0" data-no-tooltip="" translate="no">name_arity()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip="" translate="no">t()</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:variable/0" data-no-tooltip="" translate="no">variable()</a>

      </div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#define_alias/4" data-no-tooltip="" translate="no">define_alias(env, meta, module, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Defines the given <code class="inline">as</code> an alias to <code class="inline">module</code> in the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#define_import/4" data-no-tooltip="" translate="no">define_import(env, meta, module, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Defines the given <code class="inline">module</code> as imported in the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#define_require/4" data-no-tooltip="" translate="no">define_require(env, meta, module, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Defines the given <code class="inline">module</code> as required in the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#expand_alias/4" data-no-tooltip="" translate="no">expand_alias(env, meta, list, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Expands an alias given by the alias segments.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#expand_import/5" data-no-tooltip="" translate="no">expand_import(env, meta, name, arity, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Expands an import given by <code class="inline">name</code> and <code class="inline">arity</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#expand_require/6" data-no-tooltip="" translate="no">expand_require(env, meta, module, name, arity, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Expands a require given by <code class="inline">module</code>, <code class="inline">name</code>, and <code class="inline">arity</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#has_var?/2" data-no-tooltip="" translate="no">has_var?(env, var)</a>

      </div>

        <div class="summary-synopsis"><p>Checks if a variable belongs to the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#in_guard?/1" data-no-tooltip="" translate="no">in_guard?(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns whether the compilation environment is currently
inside a guard.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#in_match?/1" data-no-tooltip="" translate="no">in_match?(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns whether the compilation environment is currently
inside a match clause.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#location/1" data-no-tooltip="" translate="no">location(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a keyword list containing the file and line
information as keys.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#lookup_alias_as/2" data-no-tooltip="" translate="no">lookup_alias_as(env, atom)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the names of any aliases for the given module or atom.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#lookup_import/2" data-no-tooltip="" translate="no">lookup_import(env, name_arity)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the modules from which the given <code class="inline">{name, arity}</code> was
imported.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#prepend_tracer/2" data-no-tooltip="" translate="no">prepend_tracer(env, tracer)</a>

      </div>

        <div class="summary-synopsis"><p>Prepend a tracer to the list of tracers in the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#prune_compile_info/1" data-no-tooltip="" translate="no">prune_compile_info(env)</a>

      </div>

        <div class="summary-synopsis"><p>Prunes compile information from the environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#required?/2" data-no-tooltip="" translate="no">required?(env, module)</a>

      </div>

        <div class="summary-synopsis"><p>Returns <code class="inline">true</code> if the given module has been required.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stacktrace/1" data-no-tooltip="" translate="no">stacktrace(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the environment stacktrace.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_guard/1" data-no-tooltip="" translate="no">to_guard(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns an environment in the guard context.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_match/1" data-no-tooltip="" translate="no">to_match(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns an environment in the match context.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#vars/1" data-no-tooltip="" translate="no">vars(env)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a list of variables in the current environment.</p></div>

    </div>

</div>

      </section>


      <section id="types" class="details-list">
        <h1 class="section-heading">Types</h1>

        <div class="types-list">
<section class="detail" id="t:context/0">

  <div class="detail-header">
    <a href="#t:context/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">context()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L53" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> context() :: :match | :guard | nil</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:context_modules/0">

  <div class="detail-header">
    <a href="#t:context_modules/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">context_modules()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L54" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> context_modules() :: [<a href="typespecs.xhtml#built-in-types">module</a>()]</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:file/0">

  <div class="detail-header">
    <a href="#t:file/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">file()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L55" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> file() :: <a href="typespecs.xhtml#built-in-types">binary</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:line/0">

  <div class="detail-header">
    <a href="#t:line/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">line()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L56" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> line() :: <a href="typespecs.xhtml#basic-types">non_neg_integer</a>()</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:name_arity/0">

  <div class="detail-header">
    <a href="#t:name_arity/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">name_arity()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L57" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> name_arity() :: {<a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">arity</a>()}</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">t()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L69" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %Macro.Env{
  aliases: aliases(),
  context: <a href="#t:context/0">context</a>(),
  context_modules: <a href="#t:context_modules/0">context_modules</a>(),
  file: <a href="#t:file/0">file</a>(),
  function: <a href="#t:name_arity/0">name_arity</a>() | nil,
  functions: functions(),
  lexical_tracker: lexical_tracker(),
  line: <a href="#t:line/0">line</a>(),
  macro_aliases: macro_aliases(),
  macros: macros(),
  module: <a href="typespecs.xhtml#built-in-types">module</a>(),
  requires: requires(),
  tracers: tracers(),
  versioned_vars: versioned_vars()
}</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:variable/0">

  <div class="detail-header">
    <a href="#t:variable/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">variable()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L58" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> variable() :: {<a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#basic-types">atom</a>() | <a href="typespecs.xhtml#built-in-types">term</a>()}</pre>

      </div>


  </section>
</section>

        </div>
      </section>

      <section id="functions" class="details-list">
        <h1 class="section-heading">Functions</h1>

        <div class="functions-list">
<section class="detail" id="define_alias/4">

    <span id="define_alias/3"></span>

  <div class="detail-header">
    <a href="#define_alias/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">define_alias(env, meta, module, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L441" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> define_alias(<a href="#t:t/0">t</a>(), <a href="Macro.xhtml#t:metadata/0">Macro.metadata</a>(), <a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>()) ::
  {:ok, <a href="#t:t/0">t</a>()} | {:error, <a href="String.xhtml#t:t/0">String.t</a>()}</pre>

      </div>

<p>Defines the given <code class="inline">as</code> an alias to <code class="inline">module</code> in the environment.</p><p>This is used by tools which need to mimic the Elixir compiler.
The appropriate <code class="inline">:alias</code> compiler tracing event will be emitted.</p><h2 id="define_alias/4-additional-options" class="section-heading"><a href="#define_alias/4-additional-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Additional options</span></h2><p>It accepts the same options as <code class="inline">Kernel.SpecialForm.alias/2</code> plus:</p><ul><li><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</li></ul><h2 id="define_alias/4-examples" class="section-heading"><a href="#define_alias/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="7012514068-1">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-2">[</samp><samp class="p" data-group-id="7012514068-2">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-3">[</samp><samp class="ss">:Baz</samp><samp class="p" data-group-id="7012514068-3">]</samp><samp class="p" data-group-id="7012514068-1">)</samp><samp class="w">
</samp><samp class="ss">:error</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="7012514068-4">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="7012514068-4">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_alias</samp><samp class="p" data-group-id="7012514068-5">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-6">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="7012514068-6">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">as</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">Baz</samp><samp class="p" data-group-id="7012514068-5">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="7012514068-7">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-8">[</samp><samp class="p" data-group-id="7012514068-8">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-9">[</samp><samp class="ss">:Baz</samp><samp class="p" data-group-id="7012514068-9">]</samp><samp class="p" data-group-id="7012514068-7">)</samp><samp class="w">
</samp><samp class="p" data-group-id="7012514068-10">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="7012514068-10">}</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="7012514068-11">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-12">[</samp><samp class="p" data-group-id="7012514068-12">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7012514068-13">[</samp><samp class="ss">:Baz</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:Bat</samp><samp class="p" data-group-id="7012514068-13">]</samp><samp class="p" data-group-id="7012514068-11">)</samp><samp class="w">
</samp><samp class="p" data-group-id="7012514068-14">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar.Bat</samp><samp class="p" data-group-id="7012514068-14">}</samp></code></pre><p>If no <code class="inline">:as</code> option is given, the alias will be inferred from the module:</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="6704504393-1">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="6704504393-1">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_alias</samp><samp class="p" data-group-id="6704504393-2">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6704504393-3">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="6704504393-3">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="6704504393-2">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="6704504393-4">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6704504393-5">[</samp><samp class="p" data-group-id="6704504393-5">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6704504393-6">[</samp><samp class="ss">:Bar</samp><samp class="p" data-group-id="6704504393-6">]</samp><samp class="p" data-group-id="6704504393-4">)</samp><samp class="w">
</samp><samp class="p" data-group-id="6704504393-7">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="6704504393-7">}</samp></code></pre><p>If it is not possible to infer one, an error is returned:</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_alias</samp><samp class="p" data-group-id="5458001795-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="5458001795-2">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="5458001795-2">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:an_atom</samp><samp class="p" data-group-id="5458001795-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="5458001795-3">{</samp><samp class="ss">:error</samp><samp class="p">,</samp><samp class="w">
 </samp><samp class="s">&quot;alias cannot be inferred automatically for module: :an_atom, &quot;</samp><samp class="w"> </samp><samp class="o">&lt;&gt;</samp><samp class="w">
   </samp><samp class="s">&quot;please use the :as option. Implicit aliasing is only supported with Elixir modules&quot;</samp><samp class="p" data-group-id="5458001795-3">}</samp></code></pre>
  </section>
</section>
<section class="detail" id="define_import/4">

    <span id="define_import/3"></span>

  <div class="detail-header">
    <a href="#define_import/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">define_import(env, meta, module, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L391" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> define_import(<a href="#t:t/0">t</a>(), <a href="Macro.xhtml#t:metadata/0">Macro.metadata</a>(), <a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>()) ::
  {:ok, <a href="#t:t/0">t</a>()} | {:error, <a href="String.xhtml#t:t/0">String.t</a>()}</pre>

      </div>

<p>Defines the given <code class="inline">module</code> as imported in the environment.</p><p>It assumes <code class="inline">module</code> is available. This is used by tools which
need to mimic the Elixir compiler. The appropriate <code class="inline">:import</code>
compiler tracing event will be emitted.</p><h2 id="define_import/4-additional-options" class="section-heading"><a href="#define_import/4-additional-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Additional options</span></h2><p>It accepts the same options as <code class="inline">Kernel.SpecialForm.import/2</code> plus:</p><ul><li><p><code class="inline">:emit_warnings</code> - emit warnings found when defining imports</p></li><li><p><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</p></li><li><p><code class="inline">:info_callback</code> - a function to use instead of <a href="Module.xhtml#c:__info__/1"><code class="inline">Module.__info__/1</code></a>.
The function will be invoked with <code class="inline">:functions</code> or <code class="inline">:macros</code> argument.
It has to return a list of <code class="inline">{function, arity}</code> key value pairs.
If it fails, it defaults to using module metadata based on <code class="inline">module_info/1</code>.</p></li></ul><h2 id="define_import/4-examples" class="section-heading"><a href="#define_import/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3584023718-1">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3584023718-2">{</samp><samp class="ss">:flatten</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="3584023718-2">}</samp><samp class="p" data-group-id="3584023718-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3584023718-3">[</samp><samp class="p" data-group-id="3584023718-3">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="3584023718-4">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="3584023718-4">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_import</samp><samp class="p" data-group-id="3584023718-5">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3584023718-6">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="3584023718-6">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p" data-group-id="3584023718-5">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3584023718-7">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3584023718-8">{</samp><samp class="ss">:flatten</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="3584023718-8">}</samp><samp class="p" data-group-id="3584023718-7">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3584023718-9">[</samp><samp class="p" data-group-id="3584023718-10">{</samp><samp class="ss">:function</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p" data-group-id="3584023718-10">}</samp><samp class="p" data-group-id="3584023718-9">]</samp></code></pre><p>It accepts the same options as <code class="inline">Kernel.SpecialForm.import/2</code>:</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="4571006292-1">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="4571006292-2">{</samp><samp class="ss">:is_odd</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="4571006292-2">}</samp><samp class="p" data-group-id="4571006292-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="4571006292-3">[</samp><samp class="p" data-group-id="4571006292-3">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="4571006292-4">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="4571006292-4">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_import</samp><samp class="p" data-group-id="4571006292-5">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="4571006292-6">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="4571006292-6">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">only</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="ss">:macros</samp><samp class="p" data-group-id="4571006292-5">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="4571006292-7">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="4571006292-8">{</samp><samp class="ss">:is_odd</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="4571006292-8">}</samp><samp class="p" data-group-id="4571006292-7">)</samp><samp class="w">
</samp><samp class="p" data-group-id="4571006292-9">[</samp><samp class="p" data-group-id="4571006292-10">{</samp><samp class="ss">:macro</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="4571006292-10">}</samp><samp class="p" data-group-id="4571006292-9">]</samp></code></pre><h2 id="define_import/4-info-callback-override" class="section-heading"><a href="#define_import/4-info-callback-override" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Info callback override</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="8041836255-1">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-2">{</samp><samp class="ss">:flatten</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="8041836255-2">}</samp><samp class="p" data-group-id="8041836255-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="8041836255-3">[</samp><samp class="p" data-group-id="8041836255-3">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="8041836255-4">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="8041836255-4">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_import</samp><samp class="p" data-group-id="8041836255-5">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-6">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="8041836255-6">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">SomeModule</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-7">[</samp><samp class="ss">info_callback</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="k" data-group-id="8041836255-8">fn</samp><samp class="w"> </samp><samp class="ss">:functions</samp><samp class="w"> </samp><samp class="o">-&gt;</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-9">[</samp><samp class="p" data-group-id="8041836255-10">{</samp><samp class="ss">:flatten</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="8041836255-10">}</samp><samp class="p" data-group-id="8041836255-9">]</samp><samp class="p">;</samp><samp class="w"> </samp><samp class="ss">:macros</samp><samp class="w"> </samp><samp class="o">-&gt;</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-11">[</samp><samp class="p" data-group-id="8041836255-12">{</samp><samp class="ss">:some</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="8041836255-12">}</samp><samp class="p" data-group-id="8041836255-11">]</samp><samp class="p">;</samp><samp class="w"> </samp><samp class="k" data-group-id="8041836255-8">end</samp><samp class="p" data-group-id="8041836255-7">]</samp><samp class="p" data-group-id="8041836255-5">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="8041836255-13">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-14">{</samp><samp class="ss">:flatten</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="8041836255-14">}</samp><samp class="p" data-group-id="8041836255-13">)</samp><samp class="w">
</samp><samp class="p" data-group-id="8041836255-15">[</samp><samp class="p" data-group-id="8041836255-16">{</samp><samp class="ss">:function</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">SomeModule</samp><samp class="p" data-group-id="8041836255-16">}</samp><samp class="p" data-group-id="8041836255-15">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="8041836255-17">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8041836255-18">{</samp><samp class="ss">:some</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="8041836255-18">}</samp><samp class="p" data-group-id="8041836255-17">)</samp><samp class="w">
</samp><samp class="p" data-group-id="8041836255-19">[</samp><samp class="p" data-group-id="8041836255-20">{</samp><samp class="ss">:macro</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">SomeModule</samp><samp class="p" data-group-id="8041836255-20">}</samp><samp class="p" data-group-id="8041836255-19">]</samp></code></pre>
  </section>
</section>
<section class="detail" id="define_require/4">

    <span id="define_require/3"></span>

  <div class="detail-header">
    <a href="#define_require/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">define_require(env, meta, module, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L331" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Defines the given <code class="inline">module</code> as required in the environment.</p><p>It does not check or assert the module is available.
This is used by tools which need to mimic the Elixir compiler.
The appropriate <code class="inline">:require</code> compiler tracing event will be emitted.</p><h2 id="define_require/4-additional-options" class="section-heading"><a href="#define_require/4-additional-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Additional options</span></h2><p>It accepts the same options as <code class="inline">Kernel.SpecialForm.require/2</code> plus:</p><ul><li><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</li></ul><h2 id="define_require/4-examples" class="section-heading"><a href="#define_require/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">required?</samp><samp class="p" data-group-id="0614722876-1">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="0614722876-1">)</samp><samp class="w">
</samp><samp class="no">false</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="0614722876-2">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="0614722876-2">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_require</samp><samp class="p" data-group-id="0614722876-3">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="0614722876-4">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="0614722876-4">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="0614722876-3">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">required?</samp><samp class="p" data-group-id="0614722876-5">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="0614722876-5">)</samp><samp class="w">
</samp><samp class="no">true</samp></code></pre><p>If the <code class="inline">:as</code> option is given, it will also define an alias:</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">env</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="bp">__ENV__</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="3340166689-1">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">env</samp><samp class="p" data-group-id="3340166689-1">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">define_require</samp><samp class="p" data-group-id="3340166689-2">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3340166689-3">[</samp><samp class="ss">line</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10</samp><samp class="p" data-group-id="3340166689-3">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">as</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">Baz</samp><samp class="p" data-group-id="3340166689-2">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="3340166689-4">(</samp><samp class="n">env</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3340166689-5">[</samp><samp class="p" data-group-id="3340166689-5">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3340166689-6">[</samp><samp class="ss">:Baz</samp><samp class="p" data-group-id="3340166689-6">]</samp><samp class="p" data-group-id="3340166689-4">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3340166689-7">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="3340166689-7">}</samp></code></pre>
  </section>
</section>
<section class="detail" id="expand_alias/4">

    <span id="expand_alias/3"></span>

  <div class="detail-header">
    <a href="#expand_alias/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">expand_alias(env, meta, list, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L488" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> expand_alias(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>(), [<a href="typespecs.xhtml#basic-types">atom</a>()], <a href="typespecs.xhtml#built-in-types">keyword</a>()) :: {:alias, <a href="typespecs.xhtml#basic-types">atom</a>()} | :error</pre>

      </div>

<p>Expands an alias given by the alias segments.</p><p>It returns <code class="inline">{:alias, alias}</code> if the segments is a list
of atoms and an alias was found. Returns <code class="inline">:error</code> otherwise.</p><p>This expansion may emit the <code class="inline">:alias_expansion</code> trace event
but it does not emit the <code class="inline">:alias_reference</code> one.</p><h2 id="expand_alias/4-options" class="section-heading"><a href="#expand_alias/4-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</li></ul><h2 id="expand_alias/4-examples" class="section-heading"><a href="#expand_alias/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="kn">alias</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">as</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">MyList</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="8552774287-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8552774287-2">[</samp><samp class="p" data-group-id="8552774287-2">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8552774287-3">[</samp><samp class="ss">:MyList</samp><samp class="p" data-group-id="8552774287-3">]</samp><samp class="p" data-group-id="8552774287-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="8552774287-4">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p" data-group-id="8552774287-4">}</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="8552774287-5">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8552774287-6">[</samp><samp class="p" data-group-id="8552774287-6">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8552774287-7">[</samp><samp class="ss">:MyList</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:Nested</samp><samp class="p" data-group-id="8552774287-7">]</samp><samp class="p" data-group-id="8552774287-5">)</samp><samp class="w">
</samp><samp class="p" data-group-id="8552774287-8">{</samp><samp class="ss">:alias</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">List.Nested</samp><samp class="p" data-group-id="8552774287-8">}</samp></code></pre><p>If there is no alias or the alias starts with <code class="inline">Elixir.</code>
(which disables aliasing), then <code class="inline">:error</code> is returned:</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="kn">alias</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">as</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">MyList</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="7865089681-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7865089681-2">[</samp><samp class="p" data-group-id="7865089681-2">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7865089681-3">[</samp><samp class="ss">:Elixir</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">MyList</samp><samp class="p" data-group-id="7865089681-3">]</samp><samp class="p" data-group-id="7865089681-1">)</samp><samp class="w">
</samp><samp class="ss">:error</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">expand_alias</samp><samp class="p" data-group-id="7865089681-4">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7865089681-5">[</samp><samp class="p" data-group-id="7865089681-5">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="7865089681-6">[</samp><samp class="ss">:AnotherList</samp><samp class="p" data-group-id="7865089681-6">]</samp><samp class="p" data-group-id="7865089681-4">)</samp><samp class="w">
</samp><samp class="ss">:error</samp></code></pre>
  </section>
</section>
<section class="detail" id="expand_import/5">

    <span id="expand_import/4"></span>

  <div class="detail-header">
    <a href="#expand_import/5" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">expand_import(env, meta, name, arity, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L530" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> expand_import(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>(), <a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">arity</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>()) ::
  {:macro, <a href="typespecs.xhtml#built-in-types">module</a>(), (<a href="Macro.xhtml#t:metadata/0">Macro.metadata</a>(), args :: [<a href="Macro.xhtml#t:t/0">Macro.t</a>()] -&gt; <a href="Macro.xhtml#t:t/0">Macro.t</a>())}
  | {:function, <a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#basic-types">atom</a>()}
  | {:error, :not_found | {:conflict, <a href="typespecs.xhtml#built-in-types">module</a>()} | {:ambiguous, [<a href="typespecs.xhtml#built-in-types">module</a>()]}}</pre>

      </div>

<p>Expands an import given by <code class="inline">name</code> and <code class="inline">arity</code>.</p><p>If the import points to a macro, it returns a tuple
with the module and a function that expands the macro.
The function expects the metadata to be attached to the
expansion and the arguments of the macro.</p><p>If the import points to a function, it returns a tuple
with the module and the function name.</p><p>If any import is found, the appropriate compiler tracing
event will be emitted.</p><p>Otherwise returns <code class="inline">{:error, reason}</code>.</p><h2 id="expand_import/5-options" class="section-heading"><a href="#expand_import/5-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><p><code class="inline">:allow_locals</code> - when set to <code class="inline">false</code>, it does not attempt to capture
local macros defined in the current module in <code class="inline">env</code></p></li><li><p><code class="inline">:check_deprecations</code> - when set to <code class="inline">false</code>, does not check for deprecations
when expanding macros</p></li><li><p><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</p></li></ul>
  </section>
</section>
<section class="detail" id="expand_require/6">

    <span id="expand_require/5"></span>

  <div class="detail-header">
    <a href="#expand_require/6" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">expand_require(env, meta, module, name, arity, opts \\ [])</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L585" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> expand_require(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>(), <a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">arity</a>(), <a href="typespecs.xhtml#built-in-types">keyword</a>()) ::
  {:macro, <a href="typespecs.xhtml#built-in-types">module</a>(), (<a href="Macro.xhtml#t:metadata/0">Macro.metadata</a>(), args :: [<a href="Macro.xhtml#t:t/0">Macro.t</a>()] -&gt; <a href="Macro.xhtml#t:t/0">Macro.t</a>())}
  | :error</pre>

      </div>

<p>Expands a require given by <code class="inline">module</code>, <code class="inline">name</code>, and <code class="inline">arity</code>.</p><p>If the require points to a macro and the module has been
required, it returns a tuple with the module and a function
that expands the macro. The function expects the metadata
to be attached to the expansion and the arguments of the macro.
The appropriate <code class="inline">:remote_macro</code> compiler tracing event will
be emitted if a macro is found (note a <code class="inline">:remote_function</code>
event is not emitted in <code class="inline">:error</code> cases).</p><p>Otherwise returns <code class="inline">:error</code>.</p><h2 id="expand_require/6-options" class="section-heading"><a href="#expand_require/6-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><p><code class="inline">:check_deprecations</code> - when set to <code class="inline">false</code>, does not check for deprecations
when expanding macros</p></li><li><p><code class="inline">:trace</code> - when set to <code class="inline">false</code>, it disables compilation tracers and
lexical tracker. This option must only be used by language servers and
other tools that need to introspect code without affecting how it is compiled.
Disabling tracer inside macros or regular code expansion is extremely
discouraged as it blocks the compiler from accurately tracking dependencies</p></li></ul>
  </section>
</section>
<section class="detail" id="has_var?/2">

  <div class="detail-header">
    <a href="#has_var?/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">has_var?(env, var)</h1>

        <span class="note">(since 1.7.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L156" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> has_var?(<a href="#t:t/0">t</a>(), <a href="#t:variable/0">variable</a>()) :: <a href="typespecs.xhtml#built-in-types">boolean</a>()</pre>

      </div>

<p>Checks if a variable belongs to the environment.</p><h2 id="has_var?/2-examples" class="section-heading"><a href="#has_var?/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="n">x</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="mi">13</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="n">x</samp><samp class="w">
</samp><samp class="mi">13</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">has_var?</samp><samp class="p" data-group-id="2891735948-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="2891735948-2">{</samp><samp class="ss">:x</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="no">nil</samp><samp class="p" data-group-id="2891735948-2">}</samp><samp class="p" data-group-id="2891735948-1">)</samp><samp class="w">
</samp><samp class="no">true</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">has_var?</samp><samp class="p" data-group-id="2891735948-3">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="2891735948-4">{</samp><samp class="ss">:unknown</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="no">nil</samp><samp class="p" data-group-id="2891735948-4">}</samp><samp class="p" data-group-id="2891735948-3">)</samp><samp class="w">
</samp><samp class="no">false</samp></code></pre>
  </section>
</section>
<section class="detail" id="in_guard?/1">

  <div class="detail-header">
    <a href="#in_guard?/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">in_guard?(env)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L633" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> in_guard?(<a href="#t:t/0">t</a>()) :: <a href="typespecs.xhtml#built-in-types">boolean</a>()</pre>

      </div>

<p>Returns whether the compilation environment is currently
inside a guard.</p>
  </section>
</section>
<section class="detail" id="in_match?/1">

  <div class="detail-header">
    <a href="#in_match?/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">in_match?(env)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L641" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> in_match?(<a href="#t:t/0">t</a>()) :: <a href="typespecs.xhtml#built-in-types">boolean</a>()</pre>

      </div>

<p>Returns whether the compilation environment is currently
inside a match clause.</p>
  </section>
</section>
<section class="detail" id="location/1">

  <div class="detail-header">
    <a href="#location/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">location(env)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L167" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> location(<a href="#t:t/0">t</a>()) :: <a href="typespecs.xhtml#built-in-types">keyword</a>()</pre>

      </div>

<p>Returns a keyword list containing the file and line
information as keys.</p>
  </section>
</section>
<section class="detail" id="lookup_alias_as/2">

  <div class="detail-header">
    <a href="#lookup_alias_as/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">lookup_alias_as(env, atom)</h1>

        <span class="note">(since 1.15.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L250" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> lookup_alias_as(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#basic-types">atom</a>()) :: [<a href="typespecs.xhtml#basic-types">atom</a>()]</pre>

      </div>

<p>Returns the names of any aliases for the given module or atom.</p><h2 id="lookup_alias_as/2-examples" class="section-heading"><a href="#lookup_alias_as/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="kn">alias</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Bar</samp><samp class="w">
</samp><samp class="nc">Foo.Bar</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_alias_as</samp><samp class="p" data-group-id="0315377724-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="0315377724-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="0315377724-2">[</samp><samp class="nc">Elixir.Bar</samp><samp class="p" data-group-id="0315377724-2">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="kn">alias</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">as</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">Baz</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Baz</samp><samp class="w">
</samp><samp class="nc">Foo.Bar</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_alias_as</samp><samp class="p" data-group-id="0315377724-3">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Foo.Bar</samp><samp class="p" data-group-id="0315377724-3">)</samp><samp class="w">
</samp><samp class="p" data-group-id="0315377724-4">[</samp><samp class="nc">Elixir.Bar</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Elixir.Baz</samp><samp class="p" data-group-id="0315377724-4">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_alias_as</samp><samp class="p" data-group-id="0315377724-5">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Unknown</samp><samp class="p" data-group-id="0315377724-5">)</samp><samp class="w">
</samp><samp class="p" data-group-id="0315377724-6">[</samp><samp class="p" data-group-id="0315377724-6">]</samp></code></pre>
  </section>
</section>
<section class="detail" id="lookup_import/2">

  <div class="detail-header">
    <a href="#lookup_import/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">lookup_import(env, name_arity)</h1>

        <span class="note">(since 1.13.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L217" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> lookup_import(<a href="#t:t/0">t</a>(), <a href="#t:name_arity/0">name_arity</a>()) :: [{:function | :macro, <a href="typespecs.xhtml#built-in-types">module</a>()}]</pre>

      </div>

<p>Returns the modules from which the given <code class="inline">{name, arity}</code> was
imported.</p><p>It returns a list of two element tuples in the shape of
<code class="inline">{:function | :macro, module}</code>. The elements in the list
are in no particular order and the order is not guaranteed.</p><section role="note" class="admonition warning"><h4 class="admonition-title warning">Use only for introspection</h4><p>This function does not emit compiler tracing events,
which may block the compiler from correctly tracking
dependencies. Use this function for reflection purposes
but to do not use it to expand imports into qualified
calls. Instead, use <a href="#expand_import/5"><code class="inline">expand_import/5</code></a>.</p></section><h2 id="lookup_import/2-examples" class="section-heading"><a href="#lookup_import/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3179655657-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-2">{</samp><samp class="ss">:duplicate</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="3179655657-2">}</samp><samp class="p" data-group-id="3179655657-1">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3179655657-3">[</samp><samp class="p" data-group-id="3179655657-3">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="kn">import</samp><samp class="w"> </samp><samp class="nc">Tuple</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">only</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-4">[</samp><samp class="ss">duplicate</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="3179655657-4">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">warn</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">false</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3179655657-5">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-6">{</samp><samp class="ss">:duplicate</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="3179655657-6">}</samp><samp class="p" data-group-id="3179655657-5">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3179655657-7">[</samp><samp class="p" data-group-id="3179655657-8">{</samp><samp class="ss">:function</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Tuple</samp><samp class="p" data-group-id="3179655657-8">}</samp><samp class="p" data-group-id="3179655657-7">]</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="kn">import</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">only</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-9">[</samp><samp class="ss">duplicate</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="3179655657-9">]</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">warn</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">false</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3179655657-10">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-11">{</samp><samp class="ss">:duplicate</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p" data-group-id="3179655657-11">}</samp><samp class="p" data-group-id="3179655657-10">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3179655657-12">[</samp><samp class="p" data-group-id="3179655657-13">{</samp><samp class="ss">:function</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">List</samp><samp class="p" data-group-id="3179655657-13">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-14">{</samp><samp class="ss">:function</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Tuple</samp><samp class="p" data-group-id="3179655657-14">}</samp><samp class="p" data-group-id="3179655657-12">]</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">lookup_import</samp><samp class="p" data-group-id="3179655657-15">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="3179655657-16">{</samp><samp class="ss">:def</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="3179655657-16">}</samp><samp class="p" data-group-id="3179655657-15">)</samp><samp class="w">
</samp><samp class="p" data-group-id="3179655657-17">[</samp><samp class="p" data-group-id="3179655657-18">{</samp><samp class="ss">:macro</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Kernel</samp><samp class="p" data-group-id="3179655657-18">}</samp><samp class="p" data-group-id="3179655657-17">]</samp></code></pre>
  </section>
</section>
<section class="detail" id="prepend_tracer/2">

  <div class="detail-header">
    <a href="#prepend_tracer/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prepend_tracer(env, tracer)</h1>

        <span class="note">(since 1.13.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L287" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> prepend_tracer(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#built-in-types">module</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Prepend a tracer to the list of tracers in the environment.</p><h2 id="prepend_tracer/2-examples" class="section-heading"><a href="#prepend_tracer/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">prepend_tracer</samp><samp class="p" data-group-id="8021971138-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">MyCustomTracer</samp><samp class="p" data-group-id="8021971138-1">)</samp></code></pre>
  </section>
</section>
<section class="detail" id="prune_compile_info/1">

  <div class="detail-header">
    <a href="#prune_compile_info/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">prune_compile_info(env)</h1>

        <span class="note">(since 1.14.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L120" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> prune_compile_info(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Prunes compile information from the environment.</p><p>This happens when the environment is captured at compilation
time, for example, in the module body, and then used to
evaluate code after the module has been defined.</p>
  </section>
</section>
<section class="detail" id="required?/2">

  <div class="detail-header">
    <a href="#required?/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">required?(env, module)</h1>

        <span class="note">(since 1.13.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L272" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> required?(<a href="#t:t/0">t</a>(), <a href="typespecs.xhtml#built-in-types">module</a>()) :: <a href="typespecs.xhtml#built-in-types">boolean</a>()</pre>

      </div>

<p>Returns <code class="inline">true</code> if the given module has been required.</p><h2 id="required?/2-examples" class="section-heading"><a href="#required?/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">required?</samp><samp class="p" data-group-id="3700816213-1">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="3700816213-1">)</samp><samp class="w">
</samp><samp class="no">false</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="kn">require</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">required?</samp><samp class="p" data-group-id="3700816213-2">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Integer</samp><samp class="p" data-group-id="3700816213-2">)</samp><samp class="w">
</samp><samp class="no">true</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Macro.Env</samp><samp class="o">.</samp><samp class="n">required?</samp><samp class="p" data-group-id="3700816213-3">(</samp><samp class="bp">__ENV__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Kernel</samp><samp class="p" data-group-id="3700816213-3">)</samp><samp class="w">
</samp><samp class="no">true</samp></code></pre>
  </section>
</section>
<section class="detail" id="stacktrace/1">

  <div class="detail-header">
    <a href="#stacktrace/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stacktrace(env)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L648" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> stacktrace(<a href="#t:t/0">t</a>()) :: <a href="typespecs.xhtml#built-in-types">list</a>()</pre>

      </div>

<p>Returns the environment stacktrace.</p>
  </section>
</section>
<section class="detail" id="to_guard/1">

  <div class="detail-header">
    <a href="#to_guard/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">to_guard(env)</h1>

        <span class="note">(since 1.17.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L616" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> to_guard(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Returns an environment in the guard context.</p>
  </section>
</section>
<section class="detail" id="to_match/1">

  <div class="detail-header">
    <a href="#to_match/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">to_match(env)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L624" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> to_match(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Returns an environment in the match context.</p>
  </section>
</section>
<section class="detail" id="vars/1">

  <div class="detail-header">
    <a href="#vars/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">vars(env)</h1>

        <span class="note">(since 1.7.0)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/macro/env.ex#L134" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> vars(<a href="#t:t/0">t</a>()) :: [<a href="#t:variable/0">variable</a>()]</pre>

      </div>

<p>Returns a list of variables in the current environment.</p><p>Each variable is identified by a tuple of two elements,
where the first element is the variable name as an atom
and the second element is its context, which may be an
atom or an integer.</p>
  </section>
</section>

        </div>
      </section>


  </body>
</html>
