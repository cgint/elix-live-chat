<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>GenServer - Elixir v1.18.4</title>
    <meta name="generator" content="ExDoc v0.38.2" />
    <link type="text/css" rel="stylesheet" href="dist/epub-elixir-FNUUKFP7.css" />
    <script src="dist/epub-4WIP524F.js"></script>

  </head>
  <body class="content-inner">

    <h1 id="content">
GenServer <small>behaviour</small>
    </h1>


      <section id="moduledoc" class="docstring">
<p>A behaviour module for implementing the server of a client-server relation.</p><p>A GenServer is a process like any other Elixir process and it can be used
to keep state, execute code asynchronously and so on. The advantage of using
a generic server process (GenServer) implemented using this module is that it
will have a standard set of interface functions and include functionality for
tracing and error reporting. It will also fit into a supervision tree.</p><pre><code class="mermaid">graph BT
    C(Client #3) ~~~ B(Client #2) ~~~ A(Client #1)
    A &amp; B &amp; C --&gt;|request| GenServer
    GenServer -.-&gt;|reply| A &amp; B &amp; C</code></pre><h2 id="module-example">Example</h2><p>The GenServer behaviour abstracts the common client-server interaction.
Developers are only required to implement the callbacks and functionality
they are interested in.</p><p>Let's start with a code example and then explore the available callbacks.
Imagine we want to implement a service with a GenServer that works
like a stack, allowing us to push and pop elements. We'll customize a
generic GenServer with our own module by implementing three callbacks.</p><p><a href="#c:init/1"><code class="inline">init/1</code></a> transforms our initial argument to the initial state for the
GenServer. <a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> fires when the server receives a synchronous
<code class="inline">pop</code> message, popping an element from the stack and returning it to the
user. <a href="#c:handle_cast/2"><code class="inline">handle_cast/2</code></a> will fire when the server receives an asynchronous
<code class="inline">push</code> message, pushing an element onto the stack:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">defmodule</samp><samp class="w"> </samp><samp class="nc">Stack</samp><samp class="w"> </samp><samp class="k" data-group-id="9155331044-1">do</samp><samp class="w">
  </samp><samp class="kn">use</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="w">

  </samp><samp class="c1"># Callbacks</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">init</samp><samp class="p" data-group-id="9155331044-2">(</samp><samp class="n">elements</samp><samp class="p" data-group-id="9155331044-2">)</samp><samp class="w"> </samp><samp class="k" data-group-id="9155331044-3">do</samp><samp class="w">
    </samp><samp class="n">initial_state</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">String</samp><samp class="o">.</samp><samp class="n">split</samp><samp class="p" data-group-id="9155331044-4">(</samp><samp class="n">elements</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;,&quot;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">trim</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="p" data-group-id="9155331044-4">)</samp><samp class="w">
    </samp><samp class="p" data-group-id="9155331044-5">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">initial_state</samp><samp class="p" data-group-id="9155331044-5">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="9155331044-3">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_call</samp><samp class="p" data-group-id="9155331044-6">(</samp><samp class="ss">:pop</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="c">_from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="9155331044-6">)</samp><samp class="w"> </samp><samp class="k" data-group-id="9155331044-7">do</samp><samp class="w">
    </samp><samp class="p" data-group-id="9155331044-8">[</samp><samp class="n">to_caller</samp><samp class="w"> </samp><samp class="o">|</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="9155331044-8">]</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="w">
    </samp><samp class="p" data-group-id="9155331044-9">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">to_caller</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="9155331044-9">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="9155331044-7">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_cast</samp><samp class="p" data-group-id="9155331044-10">(</samp><samp class="p" data-group-id="9155331044-11">{</samp><samp class="ss">:push</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">element</samp><samp class="p" data-group-id="9155331044-11">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="9155331044-10">)</samp><samp class="w"> </samp><samp class="k" data-group-id="9155331044-12">do</samp><samp class="w">
    </samp><samp class="n">new_state</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="p" data-group-id="9155331044-13">[</samp><samp class="n">element</samp><samp class="w"> </samp><samp class="o">|</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="9155331044-13">]</samp><samp class="w">
    </samp><samp class="p" data-group-id="9155331044-14">{</samp><samp class="ss">:noreply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="9155331044-14">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="9155331044-12">end</samp><samp class="w">
</samp><samp class="k" data-group-id="9155331044-1">end</samp></code></pre><p>We leave the process machinery of startup, message passing, and the message
loop to the GenServer behaviour and focus only on the stack
implementation. We can now use the GenServer API to interact with
the service by creating a process and sending it messages:</p><pre><code class="makeup elixir" translate="no"><samp class="c1"># Start the server</samp><samp class="w">
</samp><samp class="p" data-group-id="6636671074-1">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">pid</samp><samp class="p" data-group-id="6636671074-1">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="6636671074-2">(</samp><samp class="nc">Stack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;hello,world&quot;</samp><samp class="p" data-group-id="6636671074-2">)</samp><samp class="w">

</samp><samp class="c1"># This is the client</samp><samp class="w">
</samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="6636671074-3">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:pop</samp><samp class="p" data-group-id="6636671074-3">)</samp><samp class="w">
</samp><samp class="c1">#=&gt; &quot;hello&quot;</samp><samp class="w">

</samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">cast</samp><samp class="p" data-group-id="6636671074-4">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6636671074-5">{</samp><samp class="ss">:push</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;elixir&quot;</samp><samp class="p" data-group-id="6636671074-5">}</samp><samp class="p" data-group-id="6636671074-4">)</samp><samp class="w">
</samp><samp class="c1">#=&gt; :ok</samp><samp class="w">

</samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="6636671074-6">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:pop</samp><samp class="p" data-group-id="6636671074-6">)</samp><samp class="w">
</samp><samp class="c1">#=&gt; &quot;elixir&quot;</samp></code></pre><p>We start our <code class="inline">Stack</code> by calling <a href="#start_link/2"><code class="inline">start_link/2</code></a>, passing the module
with the server implementation and its initial argument with a
comma-separated list of elements. The GenServer behaviour calls the
<a href="#c:init/1"><code class="inline">init/1</code></a> callback to establish the initial GenServer state. From
this point on, the GenServer has control so we interact with it by
sending two types of messages on the client. <strong>call</strong> messages expect
a reply from the server (and are therefore synchronous) while <strong>cast</strong>
messages do not.</p><p>Each call to <a href="#call/3"><code class="inline">GenServer.call/3</code></a> results in a message
that must be handled by the <a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> callback in the GenServer.
A <a href="#cast/2"><code class="inline">cast/2</code></a> message must be handled by <a href="#c:handle_cast/2"><code class="inline">handle_cast/2</code></a>. <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>
supports 8 callbacks, but only <a href="#c:init/1"><code class="inline">init/1</code></a> is required.</p><section role="note" class="admonition info"><h4 class="admonition-title info"><code class="inline">use GenServer</code></h4><p>When you <code class="inline">use GenServer</code>, the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> module will
set <code class="inline">@behaviour GenServer</code> and define a <code class="inline">child_spec/1</code>
function, so your module can be used as a child
in a supervision tree.</p></section><h2 id="module-client-server-apis">Client / Server APIs</h2><p>Although in the example above we have used <a href="#start_link/3"><code class="inline">GenServer.start_link/3</code></a> and
friends to directly start and communicate with the server, most of the
time we don't call the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> functions directly. Instead, we wrap
the calls in new functions representing the public API of the server.
These thin wrappers are called the <strong>client API</strong>.</p><p>Here is a better implementation of our Stack module:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">defmodule</samp><samp class="w"> </samp><samp class="nc">Stack</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-1">do</samp><samp class="w">
  </samp><samp class="kn">use</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="w">

  </samp><samp class="c1"># Client</samp><samp class="w">

  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">start_link</samp><samp class="p" data-group-id="5339553286-2">(</samp><samp class="n">default</samp><samp class="p" data-group-id="5339553286-2">)</samp><samp class="w"> </samp><samp class="ow">when</samp><samp class="w"> </samp><samp class="n">is_binary</samp><samp class="p" data-group-id="5339553286-3">(</samp><samp class="n">default</samp><samp class="p" data-group-id="5339553286-3">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-4">do</samp><samp class="w">
    </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="5339553286-5">(</samp><samp class="bp">__MODULE__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">default</samp><samp class="p" data-group-id="5339553286-5">)</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-4">end</samp><samp class="w">

  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">push</samp><samp class="p" data-group-id="5339553286-6">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">element</samp><samp class="p" data-group-id="5339553286-6">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-7">do</samp><samp class="w">
    </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">cast</samp><samp class="p" data-group-id="5339553286-8">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="5339553286-9">{</samp><samp class="ss">:push</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">element</samp><samp class="p" data-group-id="5339553286-9">}</samp><samp class="p" data-group-id="5339553286-8">)</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-7">end</samp><samp class="w">

  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">pop</samp><samp class="p" data-group-id="5339553286-10">(</samp><samp class="n">pid</samp><samp class="p" data-group-id="5339553286-10">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-11">do</samp><samp class="w">
    </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="5339553286-12">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:pop</samp><samp class="p" data-group-id="5339553286-12">)</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-11">end</samp><samp class="w">

  </samp><samp class="c1"># Server (callbacks)</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">init</samp><samp class="p" data-group-id="5339553286-13">(</samp><samp class="n">elements</samp><samp class="p" data-group-id="5339553286-13">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-14">do</samp><samp class="w">
    </samp><samp class="n">initial_state</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">String</samp><samp class="o">.</samp><samp class="n">split</samp><samp class="p" data-group-id="5339553286-15">(</samp><samp class="n">elements</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;,&quot;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">trim</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="p" data-group-id="5339553286-15">)</samp><samp class="w">
    </samp><samp class="p" data-group-id="5339553286-16">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">initial_state</samp><samp class="p" data-group-id="5339553286-16">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-14">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_call</samp><samp class="p" data-group-id="5339553286-17">(</samp><samp class="ss">:pop</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="c">_from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="5339553286-17">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-18">do</samp><samp class="w">
    </samp><samp class="p" data-group-id="5339553286-19">[</samp><samp class="n">to_caller</samp><samp class="w"> </samp><samp class="o">|</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="5339553286-19">]</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="w">
    </samp><samp class="p" data-group-id="5339553286-20">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">to_caller</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="5339553286-20">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-18">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_cast</samp><samp class="p" data-group-id="5339553286-21">(</samp><samp class="p" data-group-id="5339553286-22">{</samp><samp class="ss">:push</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">element</samp><samp class="p" data-group-id="5339553286-22">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="5339553286-21">)</samp><samp class="w"> </samp><samp class="k" data-group-id="5339553286-23">do</samp><samp class="w">
    </samp><samp class="n">new_state</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="p" data-group-id="5339553286-24">[</samp><samp class="n">element</samp><samp class="w"> </samp><samp class="o">|</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="5339553286-24">]</samp><samp class="w">
    </samp><samp class="p" data-group-id="5339553286-25">{</samp><samp class="ss">:noreply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">new_state</samp><samp class="p" data-group-id="5339553286-25">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="5339553286-23">end</samp><samp class="w">
</samp><samp class="k" data-group-id="5339553286-1">end</samp></code></pre><p>In practice, it is common to have both server and client functions in
the same module. If the server and/or client implementations are growing
complex, you may want to have them in different modules.</p><p>The following diagram summarizes the interactions between client and server.
Both Client and Server are processes and communication happens via messages
(continuous line). The Server &lt;-&gt; Module interaction happens when the
GenServer process calls your code (dotted lines):</p><pre><code class="mermaid">sequenceDiagram
    participant C as Client (Process)
    participant S as Server (Process)
    participant M as Module (Code)

    note right of C: Typically started by a supervisor
    C-&gt;&gt;+S: GenServer.start_link(module, arg, options)
    S--&gt;&gt;+M: init(arg)
    M--&gt;&gt;-S: {:ok, state} | :ignore | {:error, reason}
    S-&gt;&gt;-C: {:ok, pid} | :ignore | {:error, reason}

    note right of C: call is synchronous
    C-&gt;&gt;+S: GenServer.call(pid, message)
    S--&gt;&gt;+M: handle_call(message, from, state)
    M--&gt;&gt;-S: {:reply, reply, state} | {:stop, reason, reply, state}
    S-&gt;&gt;-C: reply

    note right of C: cast is asynchronous
    C-)S: GenServer.cast(pid, message)
    S--&gt;&gt;+M: handle_cast(message, state)
    M--&gt;&gt;-S: {:noreply, state} | {:stop, reason, state}

    note right of C: send is asynchronous
    C-)S: Kernel.send(pid, message)
    S--&gt;&gt;+M: handle_info(message, state)
    M--&gt;&gt;-S: {:noreply, state} | {:stop, reason, state}</code></pre><h2 id="module-how-to-supervise">How to supervise</h2><p>A <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> is most commonly started under a supervision tree.
When we invoke <code class="inline">use GenServer</code>, it automatically defines a <code class="inline">child_spec/1</code>
function that allows us to start the <code class="inline">Stack</code> directly under a supervisor.
To start a default stack of <code class="inline">[&quot;hello&quot;, &quot;world&quot;]</code> under a supervisor,
we can do:</p><pre><code class="makeup elixir" translate="no"><samp class="n">children</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="p" data-group-id="2511028370-1">[</samp><samp class="w">
  </samp><samp class="p" data-group-id="2511028370-2">{</samp><samp class="nc">Stack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;hello,world&quot;</samp><samp class="p" data-group-id="2511028370-2">}</samp><samp class="w">
</samp><samp class="p" data-group-id="2511028370-1">]</samp><samp class="w">

</samp><samp class="nc">Supervisor</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="2511028370-3">(</samp><samp class="n">children</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">strategy</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="ss">:one_for_all</samp><samp class="p" data-group-id="2511028370-3">)</samp></code></pre><p>Note that specifying a module <code class="inline">MyServer</code> would be the same as specifying
the  tuple <code class="inline">{MyServer, []}</code>.</p><p><code class="inline">use GenServer</code> also accepts a list of options which configures the
child specification and therefore how it runs under a supervisor.
The generated <code class="inline">child_spec/1</code> can be customized with the following options:</p><ul><li><code class="inline">:id</code> - the child specification identifier, defaults to the current module</li><li><code class="inline">:restart</code> - when the child should be restarted, defaults to <code class="inline">:permanent</code></li><li><code class="inline">:shutdown</code> - how to shut down the child, either immediately or by giving it time to shut down</li></ul><p>For example:</p><pre><code class="makeup elixir" translate="no"><samp class="kn">use</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">restart</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="ss">:transient</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">shutdown</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">10_000</samp></code></pre><p>See the &quot;Child specification&quot; section in the <a href="Supervisor.xhtml"><code class="inline">Supervisor</code></a> module for more
detailed information. The <code class="inline">@doc</code> annotation immediately preceding
<code class="inline">use GenServer</code> will be attached to the generated <code class="inline">child_spec/1</code> function.</p><p>When stopping the GenServer, for example by returning a <code class="inline">{:stop, reason, new_state}</code>
tuple from a callback, the exit reason is used by the supervisor to determine
whether the GenServer needs to be restarted. See the &quot;Exit reasons and restarts&quot;
section in the <a href="Supervisor.xhtml"><code class="inline">Supervisor</code></a> module.</p><h2 id="module-name-registration">Name registration</h2><p>Both <a href="#start_link/3"><code class="inline">start_link/3</code></a> and <a href="#start/3"><code class="inline">start/3</code></a> support the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> to register
a name on start via the <code class="inline">:name</code> option. Registered names are also
automatically cleaned up on termination. The supported values are:</p><ul><li><p>an atom - the GenServer is registered locally (to the current node)
with the given name using <a href="Process.xhtml#register/2"><code class="inline">Process.register/2</code></a>.</p></li><li><p><code class="inline">{:global, term}</code> - the GenServer is registered globally with the given
term using the functions in the <a href="https://www.erlang.org/doc/apps/kernel/global.html"><code class="inline">:global</code> module</a>.</p></li><li><p><code class="inline">{:via, module, term}</code> - the GenServer is registered with the given
mechanism and name. The <code class="inline">:via</code> option expects a module that exports
<code class="inline">register_name/2</code>, <code class="inline">unregister_name/1</code>, <code class="inline">whereis_name/1</code> and <a href="Kernel.xhtml#send/2"><code class="inline">send/2</code></a>.
One such example is the <a href="https://www.erlang.org/doc/apps/kernel/global.html"><code class="inline">:global</code> module</a> which uses these functions
for keeping the list of names of processes and their associated PIDs
that are available globally for a network of Elixir nodes. Elixir also
ships with a local, decentralized and scalable registry called <a href="Registry.xhtml"><code class="inline">Registry</code></a>
for locally storing names that are generated dynamically.</p></li></ul><p>For example, we could start and register our <code class="inline">Stack</code> server locally as follows:</p><pre><code class="makeup elixir" translate="no"><samp class="c1"># Start the server and register it locally with name MyStack</samp><samp class="w">
</samp><samp class="p" data-group-id="8650575822-1">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="bp">_</samp><samp class="p" data-group-id="8650575822-1">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="8650575822-2">(</samp><samp class="nc">Stack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;hello&quot;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">name</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="nc">MyStack</samp><samp class="p" data-group-id="8650575822-2">)</samp><samp class="w">

</samp><samp class="c1"># Now messages can be sent directly to MyStack</samp><samp class="w">
</samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="8650575822-3">(</samp><samp class="nc">MyStack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:pop</samp><samp class="p" data-group-id="8650575822-3">)</samp><samp class="w">
</samp><samp class="c1">#=&gt; &quot;hello&quot;</samp></code></pre><p>Once the server is started, the remaining functions in this module (<a href="#call/3"><code class="inline">call/3</code></a>,
<a href="#cast/2"><code class="inline">cast/2</code></a>, and friends) will also accept an atom, or any <code class="inline">{:global, ...}</code> or
<code class="inline">{:via, ...}</code> tuples. In general, the following formats are supported:</p><ul><li>a PID</li><li>an atom if the server is locally registered</li><li><code class="inline">{atom, node}</code> if the server is locally registered at another node</li><li><code class="inline">{:global, term}</code> if the server is globally registered</li><li><code class="inline">{:via, module, name}</code> if the server is registered through an alternative
registry</li></ul><p>If there is an interest to register dynamic names locally, do not use
atoms, as atoms are never garbage-collected and therefore dynamically
generated atoms won't be garbage-collected. For such cases, you can
set up your own local registry by using the <a href="Registry.xhtml"><code class="inline">Registry</code></a> module.</p><h2 id="module-receiving-regular-messages">Receiving &quot;regular&quot; messages</h2><p>The goal of a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> is to abstract the &quot;receive&quot; loop for developers,
automatically handling system messages, supporting code change, synchronous
calls and more. Therefore, you should never call your own &quot;receive&quot; inside
the GenServer callbacks as doing so will cause the GenServer to misbehave.</p><p>Besides the synchronous and asynchronous communication provided by <a href="#call/3"><code class="inline">call/3</code></a>
and <a href="#cast/2"><code class="inline">cast/2</code></a>, &quot;regular&quot; messages sent by functions such as <a href="Kernel.xhtml#send/2"><code class="inline">send/2</code></a>,
<a href="Process.xhtml#send_after/4"><code class="inline">Process.send_after/4</code></a> and similar, can be handled inside the <a href="#c:handle_info/2"><code class="inline">handle_info/2</code></a>
callback.</p><p><a href="#c:handle_info/2"><code class="inline">handle_info/2</code></a> can be used in many situations, such as handling monitor
DOWN messages sent by <a href="Process.xhtml#monitor/1"><code class="inline">Process.monitor/1</code></a>. Another use case for <a href="#c:handle_info/2"><code class="inline">handle_info/2</code></a>
is to perform periodic work, with the help of <a href="Process.xhtml#send_after/4"><code class="inline">Process.send_after/4</code></a>:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">defmodule</samp><samp class="w"> </samp><samp class="nc">MyApp.Periodically</samp><samp class="w"> </samp><samp class="k" data-group-id="4132723738-1">do</samp><samp class="w">
  </samp><samp class="kn">use</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="w">

  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">start_link</samp><samp class="p" data-group-id="4132723738-2">(</samp><samp class="bp">_</samp><samp class="p" data-group-id="4132723738-2">)</samp><samp class="w"> </samp><samp class="k" data-group-id="4132723738-3">do</samp><samp class="w">
    </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="4132723738-4">(</samp><samp class="bp">__MODULE__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="4132723738-5">%{</samp><samp class="p" data-group-id="4132723738-5">}</samp><samp class="p" data-group-id="4132723738-4">)</samp><samp class="w">
  </samp><samp class="k" data-group-id="4132723738-3">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">init</samp><samp class="p" data-group-id="4132723738-6">(</samp><samp class="n">state</samp><samp class="p" data-group-id="4132723738-6">)</samp><samp class="w"> </samp><samp class="k" data-group-id="4132723738-7">do</samp><samp class="w">
    </samp><samp class="c1"># Schedule work to be performed on start</samp><samp class="w">
    </samp><samp class="n">schedule_work</samp><samp class="p" data-group-id="4132723738-8">(</samp><samp class="p" data-group-id="4132723738-8">)</samp><samp class="w">

    </samp><samp class="p" data-group-id="4132723738-9">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="4132723738-9">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="4132723738-7">end</samp><samp class="w">

  </samp><samp class="na">@impl</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="w">
  </samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_info</samp><samp class="p" data-group-id="4132723738-10">(</samp><samp class="ss">:work</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="4132723738-10">)</samp><samp class="w"> </samp><samp class="k" data-group-id="4132723738-11">do</samp><samp class="w">
    </samp><samp class="c1"># Do the desired work here</samp><samp class="w">
    </samp><samp class="c1"># ...</samp><samp class="w">

    </samp><samp class="c1"># Reschedule once more</samp><samp class="w">
    </samp><samp class="n">schedule_work</samp><samp class="p" data-group-id="4132723738-12">(</samp><samp class="p" data-group-id="4132723738-12">)</samp><samp class="w">

    </samp><samp class="p" data-group-id="4132723738-13">{</samp><samp class="ss">:noreply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="4132723738-13">}</samp><samp class="w">
  </samp><samp class="k" data-group-id="4132723738-11">end</samp><samp class="w">

  </samp><samp class="kd">defp</samp><samp class="w"> </samp><samp class="nf">schedule_work</samp><samp class="w"> </samp><samp class="k" data-group-id="4132723738-14">do</samp><samp class="w">
    </samp><samp class="c1"># We schedule the work to happen in 2 hours (written in milliseconds).</samp><samp class="w">
    </samp><samp class="c1"># Alternatively, one might write :timer.hours(2)</samp><samp class="w">
    </samp><samp class="nc">Process</samp><samp class="o">.</samp><samp class="n">send_after</samp><samp class="p" data-group-id="4132723738-15">(</samp><samp class="n">self</samp><samp class="p" data-group-id="4132723738-16">(</samp><samp class="p" data-group-id="4132723738-16">)</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:work</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="w"> </samp><samp class="o">*</samp><samp class="w"> </samp><samp class="mi">60</samp><samp class="w"> </samp><samp class="o">*</samp><samp class="w"> </samp><samp class="mi">60</samp><samp class="w"> </samp><samp class="o">*</samp><samp class="w"> </samp><samp class="mi">1000</samp><samp class="p" data-group-id="4132723738-15">)</samp><samp class="w">
  </samp><samp class="k" data-group-id="4132723738-14">end</samp><samp class="w">
</samp><samp class="k" data-group-id="4132723738-1">end</samp></code></pre><h2 id="module-timeouts">Timeouts</h2><p>The return value of <a href="#c:init/1"><code class="inline">init/1</code></a> or any of the <code class="inline">handle_*</code> callbacks may include
a timeout value in milliseconds; if not, <code class="inline">:infinity</code> is assumed.
The timeout can be used to detect a lull in incoming messages.</p><p>The <code class="inline">timeout()</code> value is used as follows:</p><ul><li><p>If the process has any message already waiting when the <code class="inline">timeout()</code> value
is returned, the timeout is ignored and the waiting message is handled as
usual. This means that even a timeout of <code class="inline">0</code> milliseconds is not guaranteed
to execute (if you want to take another action immediately and unconditionally,
use a <code class="inline">:continue</code> instruction instead).</p></li><li><p>If any message arrives before the specified number of milliseconds
elapse, the timeout is cleared and that message is handled as usual.</p></li><li><p>Otherwise, when the specified number of milliseconds have elapsed with no
message arriving, <code class="inline">handle_info/2</code> is called with <code class="inline">:timeout</code> as the first
argument.</p></li></ul><h2 id="module-when-not-to-use-a-genserver">When (not) to use a GenServer</h2><p>So far, we have learned that a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> can be used as a supervised process
that handles sync and async calls. It can also handle system messages, such as
periodic messages and monitoring events. GenServer processes may also be named.</p><p>A GenServer, or a process in general, must be used to model runtime characteristics
of your system. A GenServer must never be used for code organization purposes.</p><p>In Elixir, code organization is done by modules and functions, processes are not
necessary. For example, imagine you are implementing a calculator and you decide
to put all the calculator operations behind a GenServer:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">add</samp><samp class="p" data-group-id="0714625349-1">(</samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-1">)</samp><samp class="w"> </samp><samp class="k" data-group-id="0714625349-2">do</samp><samp class="w">
  </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="0714625349-3">(</samp><samp class="bp">__MODULE__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="0714625349-4">{</samp><samp class="ss">:add</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-4">}</samp><samp class="p" data-group-id="0714625349-3">)</samp><samp class="w">
</samp><samp class="k" data-group-id="0714625349-2">end</samp><samp class="w">

</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">subtract</samp><samp class="p" data-group-id="0714625349-5">(</samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-5">)</samp><samp class="w"> </samp><samp class="k" data-group-id="0714625349-6">do</samp><samp class="w">
  </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">call</samp><samp class="p" data-group-id="0714625349-7">(</samp><samp class="bp">__MODULE__</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="0714625349-8">{</samp><samp class="ss">:subtract</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-8">}</samp><samp class="p" data-group-id="0714625349-7">)</samp><samp class="w">
</samp><samp class="k" data-group-id="0714625349-6">end</samp><samp class="w">

</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_call</samp><samp class="p" data-group-id="0714625349-9">(</samp><samp class="p" data-group-id="0714625349-10">{</samp><samp class="ss">:add</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-10">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="c">_from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="0714625349-9">)</samp><samp class="w"> </samp><samp class="k" data-group-id="0714625349-11">do</samp><samp class="w">
  </samp><samp class="p" data-group-id="0714625349-12">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="w"> </samp><samp class="o">+</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="0714625349-12">}</samp><samp class="w">
</samp><samp class="k" data-group-id="0714625349-11">end</samp><samp class="w">

</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_call</samp><samp class="p" data-group-id="0714625349-13">(</samp><samp class="p" data-group-id="0714625349-14">{</samp><samp class="ss">:subtract</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="0714625349-14">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="c">_from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="0714625349-13">)</samp><samp class="w"> </samp><samp class="k" data-group-id="0714625349-15">do</samp><samp class="w">
  </samp><samp class="p" data-group-id="0714625349-16">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">a</samp><samp class="w"> </samp><samp class="o">-</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="0714625349-16">}</samp><samp class="w">
</samp><samp class="k" data-group-id="0714625349-15">end</samp></code></pre><p>This is an anti-pattern not only because it convolutes the calculator logic but
also because you put the calculator logic behind a single process that will
potentially become a bottleneck in your system, especially as the number of
calls grow. Instead just define the functions directly:</p><pre><code class="makeup elixir" translate="no"><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">add</samp><samp class="p" data-group-id="4723844175-1">(</samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="4723844175-1">)</samp><samp class="w"> </samp><samp class="k" data-group-id="4723844175-2">do</samp><samp class="w">
  </samp><samp class="n">a</samp><samp class="w"> </samp><samp class="o">+</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="w">
</samp><samp class="k" data-group-id="4723844175-2">end</samp><samp class="w">

</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">subtract</samp><samp class="p" data-group-id="4723844175-3">(</samp><samp class="n">a</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="p" data-group-id="4723844175-3">)</samp><samp class="w"> </samp><samp class="k" data-group-id="4723844175-4">do</samp><samp class="w">
  </samp><samp class="n">a</samp><samp class="w"> </samp><samp class="o">-</samp><samp class="w"> </samp><samp class="n">b</samp><samp class="w">
</samp><samp class="k" data-group-id="4723844175-4">end</samp></code></pre><p>If you don't need a process, then you don't need a process. Use processes only to
model runtime properties, such as mutable state, concurrency and failures, never
for code organization.</p><h2 id="module-debugging-with-the-sys-module">Debugging with the :sys module</h2><p>GenServers, as <a href="https://www.erlang.org/doc/design_principles/spec_proc.html">special processes</a>,
can be debugged using the <a href="https://www.erlang.org/doc/apps/stdlib/sys.html"><code class="inline">:sys</code> module</a>.
Through various hooks, this module allows developers to introspect the state of
the process and trace system events that happen during its execution, such as
received messages, sent replies and state changes.</p><p>Let's explore the basic functions from the
<a href="https://www.erlang.org/doc/apps/stdlib/sys.html"><code class="inline">:sys</code> module</a> used for debugging:</p><ul><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#get_state/2"><code class="inline">:sys.get_state/2</code></a> - allows retrieval of the state of the process.
In the case of a GenServer process, it will be the callback module state,
as passed into the callback functions as last argument.</li><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#get_status/2"><code class="inline">:sys.get_status/2</code></a> - allows retrieval of the status of the process.
This status includes the process dictionary, if the process is running
or is suspended, the parent PID, the debugger state, and the state of
the behaviour module, which includes the callback module state
(as returned by <a href="https://www.erlang.org/doc/apps/stdlib/sys.html#get_state/2"><code class="inline">:sys.get_state/2</code></a>). It's possible to change how this
status is represented by defining the optional <a href="#c:format_status/1"><code class="inline">GenServer.format_status/1</code></a>
callback.</li><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#trace/3"><code class="inline">:sys.trace/3</code></a> - prints all the system events to <code class="inline">:stdio</code>.</li><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#statistics/3"><code class="inline">:sys.statistics/3</code></a> - manages collection of process statistics.</li><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#no_debug/2"><code class="inline">:sys.no_debug/2</code></a> - turns off all debug handlers for the given process.
It is very important to switch off debugging once we're done. Excessive
debug handlers or those that should be turned off, but weren't, can
seriously damage the performance of the system.</li><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#suspend/2"><code class="inline">:sys.suspend/2</code></a> - allows to suspend a process so that it only
replies to system messages but no other messages. A suspended process
can be reactivated via <a href="https://www.erlang.org/doc/apps/stdlib/sys.html#resume/2"><code class="inline">:sys.resume/2</code></a>.</li></ul><p>Let's see how we could use those functions for debugging the stack server
we defined earlier.</p><pre><code class="makeup elixir" translate="no"><samp class="gp unselectable">iex&gt; </samp><samp class="p" data-group-id="9545360225-1">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">pid</samp><samp class="p" data-group-id="9545360225-1">}</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Stack</samp><samp class="o">.</samp><samp class="n">start_link</samp><samp class="p" data-group-id="9545360225-2">(</samp><samp class="s">&quot;&quot;</samp><samp class="p" data-group-id="9545360225-2">)</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">statistics</samp><samp class="p" data-group-id="9545360225-3">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="p" data-group-id="9545360225-3">)</samp><samp class="w"> </samp><samp class="c1"># turn on collecting process statistics</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">trace</samp><samp class="p" data-group-id="9545360225-4">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="no">true</samp><samp class="p" data-group-id="9545360225-4">)</samp><samp class="w"> </samp><samp class="c1"># turn on event printing</samp><samp class="w">
</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Stack</samp><samp class="o">.</samp><samp class="n">push</samp><samp class="p" data-group-id="9545360225-5">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-5">)</samp><samp class="w">
</samp><samp class="o">*</samp><samp class="nc">DBG</samp><samp class="o">*</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.122</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="w"> </samp><samp class="n">got</samp><samp class="w"> </samp><samp class="n">cast</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-6">{</samp><samp class="n">push</samp><samp class="p">,</samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-6">}</samp><samp class="w">
</samp><samp class="o">*</samp><samp class="nc">DBG</samp><samp class="o">*</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.122</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="w"> </samp><samp class="n">new</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-7">[</samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-7">]</samp><samp class="w">
</samp><samp class="ss">:ok</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">get_state</samp><samp class="p" data-group-id="9545360225-8">(</samp><samp class="n">pid</samp><samp class="p" data-group-id="9545360225-8">)</samp><samp class="w">
</samp><samp class="p" data-group-id="9545360225-9">[</samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-9">]</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">Stack</samp><samp class="o">.</samp><samp class="n">pop</samp><samp class="p" data-group-id="9545360225-10">(</samp><samp class="n">pid</samp><samp class="p" data-group-id="9545360225-10">)</samp><samp class="w">
</samp><samp class="o">*</samp><samp class="nc">DBG</samp><samp class="o">*</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.122</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="w"> </samp><samp class="n">got</samp><samp class="w"> </samp><samp class="n">call</samp><samp class="w"> </samp><samp class="n">pop</samp><samp class="w"> </samp><samp class="n">from</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.80</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="w">
</samp><samp class="o">*</samp><samp class="nc">DBG</samp><samp class="o">*</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.122</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="w"> </samp><samp class="n">sent</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="w"> </samp><samp class="n">to</samp><samp class="w"> </samp><samp class="o">&lt;</samp><samp class="mf">0.80</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="o">&gt;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">new</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-11">[</samp><samp class="p" data-group-id="9545360225-11">]</samp><samp class="w">
</samp><samp class="mi">1</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">statistics</samp><samp class="p" data-group-id="9545360225-12">(</samp><samp class="n">pid</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:get</samp><samp class="p" data-group-id="9545360225-12">)</samp><samp class="w">
</samp><samp class="p" data-group-id="9545360225-13">{</samp><samp class="ss">:ok</samp><samp class="p">,</samp><samp class="w">
 </samp><samp class="p" data-group-id="9545360225-14">[</samp><samp class="w">
   </samp><samp class="ss">start_time</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-15">{</samp><samp class="p" data-group-id="9545360225-16">{</samp><samp class="mi">2016</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">7</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">16</samp><samp class="p" data-group-id="9545360225-16">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-17">{</samp><samp class="mi">12</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">29</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">41</samp><samp class="p" data-group-id="9545360225-17">}</samp><samp class="p" data-group-id="9545360225-15">}</samp><samp class="p">,</samp><samp class="w">
   </samp><samp class="ss">current_time</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-18">{</samp><samp class="p" data-group-id="9545360225-19">{</samp><samp class="mi">2016</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">7</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">16</samp><samp class="p" data-group-id="9545360225-19">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-20">{</samp><samp class="mi">12</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">29</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">50</samp><samp class="p" data-group-id="9545360225-20">}</samp><samp class="p" data-group-id="9545360225-18">}</samp><samp class="p">,</samp><samp class="w">
   </samp><samp class="ss">reductions</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">117</samp><samp class="p">,</samp><samp class="w">
   </samp><samp class="ss">messages_in</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">2</samp><samp class="p">,</samp><samp class="w">
   </samp><samp class="ss">messages_out</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="mi">0</samp><samp class="w">
 </samp><samp class="p" data-group-id="9545360225-14">]</samp><samp class="p" data-group-id="9545360225-13">}</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">no_debug</samp><samp class="p" data-group-id="9545360225-21">(</samp><samp class="n">pid</samp><samp class="p" data-group-id="9545360225-21">)</samp><samp class="w"> </samp><samp class="c1"># turn off all debug handlers</samp><samp class="w">
</samp><samp class="ss">:ok</samp><samp class="w">

</samp><samp class="gp unselectable">iex&gt; </samp><samp class="nc">:sys</samp><samp class="o">.</samp><samp class="n">get_status</samp><samp class="p" data-group-id="9545360225-22">(</samp><samp class="n">pid</samp><samp class="p" data-group-id="9545360225-22">)</samp><samp class="w">
</samp><samp class="p" data-group-id="9545360225-23">{</samp><samp class="ss">:status</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-24">#</samp><samp class="nc" data-group-id="9545360225-24">PID</samp><samp class="p" data-group-id="9545360225-24">&lt;</samp><samp class="mi">0</samp><samp class="o">.</samp><samp class="mi">122</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="p" data-group-id="9545360225-24">&gt;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-25">{</samp><samp class="ss">:module</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:gen_server</samp><samp class="p" data-group-id="9545360225-25">}</samp><samp class="p">,</samp><samp class="w">
 </samp><samp class="p" data-group-id="9545360225-26">[</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-27">[</samp><samp class="w">
     </samp><samp class="ss">&quot;$initial_call&quot;</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-28">{</samp><samp class="nc">Stack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:init</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-28">}</samp><samp class="p">,</samp><samp class="w">            </samp><samp class="c1"># process dictionary</samp><samp class="w">
     </samp><samp class="ss">&quot;$ancestors&quot;</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-29">[</samp><samp class="p" data-group-id="9545360225-30">#</samp><samp class="nc" data-group-id="9545360225-30">PID</samp><samp class="p" data-group-id="9545360225-30">&lt;</samp><samp class="mi">0</samp><samp class="o">.</samp><samp class="mi">80</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="p" data-group-id="9545360225-30">&gt;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-31">#</samp><samp class="nc" data-group-id="9545360225-31">PID</samp><samp class="p" data-group-id="9545360225-31">&lt;</samp><samp class="mi">0</samp><samp class="o">.</samp><samp class="mi">51</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="p" data-group-id="9545360225-31">&gt;</samp><samp class="p" data-group-id="9545360225-29">]</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-27">]</samp><samp class="p">,</samp><samp class="w">
   </samp><samp class="ss">:running</samp><samp class="p">,</samp><samp class="w">                                        </samp><samp class="c1"># :running | :suspended</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-32">#</samp><samp class="nc" data-group-id="9545360225-32">PID</samp><samp class="p" data-group-id="9545360225-32">&lt;</samp><samp class="mi">0</samp><samp class="o">.</samp><samp class="mi">80</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="p" data-group-id="9545360225-32">&gt;</samp><samp class="p">,</samp><samp class="w">                                    </samp><samp class="c1"># parent</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-33">[</samp><samp class="p" data-group-id="9545360225-33">]</samp><samp class="p">,</samp><samp class="w">                                              </samp><samp class="c1"># debugger state</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-34">[</samp><samp class="w">
     </samp><samp class="ss">header</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="sc">&#39;Status for generic server &lt;0.122.0&gt;&#39;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="c1"># module status</samp><samp class="w">
     </samp><samp class="ss">data</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-35">[</samp><samp class="w">
       </samp><samp class="p" data-group-id="9545360225-36">{</samp><samp class="sc">&#39;Status&#39;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:running</samp><samp class="p" data-group-id="9545360225-36">}</samp><samp class="p">,</samp><samp class="w">
       </samp><samp class="p" data-group-id="9545360225-37">{</samp><samp class="sc">&#39;Parent&#39;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-38">#</samp><samp class="nc" data-group-id="9545360225-38">PID</samp><samp class="p" data-group-id="9545360225-38">&lt;</samp><samp class="mi">0</samp><samp class="o">.</samp><samp class="mi">80</samp><samp class="o">.</samp><samp class="mi">0</samp><samp class="p" data-group-id="9545360225-38">&gt;</samp><samp class="p" data-group-id="9545360225-37">}</samp><samp class="p">,</samp><samp class="w">
       </samp><samp class="p" data-group-id="9545360225-39">{</samp><samp class="sc">&#39;Logged events&#39;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-40">[</samp><samp class="p" data-group-id="9545360225-40">]</samp><samp class="p" data-group-id="9545360225-39">}</samp><samp class="w">
     </samp><samp class="p" data-group-id="9545360225-35">]</samp><samp class="p">,</samp><samp class="w">
     </samp><samp class="ss">data</samp><samp class="p">:</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-41">[</samp><samp class="p" data-group-id="9545360225-42">{</samp><samp class="sc">&#39;State&#39;</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="9545360225-43">[</samp><samp class="mi">1</samp><samp class="p" data-group-id="9545360225-43">]</samp><samp class="p" data-group-id="9545360225-42">}</samp><samp class="p" data-group-id="9545360225-41">]</samp><samp class="w">
   </samp><samp class="p" data-group-id="9545360225-34">]</samp><samp class="w">
 </samp><samp class="p" data-group-id="9545360225-26">]</samp><samp class="p" data-group-id="9545360225-23">}</samp></code></pre><h2 id="module-learn-more">Learn more</h2><p>If you wish to find out more about GenServers, the Elixir Getting Started
guide provides a tutorial-like introduction. The documentation and links
in Erlang can also provide extra insight.</p><ul><li><a href="genservers.xhtml">GenServer - Elixir's Getting Started Guide</a></li><li><a href="https://www.erlang.org/doc/apps/stdlib/gen_server.html"><code class="inline">:gen_server</code> module documentation</a></li><li><a href="https://www.erlang.org/doc/design_principles/gen_server_concepts.html">gen_server Behaviour - OTP Design Principles</a></li><li><a href="http://learnyousomeerlang.com/clients-and-servers">Clients and Servers - Learn You Some Erlang for Great Good!</a></li></ul>
      </section>


      <section id="summary" class="details-list">
        <h1 class="section-heading">Summary</h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:debug/0" data-no-tooltip="" translate="no">debug()</a>

      </div>

        <div class="summary-synopsis"><p>Debug options supported by the <code class="inline">start*</code> functions</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:from/0" data-no-tooltip="" translate="no">from()</a>

      </div>

        <div class="summary-synopsis"><p>Tuple describing the client of a call request.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:name/0" data-no-tooltip="" translate="no">name()</a>

      </div>

        <div class="summary-synopsis"><p>The GenServer name</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:on_start/0" data-no-tooltip="" translate="no">on_start()</a>

      </div>

        <div class="summary-synopsis"><p>Return values of <code class="inline">start*</code> functions</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:option/0" data-no-tooltip="" translate="no">option()</a>

      </div>

        <div class="summary-synopsis"><p>Option values used by the <code class="inline">start*</code> functions</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:options/0" data-no-tooltip="" translate="no">options()</a>

      </div>

        <div class="summary-synopsis"><p>Options used by the <code class="inline">start*</code> functions</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:server/0" data-no-tooltip="" translate="no">server()</a>

      </div>

        <div class="summary-synopsis"><p>The server reference.</p></div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:code_change/3" data-no-tooltip="" translate="no">code_change(old_vsn, state, extra)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked to change the state of the <a><code class="inline">GenServer</code></a> when a different version of a
module is loaded (hot code swapping) and the state's term structure should be
changed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:format_status/1" data-no-tooltip="" translate="no">format_status(status)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called by a <a><code class="inline">GenServer</code></a> process in the following situations</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:format_status/2" data-no-tooltip="" translate="no">format_status(reason, pdict_and_state)</a>

          <span class="deprecated" title="Use format_status/1 callback instead">deprecated</span>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_call/3" data-no-tooltip="" translate="no">handle_call(request, from, state)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked to handle synchronous <a><code class="inline">call/3</code></a> messages. <a><code class="inline">call/3</code></a> will block until a
reply is received (unless the call times out or nodes are disconnected).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_cast/2" data-no-tooltip="" translate="no">handle_cast(request, state)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked to handle asynchronous <a><code class="inline">cast/2</code></a> messages.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_continue/2" data-no-tooltip="" translate="no">handle_continue(continue_arg, state)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked to handle continue instructions.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_info/2" data-no-tooltip="" translate="no">handle_info(msg, state)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked to handle all other messages.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/1" data-no-tooltip="" translate="no">init(init_arg)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when the server is started. <a><code class="inline">start_link/3</code></a> or <a><code class="inline">start/3</code></a> will
block until it returns.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/2" data-no-tooltip="" translate="no">terminate(reason, state)</a>

      </div>

        <div class="summary-synopsis"><p>Invoked when the server is about to exit. It should do any cleanup required.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#abcast/3" data-no-tooltip="" translate="no">abcast(nodes \\ [node() | Node.list()], name, request)</a>

      </div>

        <div class="summary-synopsis"><p>Casts all servers locally registered as <code class="inline">name</code> at the specified nodes.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#call/3" data-no-tooltip="" translate="no">call(server, request, timeout \\ 5000)</a>

      </div>

        <div class="summary-synopsis"><p>Makes a synchronous call to the <code class="inline">server</code> and waits for its reply.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#cast/2" data-no-tooltip="" translate="no">cast(server, request)</a>

      </div>

        <div class="summary-synopsis"><p>Casts a request to the <code class="inline">server</code> without waiting for a response.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#multi_call/4" data-no-tooltip="" translate="no">multi_call(nodes \\ [node() | Node.list()], name, request, timeout \\ :infinity)</a>

      </div>

        <div class="summary-synopsis"><p>Calls all servers locally registered as <code class="inline">name</code> at the specified <code class="inline">nodes</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reply/2" data-no-tooltip="" translate="no">reply(client, reply)</a>

      </div>

        <div class="summary-synopsis"><p>Replies to a client.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start/3" data-no-tooltip="" translate="no">start(module, init_arg, options \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Starts a <a><code class="inline">GenServer</code></a> process without links (outside of a supervision tree).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#start_link/3" data-no-tooltip="" translate="no">start_link(module, init_arg, options \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Starts a <a><code class="inline">GenServer</code></a> process linked to the current process.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#stop/3" data-no-tooltip="" translate="no">stop(server, reason \\ :normal, timeout \\ :infinity)</a>

      </div>

        <div class="summary-synopsis"><p>Synchronously stops the server with the given <code class="inline">reason</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#whereis/1" data-no-tooltip="" translate="no">whereis(server)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the <code class="inline">pid</code> or <code class="inline">{name, node}</code> of a GenServer process, <code class="inline">nil</code> otherwise.</p></div>

    </div>

</div>

      </section>


      <section id="types" class="details-list">
        <h1 class="section-heading">Types</h1>

        <div class="types-list">
<section class="detail" id="t:debug/0">

  <div class="detail-header">
    <a href="#t:debug/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">debug()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L825" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> debug() :: [:trace | :log | :statistics | {:log_to_file, <a href="Path.xhtml#t:t/0">Path.t</a>()}]</pre>

      </div>

<p>Debug options supported by the <code class="inline">start*</code> functions</p>
  </section>
</section>
<section class="detail" id="t:from/0">

  <div class="detail-header">
    <a href="#t:from/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">from()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L841" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> from() :: {<a href="typespecs.xhtml#basic-types">pid</a>(), tag :: <a href="typespecs.xhtml#built-in-types">term</a>()}</pre>

      </div>

<p>Tuple describing the client of a call request.</p><p><code class="inline">pid</code> is the PID of the caller and <code class="inline">tag</code> is a unique term used to identify the
call.</p>
  </section>
</section>
<section class="detail" id="t:name/0">

  <div class="detail-header">
    <a href="#t:name/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">name()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L811" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> name() :: <a href="typespecs.xhtml#basic-types">atom</a>() | {:global, <a href="typespecs.xhtml#built-in-types">term</a>()} | {:via, <a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#built-in-types">term</a>()}</pre>

      </div>

<p>The GenServer name</p>
  </section>
</section>
<section class="detail" id="t:on_start/0">

  <div class="detail-header">
    <a href="#t:on_start/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">on_start()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L808" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> on_start() ::
  {:ok, <a href="typespecs.xhtml#basic-types">pid</a>()} | :ignore | {:error, {:already_started, <a href="typespecs.xhtml#basic-types">pid</a>()} | <a href="typespecs.xhtml#built-in-types">term</a>()}</pre>

      </div>

<p>Return values of <code class="inline">start*</code> functions</p>
  </section>
</section>
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">option()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L817" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> option() ::
  {:debug, <a href="#t:debug/0">debug</a>()}
  | {:name, <a href="#t:name/0">name</a>()}
  | {:timeout, <a href="typespecs.xhtml#built-in-types">timeout</a>()}
  | {:spawn_opt, [<a href="Process.xhtml#t:spawn_opt/0">Process.spawn_opt</a>()]}
  | {:hibernate_after, <a href="typespecs.xhtml#built-in-types">timeout</a>()}</pre>

      </div>

<p>Option values used by the <code class="inline">start*</code> functions</p>
  </section>
</section>
<section class="detail" id="t:options/0">

  <div class="detail-header">
    <a href="#t:options/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">options()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L814" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> options() :: [<a href="#t:option/0">option</a>()]</pre>

      </div>

<p>Options used by the <code class="inline">start*</code> functions</p>
  </section>
</section>
<section class="detail" id="t:server/0">

  <div class="detail-header">
    <a href="#t:server/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">server()</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L833" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> server() :: <a href="typespecs.xhtml#basic-types">pid</a>() | <a href="#t:name/0">name</a>() | {<a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">node</a>()}</pre>

      </div>

<p>The server reference.</p><p>This is either a plain PID or a value representing a registered name.
See the &quot;Name registration&quot; section of this document for more information.</p>
  </section>
</section>

        </div>
      </section>

      <section id="callbacks" class="details-list">
        <h1 class="section-heading">Callbacks</h1>

        <div class="callbacks-list">
<section class="detail" id="c:code_change/3">

  <div class="detail-header">
    <a href="#c:code_change/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">code_change(old_vsn, state, extra)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L756" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> code_change(old_vsn, state :: <a href="typespecs.xhtml#built-in-types">term</a>(), extra :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:ok, new_state :: <a href="typespecs.xhtml#built-in-types">term</a>()} | {:error, reason :: <a href="typespecs.xhtml#built-in-types">term</a>()}
when old_vsn: <a href="typespecs.xhtml#built-in-types">term</a>() | {:down, <a href="typespecs.xhtml#built-in-types">term</a>()}</pre>

      </div>

<p>Invoked to change the state of the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> when a different version of a
module is loaded (hot code swapping) and the state's term structure should be
changed.</p><p><code class="inline">old_vsn</code> is the previous version of the module (defined by the <code class="inline">@vsn</code>
attribute) when upgrading. When downgrading the previous version is wrapped in
a 2-tuple with first element <code class="inline">:down</code>. <code class="inline">state</code> is the current state of the
<a href="GenServer.xhtml"><code class="inline">GenServer</code></a> and <code class="inline">extra</code> is any extra data required to change the state.</p><p>Returning <code class="inline">{:ok, new_state}</code> changes the state to <code class="inline">new_state</code> and the code
change is successful.</p><p>Returning <code class="inline">{:error, reason}</code> fails the code change with reason <code class="inline">reason</code> and
the state remains as the previous state.</p><p>If <a href="#c:code_change/3"><code class="inline">code_change/3</code></a> raises the code change fails and the loop will continue
with its previous state. Therefore this callback does not usually contain side effects.</p><p>This callback is optional.</p>
  </section>
</section>
<section class="detail" id="c:format_status/1">

  <div class="detail-header">
    <a href="#c:format_status/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">format_status(status)</h1>

        <span class="note">(since 1.17.0)</span>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L790" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> format_status(status :: <a href="https://www.erlang.org/doc/apps/stdlib/gen_server.html#t:format_status/0">:gen_server.format_status</a>()) ::
  new_status :: <a href="https://www.erlang.org/doc/apps/stdlib/gen_server.html#t:format_status/0">:gen_server.format_status</a>()</pre>

      </div>

<p>This function is called by a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> process in the following situations:</p><ul><li><a href="https://www.erlang.org/doc/apps/stdlib/sys.html#get_status/1"><code class="inline">:sys.get_status/1,2</code></a> is invoked to get the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> status.</li><li>The <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> process terminates abnormally and logs an error.</li></ul><p>This callback is used to limit the status of the process returned by
<a href="https://www.erlang.org/doc/apps/stdlib/sys.html#get_status/1"><code class="inline">:sys.get_status/1,2</code></a> or sent to logger.</p><p>The callback gets a map <code class="inline">status</code> describing the current status and shall return
a map <code class="inline">new_status</code> with the same keys, but it may transform some values.</p><p>Two possible use cases for this callback is to remove sensitive information
from the state to prevent it from being printed in log files, or to compact
large irrelevant status items that would only clutter the logs.</p><h2 id="c:format_status/1-example" class="section-heading"><a href="#c:format_status/1-example" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example</span></h2><pre><code class="makeup elixir" translate="no"><samp class="na">@impl</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="w">
</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">format_status</samp><samp class="p" data-group-id="6129781595-1">(</samp><samp class="n">status</samp><samp class="p" data-group-id="6129781595-1">)</samp><samp class="w"> </samp><samp class="k" data-group-id="6129781595-2">do</samp><samp class="w">
  </samp><samp class="nc">Map</samp><samp class="o">.</samp><samp class="n">new</samp><samp class="p" data-group-id="6129781595-3">(</samp><samp class="n">status</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="k" data-group-id="6129781595-4">fn</samp><samp class="w">
    </samp><samp class="p" data-group-id="6129781595-5">{</samp><samp class="ss">:state</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="6129781595-5">}</samp><samp class="w"> </samp><samp class="o">-&gt;</samp><samp class="w"> </samp><samp class="p" data-group-id="6129781595-6">{</samp><samp class="ss">:state</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="nc">Map</samp><samp class="o">.</samp><samp class="n">delete</samp><samp class="p" data-group-id="6129781595-7">(</samp><samp class="n">state</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:private_key</samp><samp class="p" data-group-id="6129781595-7">)</samp><samp class="p" data-group-id="6129781595-6">}</samp><samp class="w">
    </samp><samp class="p" data-group-id="6129781595-8">{</samp><samp class="ss">:message</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6129781595-9">{</samp><samp class="ss">:password</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="bp">_</samp><samp class="p" data-group-id="6129781595-9">}</samp><samp class="p" data-group-id="6129781595-8">}</samp><samp class="w"> </samp><samp class="o">-&gt;</samp><samp class="w"> </samp><samp class="p" data-group-id="6129781595-10">{</samp><samp class="ss">:message</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="6129781595-11">{</samp><samp class="ss">:password</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="s">&quot;redacted&quot;</samp><samp class="p" data-group-id="6129781595-11">}</samp><samp class="p" data-group-id="6129781595-10">}</samp><samp class="w">
    </samp><samp class="n">key_value</samp><samp class="w"> </samp><samp class="o">-&gt;</samp><samp class="w"> </samp><samp class="n">key_value</samp><samp class="w">
  </samp><samp class="k" data-group-id="6129781595-4">end</samp><samp class="p" data-group-id="6129781595-3">)</samp><samp class="w">
</samp><samp class="k" data-group-id="6129781595-2">end</samp></code></pre>
  </section>
</section>
<section class="detail" id="c:format_status/2">

  <div class="detail-header">
    <a href="#c:format_status/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">format_status(reason, pdict_and_state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L795" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

    <div class="deprecated">
      This callback is deprecated. Use format_status/1 callback instead.
    </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> format_status(reason, pdict_and_state :: <a href="typespecs.xhtml#built-in-types">list</a>()) :: <a href="typespecs.xhtml#built-in-types">term</a>()
when reason: :normal | :terminate</pre>

      </div>


  </section>
</section>
<section class="detail" id="c:handle_call/3">

  <div class="detail-header">
    <a href="#c:handle_call/3" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_call(request, from, state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L592" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> handle_call(request :: <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="#t:from/0">from</a>(), state :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:reply, reply, new_state}
  | {:reply, reply, new_state,
     <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()}}
  | {:noreply, new_state}
  | {:noreply, new_state,
     <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()}}
  | {:stop, reason, reply, new_state}
  | {:stop, reason, new_state}
when reply: <a href="typespecs.xhtml#built-in-types">term</a>(), new_state: <a href="typespecs.xhtml#built-in-types">term</a>(), reason: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked to handle synchronous <a href="#call/3"><code class="inline">call/3</code></a> messages. <a href="#call/3"><code class="inline">call/3</code></a> will block until a
reply is received (unless the call times out or nodes are disconnected).</p><p><code class="inline">request</code> is the request message sent by a <a href="#call/3"><code class="inline">call/3</code></a>, <code class="inline">from</code> is a 2-tuple
containing the caller's PID and a term that uniquely identifies the call, and
<code class="inline">state</code> is the current state of the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>.</p><p>Returning <code class="inline">{:reply, reply, new_state}</code> sends the response <code class="inline">reply</code> to the
caller and continues the loop with new state <code class="inline">new_state</code>.</p><p>Returning <code class="inline">{:reply, reply, new_state, timeout}</code> is similar to
<code class="inline">{:reply, reply, new_state}</code> except that it also sets a timeout.
See the &quot;Timeouts&quot; section in the module documentation for more information.</p><p>Returning <code class="inline">{:reply, reply, new_state, :hibernate}</code> is similar to
<code class="inline">{:reply, reply, new_state}</code> except the process is hibernated and will
continue the loop once a message is in its message queue. However, if a message is
already in the message queue, the process will continue the loop immediately.
Hibernating a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> causes garbage collection and leaves a continuous
heap that minimises the memory used by the process.</p><p>Hibernating should not be used aggressively as too much time could be spent
garbage collecting, which would delay the processing of incoming messages.
Normally it should only be used when you are not expecting new messages to
immediately arrive and minimising the memory of the process is shown to be
beneficial.</p><p>Returning <code class="inline">{:reply, reply, new_state, {:continue, continue_arg}}</code> is similar to
<code class="inline">{:reply, reply, new_state}</code> except that <a href="#c:handle_continue/2"><code class="inline">handle_continue/2</code></a> will be invoked
immediately after with <code class="inline">continue_arg</code> as the first argument and
<code class="inline">state</code> as the second one.</p><p>Returning <code class="inline">{:noreply, new_state}</code> does not send a response to the caller and
continues the loop with new state <code class="inline">new_state</code>. The response must be sent with
<a href="#reply/2"><code class="inline">reply/2</code></a>.</p><p>There are three main use cases for not replying using the return value:</p><ul><li>To reply before returning from the callback because the response is known
before calling a slow function.</li><li>To reply after returning from the callback because the response is not yet
available.</li><li>To reply from another process, such as a task.</li></ul><p>When replying from another process the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> should exit if the other
process exits without replying as the caller will be blocking awaiting a
reply.</p><p>Returning <code class="inline">{:noreply, new_state, timeout | :hibernate | {:continue, continue_arg}}</code>
is similar to <code class="inline">{:noreply, new_state}</code> except a timeout, hibernation or continue
occurs as with a <code class="inline">:reply</code> tuple.</p><p>Returning <code class="inline">{:stop, reason, reply, new_state}</code> stops the loop and <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>
is called with reason <code class="inline">reason</code> and state <code class="inline">new_state</code>. Then, the <code class="inline">reply</code> is sent
as the response to call and the process exits with reason <code class="inline">reason</code>.</p><p>Returning <code class="inline">{:stop, reason, new_state}</code> is similar to
<code class="inline">{:stop, reason, reply, new_state}</code> except a reply is not sent.</p><p>This callback is optional. If one is not implemented, the server will fail
if a call is performed against it.</p>
  </section>
</section>
<section class="detail" id="c:handle_cast/2">

  <div class="detail-header">
    <a href="#c:handle_cast/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_cast(request, state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L630" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> handle_cast(request :: <a href="typespecs.xhtml#built-in-types">term</a>(), state :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:noreply, new_state}
  | {:noreply, new_state,
     <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()}}
  | {:stop, reason :: <a href="typespecs.xhtml#built-in-types">term</a>(), new_state}
when new_state: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked to handle asynchronous <a href="#cast/2"><code class="inline">cast/2</code></a> messages.</p><p><code class="inline">request</code> is the request message sent by a <a href="#cast/2"><code class="inline">cast/2</code></a> and <code class="inline">state</code> is the current
state of the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>.</p><p>Returning <code class="inline">{:noreply, new_state}</code> continues the loop with new state <code class="inline">new_state</code>.</p><p>Returning <code class="inline">{:noreply, new_state, timeout}</code> is similar to <code class="inline">{:noreply, new_state}</code>
except that it also sets a timeout. See the &quot;Timeouts&quot; section in the module
documentation for more information.</p><p>Returning <code class="inline">{:noreply, new_state, :hibernate}</code> is similar to
<code class="inline">{:noreply, new_state}</code> except the process is hibernated before continuing the
loop. See <a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> for more information.</p><p>Returning <code class="inline">{:noreply, new_state, {:continue, continue_arg}}</code> is similar to
<code class="inline">{:noreply, new_state}</code> except <a href="#c:handle_continue/2"><code class="inline">handle_continue/2</code></a> will be invoked
immediately after with <code class="inline">continue_arg</code> as the first argument and
<code class="inline">state</code> as the second one.</p><p>Returning <code class="inline">{:stop, reason, new_state}</code> stops the loop and <a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is
called with the reason <code class="inline">reason</code> and state <code class="inline">new_state</code>. The process exits with
reason <code class="inline">reason</code>.</p><p>This callback is optional. If one is not implemented, the server will fail
if a cast is performed against it.</p>
  </section>
</section>
<section class="detail" id="c:handle_continue/2">

  <div class="detail-header">
    <a href="#c:handle_continue/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_continue(continue_arg, state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L664" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> handle_continue(continue_arg, state :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:noreply, new_state}
  | {:noreply, new_state, <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg}}
  | {:stop, reason :: <a href="typespecs.xhtml#built-in-types">term</a>(), new_state}
when new_state: <a href="typespecs.xhtml#built-in-types">term</a>(), continue_arg: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked to handle continue instructions.</p><p>It is useful for performing work after initialization or for splitting the work
in a callback in multiple steps, updating the process state along the way.</p><p>Return values are the same as <a href="#c:handle_cast/2"><code class="inline">handle_cast/2</code></a>.</p><p>This callback is optional. If one is not implemented, the server will fail
if a continue instruction is used.</p>
  </section>
</section>
<section class="detail" id="c:handle_info/2">

  <div class="detail-header">
    <a href="#c:handle_info/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">handle_info(msg, state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L647" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> handle_info(msg :: :timeout | <a href="typespecs.xhtml#built-in-types">term</a>(), state :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:noreply, new_state}
  | {:noreply, new_state,
     <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()}}
  | {:stop, reason :: <a href="typespecs.xhtml#built-in-types">term</a>(), new_state}
when new_state: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked to handle all other messages.</p><p><code class="inline">msg</code> is the message and <code class="inline">state</code> is the current state of the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>. When
a timeout occurs the message is <code class="inline">:timeout</code>.</p><p>Return values are the same as <a href="#c:handle_cast/2"><code class="inline">handle_cast/2</code></a>.</p><p>This callback is optional. If one is not implemented, the received message
will be logged.</p>
  </section>
</section>
<section class="detail" id="c:init/1">

  <div class="detail-header">
    <a href="#c:init/1" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">init(init_arg)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L522" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> init(init_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()) ::
  {:ok, state}
  | {:ok, state, <a href="typespecs.xhtml#built-in-types">timeout</a>() | :hibernate | {:continue, continue_arg :: <a href="typespecs.xhtml#built-in-types">term</a>()}}
  | :ignore
  | {:stop, reason :: <a href="typespecs.xhtml#built-in-types">term</a>()}
when state: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked when the server is started. <a href="#start_link/3"><code class="inline">start_link/3</code></a> or <a href="#start/3"><code class="inline">start/3</code></a> will
block until it returns.</p><p><code class="inline">init_arg</code> is the argument term (second argument) passed to <a href="#start_link/3"><code class="inline">start_link/3</code></a>.</p><p>Returning <code class="inline">{:ok, state}</code> will cause <a href="#start_link/3"><code class="inline">start_link/3</code></a> to return
<code class="inline">{:ok, pid}</code> and the process to enter its loop.</p><p>Returning <code class="inline">{:ok, state, timeout}</code> is similar to <code class="inline">{:ok, state}</code>,
except that it also sets a timeout. See the &quot;Timeouts&quot; section
in the module documentation for more information.</p><p>Returning <code class="inline">{:ok, state, :hibernate}</code> is similar to <code class="inline">{:ok, state}</code>
except the process is hibernated before entering the loop. See
<a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> for more information on hibernation.</p><p>Returning <code class="inline">{:ok, state, {:continue, continue_arg}}</code> is similar to
<code class="inline">{:ok, state}</code> except that immediately after entering the loop,
the <a href="#c:handle_continue/2"><code class="inline">handle_continue/2</code></a> callback will be invoked with <code class="inline">continue_arg</code>
as the first argument and <code class="inline">state</code> as the second one.</p><p>Returning <code class="inline">:ignore</code> will cause <a href="#start_link/3"><code class="inline">start_link/3</code></a> to return <code class="inline">:ignore</code> and
the process will exit normally without entering the loop or calling
<a href="#c:terminate/2"><code class="inline">terminate/2</code></a>. If used when part of a supervision tree the parent
supervisor will not fail to start nor immediately try to restart the
<a href="GenServer.xhtml"><code class="inline">GenServer</code></a>. The remainder of the supervision tree will be started
and so the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> should not be required by other processes.
It can be started later with <a href="Supervisor.xhtml#restart_child/2"><code class="inline">Supervisor.restart_child/2</code></a> as the child
specification is saved in the parent supervisor. The main use cases for
this are:</p><ul><li>The <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> is disabled by configuration but might be enabled later.</li><li>An error occurred and it will be handled by a different mechanism than the
<a href="Supervisor.xhtml"><code class="inline">Supervisor</code></a>. Likely this approach involves calling <a href="Supervisor.xhtml#restart_child/2"><code class="inline">Supervisor.restart_child/2</code></a>
after a delay to attempt a restart.</li></ul><p>Returning <code class="inline">{:stop, reason}</code> will cause <a href="#start_link/3"><code class="inline">start_link/3</code></a> to return
<code class="inline">{:error, reason}</code> and the process to exit with reason <code class="inline">reason</code> without
entering the loop or calling <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:terminate/2">

  <div class="detail-header">
    <a href="#c:terminate/2" class="detail-link" data-no-tooltip="" aria-label="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">terminate(reason, state)</h1>

        <span class="note">(optional)</span>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L732" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@callback</span> terminate(reason, state :: <a href="typespecs.xhtml#built-in-types">term</a>()) :: <a href="typespecs.xhtml#built-in-types">term</a>()
when reason: :normal | :shutdown | {:shutdown, <a href="typespecs.xhtml#built-in-types">term</a>()} | <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Invoked when the server is about to exit. It should do any cleanup required.</p><p><code class="inline">reason</code> is exit reason and <code class="inline">state</code> is the current state of the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>.
The return value is ignored.</p><p><a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is useful for cleanup that requires access to the
<a href="GenServer.xhtml"><code class="inline">GenServer</code></a>'s state. However, it is <strong>not guaranteed</strong> that <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>
is called when a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> exits. Therefore, important cleanup should be
done using process links and/or monitors. A monitoring process will receive the
same exit <code class="inline">reason</code> that would be passed to <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>.</p><p><a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is called if:</p><ul><li><p>the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> traps exits (using <a href="Process.xhtml#flag/2"><code class="inline">Process.flag/2</code></a>) <em>and</em> the parent
process (the one which called <code class="inline">start_link/1</code>) sends an exit signal</p></li><li><p>a callback (except <a href="#c:init/1"><code class="inline">init/1</code></a>) does one of the following:</p><ul><li><p>returns a <code class="inline">:stop</code> tuple</p></li><li><p>raises (via <a href="Kernel.xhtml#raise/2"><code class="inline">raise/2</code></a>) or exits (via <a href="Kernel.xhtml#exit/1"><code class="inline">exit/1</code></a>)</p></li><li><p>returns an invalid value</p></li></ul></li></ul><p>If part of a supervision tree, a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> will receive an exit signal from
its parent process (its supervisor) when the tree is shutting down. The exit
signal is based on the shutdown strategy in the child's specification, where
this value can be:</p><ul><li><p><code class="inline">:brutal_kill</code>: the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> is killed and so <a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is not called.</p></li><li><p>a timeout value, where the supervisor will send the exit signal <code class="inline">:shutdown</code> and
the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> will have the duration of the timeout to terminate.
If after duration of this timeout the process is still alive, it will be killed
immediately.</p></li></ul><p>For a more in-depth explanation, please read the &quot;Shutdown values (:shutdown)&quot;
section in the <a href="Supervisor.xhtml"><code class="inline">Supervisor</code></a> module.</p><p>If the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> receives an exit signal (that is not <code class="inline">:normal</code>) from any
process when it is not trapping exits it will exit abruptly with the same
reason and so not call <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>. Note that a process does <em>NOT</em> trap
exits by default and an exit signal is sent when a linked process exits or its
node is disconnected.</p><p><a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is only called after the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> finishes processing all
messages which arrived in its mailbox prior to the exit signal. If it
receives a <code class="inline">:kill</code> signal before it finishes processing those,
<a href="#c:terminate/2"><code class="inline">terminate/2</code></a> will not be called. If <a href="#c:terminate/2"><code class="inline">terminate/2</code></a> is called, any
messages received after the exit signal will still be in the mailbox.</p><p>There is no cleanup needed when the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> controls a <code class="inline">port</code> (for example,
<code class="inline">:gen_tcp.socket</code>) or <a href="File.xhtml#t:io_device/0"><code class="inline">File.io_device/0</code></a>, because these will be closed on
receiving a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>'s exit signal and do not need to be closed manually
in <a href="#c:terminate/2"><code class="inline">terminate/2</code></a>.</p><p>If <code class="inline">reason</code> is neither <code class="inline">:normal</code>, <code class="inline">:shutdown</code>, nor <code class="inline">{:shutdown, term}</code> an error is
logged.</p><p>This callback is optional.</p>
  </section>
</section>

        </div>
      </section>

      <section id="functions" class="details-list">
        <h1 class="section-heading">Functions</h1>

        <div class="functions-list">
<section class="detail" id="abcast/3">

    <span id="abcast/2"></span>

  <div class="detail-header">
    <a href="#abcast/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">abcast(nodes \\ [node() | Node.list()], name, request)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1181" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> abcast([<a href="typespecs.xhtml#built-in-types">node</a>()], name :: <a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">term</a>()) :: :abcast</pre>

      </div>

<p>Casts all servers locally registered as <code class="inline">name</code> at the specified nodes.</p><p>This function returns immediately and ignores nodes that do not exist, or where the
server name does not exist.</p><p>See <a href="#multi_call/4"><code class="inline">multi_call/4</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="call/3">

    <span id="call/2"></span>

  <div class="detail-header">
    <a href="#call/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">call(server, request, timeout \\ 5000)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1117" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> call(<a href="#t:server/0">server</a>(), <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="typespecs.xhtml#built-in-types">timeout</a>()) :: <a href="typespecs.xhtml#built-in-types">term</a>()</pre>

      </div>

<p>Makes a synchronous call to the <code class="inline">server</code> and waits for its reply.</p><p>The client sends the given <code class="inline">request</code> to the server and waits until a reply
arrives or a timeout occurs. <a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> will be called on the server
to handle the request.</p><p><code class="inline">server</code> can be any of the values described in the &quot;Name registration&quot;
section of the documentation for this module.</p><h2 id="call/3-timeouts" class="section-heading"><a href="#call/3-timeouts" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Timeouts</span></h2><p><code class="inline">timeout</code> is an integer greater than zero which specifies how many
milliseconds to wait for a reply, or the atom <code class="inline">:infinity</code> to wait
indefinitely. The default value is <code class="inline">5000</code>. If no reply is received within
the specified time, the function call fails and the caller exits. If the
caller catches the failure and continues running, and the server is just late
with the reply, it may arrive at any time later into the caller's message
queue. The caller must in this case be prepared for this and discard any such
garbage messages that are two-element tuples with a reference as the first
element.</p>
  </section>
</section>
<section class="detail" id="cast/2">

  <div class="detail-header">
    <a href="#cast/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">cast(server, request)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1147" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> cast(<a href="#t:server/0">server</a>(), <a href="typespecs.xhtml#built-in-types">term</a>()) :: :ok</pre>

      </div>

<p>Casts a request to the <code class="inline">server</code> without waiting for a response.</p><p>This function always returns <code class="inline">:ok</code> regardless of whether
the destination <code class="inline">server</code> (or node) exists. Therefore it
is unknown whether the destination <code class="inline">server</code> successfully
handled the request.</p><p><code class="inline">server</code> can be any of the values described in the &quot;Name registration&quot;
section of the documentation for this module.</p>
  </section>
</section>
<section class="detail" id="multi_call/4">

    <span id="multi_call/2"></span>

    <span id="multi_call/3"></span>

  <div class="detail-header">
    <a href="#multi_call/4" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">multi_call(nodes \\ [node() | Node.list()], name, request, timeout \\ :infinity)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1228" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> multi_call([<a href="typespecs.xhtml#built-in-types">node</a>()], name :: <a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="typespecs.xhtml#built-in-types">timeout</a>()) ::
  {replies :: [{<a href="typespecs.xhtml#built-in-types">node</a>(), <a href="typespecs.xhtml#built-in-types">term</a>()}], bad_nodes :: [<a href="typespecs.xhtml#built-in-types">node</a>()]}</pre>

      </div>

<p>Calls all servers locally registered as <code class="inline">name</code> at the specified <code class="inline">nodes</code>.</p><p>First, the <code class="inline">request</code> is sent to every node in <code class="inline">nodes</code>; then, the caller waits
for the replies. This function returns a two-element tuple <code class="inline">{replies, bad_nodes}</code> where:</p><ul><li><code class="inline">replies</code> - is a list of <code class="inline">{node, reply}</code> tuples where <code class="inline">node</code> is the node
that replied and <code class="inline">reply</code> is its reply</li><li><code class="inline">bad_nodes</code> - is a list of nodes that either did not exist or where a
server with the given <code class="inline">name</code> did not exist or did not reply</li></ul><p><code class="inline">nodes</code> is a list of node names to which the request is sent. The default
value is the list of all known nodes (including this node).</p><h2 id="multi_call/4-examples" class="section-heading"><a href="#multi_call/4-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>Assuming the <code class="inline">Stack</code> GenServer mentioned in the docs for the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a>
module is registered as <code class="inline">Stack</code> in the <code class="inline">:&quot;foo@my-machine&quot;</code> and
<code class="inline">:&quot;bar@my-machine&quot;</code> nodes:</p><pre><code class="makeup elixir" translate="no"><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">multi_call</samp><samp class="p" data-group-id="5749707957-1">(</samp><samp class="nc">Stack</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:pop</samp><samp class="p" data-group-id="5749707957-1">)</samp><samp class="w">
</samp><samp class="c1">#=&gt; {[{:&quot;foo@my-machine&quot;, :hello}, {:&quot;bar@my-machine&quot;, :world}], []}</samp></code></pre>
  </section>
</section>
<section class="detail" id="reply/2">

  <div class="detail-header">
    <a href="#reply/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">reply(client, reply)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1263" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> reply(<a href="#t:from/0">from</a>(), <a href="typespecs.xhtml#built-in-types">term</a>()) :: :ok</pre>

      </div>

<p>Replies to a client.</p><p>This function can be used to explicitly send a reply to a client that called
<a href="#call/3"><code class="inline">call/3</code></a> or <a href="#multi_call/4"><code class="inline">multi_call/4</code></a> when the reply cannot be specified in the return
value of <a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a>.</p><p><code class="inline">client</code> must be the <code class="inline">from</code> argument (the second argument) accepted by
<a href="#c:handle_call/3"><code class="inline">handle_call/3</code></a> callbacks. <code class="inline">reply</code> is an arbitrary term which will be given
back to the client as the return value of the call.</p><p>Note that <a href="#reply/2"><code class="inline">reply/2</code></a> can be called from any process, not just the GenServer
that originally received the call (as long as that GenServer communicated the
<code class="inline">from</code> argument somehow).</p><p>This function always returns <code class="inline">:ok</code>.</p><h2 id="reply/2-examples" class="section-heading"><a href="#reply/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><pre><code class="makeup elixir" translate="no"><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_call</samp><samp class="p" data-group-id="8526347157-1">(</samp><samp class="ss">:reply_in_one_second</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="8526347157-1">)</samp><samp class="w"> </samp><samp class="k" data-group-id="8526347157-2">do</samp><samp class="w">
  </samp><samp class="nc">Process</samp><samp class="o">.</samp><samp class="n">send_after</samp><samp class="p" data-group-id="8526347157-3">(</samp><samp class="n">self</samp><samp class="p" data-group-id="8526347157-4">(</samp><samp class="p" data-group-id="8526347157-4">)</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="p" data-group-id="8526347157-5">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">from</samp><samp class="p" data-group-id="8526347157-5">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="mi">1_000</samp><samp class="p" data-group-id="8526347157-3">)</samp><samp class="w">
  </samp><samp class="p" data-group-id="8526347157-6">{</samp><samp class="ss">:noreply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="8526347157-6">}</samp><samp class="w">
</samp><samp class="k" data-group-id="8526347157-2">end</samp><samp class="w">

</samp><samp class="kd">def</samp><samp class="w"> </samp><samp class="nf">handle_info</samp><samp class="p" data-group-id="8526347157-7">(</samp><samp class="p" data-group-id="8526347157-8">{</samp><samp class="ss">:reply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">from</samp><samp class="p" data-group-id="8526347157-8">}</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="8526347157-7">)</samp><samp class="w"> </samp><samp class="k" data-group-id="8526347157-9">do</samp><samp class="w">
  </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">reply</samp><samp class="p" data-group-id="8526347157-10">(</samp><samp class="n">from</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:one_second_has_passed</samp><samp class="p" data-group-id="8526347157-10">)</samp><samp class="w">
  </samp><samp class="p" data-group-id="8526347157-11">{</samp><samp class="ss">:noreply</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="n">state</samp><samp class="p" data-group-id="8526347157-11">}</samp><samp class="w">
</samp><samp class="k" data-group-id="8526347157-9">end</samp></code></pre>
  </section>
</section>
<section class="detail" id="start/3">

    <span id="start/2"></span>

  <div class="detail-header">
    <a href="#start/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start(module, init_arg, options \\ [])</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1032" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> start(<a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="#t:options/0">options</a>()) :: <a href="#t:on_start/0">on_start</a>()</pre>

      </div>

<p>Starts a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> process without links (outside of a supervision tree).</p><p>See <a href="#start_link/3"><code class="inline">start_link/3</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="start_link/3">

    <span id="start_link/2"></span>

  <div class="detail-header">
    <a href="#start_link/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">start_link(module, init_arg, options \\ [])</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1022" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> start_link(<a href="typespecs.xhtml#built-in-types">module</a>(), <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="#t:options/0">options</a>()) :: <a href="#t:on_start/0">on_start</a>()</pre>

      </div>

<p>Starts a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> process linked to the current process.</p><p>This is often used to start the <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> as part of a supervision tree.</p><p>Once the server is started, the <a href="#c:init/1"><code class="inline">init/1</code></a> function of the given <code class="inline">module</code> is
called with <code class="inline">init_arg</code> as its argument to initialize the server. To ensure a
synchronized start-up procedure, this function does not return until <a href="#c:init/1"><code class="inline">init/1</code></a>
has returned.</p><p>Note that a <a href="GenServer.xhtml"><code class="inline">GenServer</code></a> started with <a href="#start_link/3"><code class="inline">start_link/3</code></a> is linked to the
parent process and will exit in case of crashes from the parent. The GenServer
will also exit due to the <code class="inline">:normal</code> reasons in case it is configured to trap
exits in the <a href="#c:init/1"><code class="inline">init/1</code></a> callback.</p><h2 id="start_link/3-options" class="section-heading"><a href="#start_link/3-options" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Options</span></h2><ul><li><p><code class="inline">:name</code> - used for name registration as described in the &quot;Name
registration&quot; section in the documentation for <a href="GenServer.xhtml"><code class="inline">GenServer</code></a></p></li><li><p><code class="inline">:timeout</code> - if present, the server is allowed to spend the given number of
milliseconds initializing or it will be terminated and the start function
will return <code class="inline">{:error, :timeout}</code></p></li><li><p><code class="inline">:debug</code> - if present, the corresponding function in the <a href="https://www.erlang.org/doc/apps/stdlib/sys.html"><code class="inline">:sys</code> module</a> is invoked</p></li><li><p><code class="inline">:spawn_opt</code> - if present, its value is passed as options to the
underlying process as in <a href="Process.xhtml#spawn/4"><code class="inline">Process.spawn/4</code></a></p></li><li><p><code class="inline">:hibernate_after</code> - if present, the GenServer process awaits any message for
the given number of milliseconds and if no message is received, the process goes
into hibernation automatically (by calling <a href="https://www.erlang.org/doc/apps/stdlib/proc_lib.html#hibernate/3"><code class="inline">:proc_lib.hibernate/3</code></a>).</p></li></ul><h2 id="start_link/3-return-values" class="section-heading"><a href="#start_link/3-return-values" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Return values</span></h2><p>If the server is successfully created and initialized, this function returns
<code class="inline">{:ok, pid}</code>, where <code class="inline">pid</code> is the PID of the server. If a process with the
specified server name already exists, this function returns
<code class="inline">{:error, {:already_started, pid}}</code> with the PID of that process.</p><p>If the <a href="#c:init/1"><code class="inline">init/1</code></a> callback fails with <code class="inline">reason</code>, this function returns
<code class="inline">{:error, reason}</code>. Otherwise, if it returns <code class="inline">{:stop, reason}</code>
or <code class="inline">:ignore</code>, the process is terminated and this function returns
<code class="inline">{:error, reason}</code> or <code class="inline">:ignore</code>, respectively.</p>
  </section>
</section>
<section class="detail" id="stop/3">

    <span id="stop/1"></span>

    <span id="stop/2"></span>

  <div class="detail-header">
    <a href="#stop/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">stop(server, reason \\ :normal, timeout \\ :infinity)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1076" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> stop(<a href="#t:server/0">server</a>(), reason :: <a href="typespecs.xhtml#built-in-types">term</a>(), <a href="typespecs.xhtml#built-in-types">timeout</a>()) :: :ok</pre>

      </div>

<p>Synchronously stops the server with the given <code class="inline">reason</code>.</p><p>The <a href="#c:terminate/2"><code class="inline">terminate/2</code></a> callback of the given <code class="inline">server</code> will be invoked before
exiting. This function returns <code class="inline">:ok</code> if the server terminates with the
given reason; if it terminates with another reason, the call exits.</p><p>This function keeps OTP semantics regarding error reporting.
If the reason is any other than <code class="inline">:normal</code>, <code class="inline">:shutdown</code> or
<code class="inline">{:shutdown, _}</code>, an error report is logged.</p>
  </section>
</section>
<section class="detail" id="whereis/1">

  <div class="detail-header">
    <a href="#whereis/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">whereis(server)</h1>


        <a href="https://github.com/elixir-lang/elixir/blob/v1.18.4/lib/elixir/lib/gen_server.ex#L1284" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> whereis(<a href="#t:server/0">server</a>()) :: <a href="typespecs.xhtml#basic-types">pid</a>() | {<a href="typespecs.xhtml#basic-types">atom</a>(), <a href="typespecs.xhtml#built-in-types">node</a>()} | nil</pre>

      </div>

<p>Returns the <code class="inline">pid</code> or <code class="inline">{name, node}</code> of a GenServer process, <code class="inline">nil</code> otherwise.</p><p>To be precise, <code class="inline">nil</code> is returned whenever a <code class="inline">pid</code> or <code class="inline">{name, node}</code> cannot
be returned. Note there is no guarantee the returned <code class="inline">pid</code> or <code class="inline">{name, node}</code>
is alive, as a process could terminate immediately after it is looked up.</p><h2 id="whereis/1-examples" class="section-heading"><a href="#whereis/1-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Examples</span></h2><p>For example, to lookup a server process, monitor it and send a cast to it:</p><pre><code class="makeup elixir" translate="no"><samp class="n">process</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">whereis</samp><samp class="p" data-group-id="3934398745-1">(</samp><samp class="n">server</samp><samp class="p" data-group-id="3934398745-1">)</samp><samp class="w">
</samp><samp class="n">monitor</samp><samp class="w"> </samp><samp class="o">=</samp><samp class="w"> </samp><samp class="nc">Process</samp><samp class="o">.</samp><samp class="n">monitor</samp><samp class="p" data-group-id="3934398745-2">(</samp><samp class="n">process</samp><samp class="p" data-group-id="3934398745-2">)</samp><samp class="w">
</samp><samp class="nc">GenServer</samp><samp class="o">.</samp><samp class="n">cast</samp><samp class="p" data-group-id="3934398745-3">(</samp><samp class="n">process</samp><samp class="p">,</samp><samp class="w"> </samp><samp class="ss">:hello</samp><samp class="p" data-group-id="3934398745-3">)</samp></code></pre>
  </section>
</section>

        </div>
      </section>


  </body>
</html>
